{"version":3,"sources":["webpack:///webpack/bootstrap 1e14cb563d8a7c2900d9","webpack:///web/ui_utils.js","webpack:///web/pdfjs.js","webpack:///web/dom_events.js","webpack:///web/pdf_rendering_queue.js","webpack:///web/overlay_manager.js","webpack:///web/pdf_link_service.js","webpack:///web/app.js","webpack:///node_modules/webpack/buildin/global.js","webpack:///src/shared/util.js","webpack:///web/pdf_find_controller.js","webpack:///web/genericcom.js","webpack:///src/shared/compatibility.js","webpack:///web/add_note_tool.js","webpack:///web/annotation_layer_builder.js","webpack:///web/download_manager.js","webpack:///web/edit_note_tool.js","webpack:///web/grab_to_pan.js","webpack:///web/hand_tool.js","webpack:///web/note_layer.js","webpack:///web/note_layer_builder.js","webpack:///web/note_store.js","webpack:///web/password_prompt.js","webpack:///web/pdf_document_properties.js","webpack:///web/pdf_find_bar.js","webpack:///web/pdf_history.js","webpack:///web/pdf_outline_viewer.js","webpack:///web/pdf_page_view.js","webpack:///web/pdf_presentation_mode.js","webpack:///web/pdf_sidebar.js","webpack:///web/pdf_thumbnail_view.js","webpack:///web/pdf_thumbnail_viewer.js","webpack:///web/pdf_viewer.js","webpack:///web/preferences.js","webpack:///web/secondary_toolbar.js","webpack:///web/text_layer_builder.js","webpack:///web/toolbar.js","webpack:///web/view_history.js","webpack:///web/viewer.js"],"names":[],"mappings":"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","file":"viewer.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 37);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1e14cb563d8a7c2900d9","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PDFJS } from './pdfjs';\n\nvar CSS_UNITS = 96.0 / 72.0;\nvar DEFAULT_SCALE_VALUE = 'auto';\nvar DEFAULT_SCALE = 1.0;\nvar MIN_SCALE = 0.25;\nvar MAX_SCALE = 10.0;\nvar UNKNOWN_SCALE = 0;\nvar MAX_AUTO_SCALE = 1.25;\nvar SCROLLBAR_PADDING = 40;\nvar VERTICAL_PADDING = 5;\n\nvar RendererType = {\n  CANVAS: 'canvas',\n  SVG: 'svg',\n};\n\nvar mozL10n = {\n  setLanguage: function() {},\n  getDirection: function() { return 'ltr'; },\n  getReadyState: function() { return 'complete'; },\n  get: function(key, args, fallbackString) {\n    return fallbackString.replace(/{{([^}]+)}}/g, function(_, k) { return args[k] });\n  },\n  translate: function() {}\n};\n\n/**\n * Disables fullscreen support, and by extension Presentation Mode,\n * in browsers which support the fullscreen API.\n * @var {boolean}\n */\nPDFJS.disableFullscreen = (PDFJS.disableFullscreen === undefined ?\n                           false : PDFJS.disableFullscreen);\n\n/**\n * Enables CSS only zooming.\n * @var {boolean}\n */\nPDFJS.useOnlyCssZoom = (PDFJS.useOnlyCssZoom === undefined ?\n                        false : PDFJS.useOnlyCssZoom);\n\n/**\n * The maximum supported canvas size in total pixels e.g. width * height.\n * The default value is 4096 * 4096. Use -1 for no limit.\n * @var {number}\n */\nPDFJS.maxCanvasPixels = (PDFJS.maxCanvasPixels === undefined ?\n                         16777216 : PDFJS.maxCanvasPixels);\n\n/**\n * Disables saving of the last position of the viewed PDF.\n * @var {boolean}\n */\nPDFJS.disableHistory = (PDFJS.disableHistory === undefined ?\n                        false : PDFJS.disableHistory);\n\n/**\n * Disables creation of the text layer that used for text selection and search.\n * @var {boolean}\n */\nPDFJS.disableTextLayer = (PDFJS.disableTextLayer === undefined ?\n                          false : PDFJS.disableTextLayer);\n\n/**\n * Disables maintaining the current position in the document when zooming.\n */\nPDFJS.ignoreCurrentPositionOnZoom = (PDFJS.ignoreCurrentPositionOnZoom ===\n  undefined ? false : PDFJS.ignoreCurrentPositionOnZoom);\n\n/**\n * Interface locale settings.\n * @var {string}\n */\nPDFJS.locale =\n  (PDFJS.locale === undefined && typeof navigator !== 'undefined' ?\n   navigator.language : PDFJS.locale);\n\n/**\n * Returns scale factor for the canvas. It makes sense for the HiDPI displays.\n * @return {Object} The object with horizontal (sx) and vertical (sy)\n                    scales. The scaled property is set to false if scaling is\n                    not required, true otherwise.\n */\nfunction getOutputScale(ctx) {\n  var devicePixelRatio = window.devicePixelRatio || 1;\n  var backingStoreRatio = ctx.webkitBackingStorePixelRatio ||\n                          ctx.mozBackingStorePixelRatio ||\n                          ctx.msBackingStorePixelRatio ||\n                          ctx.oBackingStorePixelRatio ||\n                          ctx.backingStorePixelRatio || 1;\n  var pixelRatio = devicePixelRatio / backingStoreRatio;\n  return {\n    sx: pixelRatio,\n    sy: pixelRatio,\n    scaled: pixelRatio !== 1\n  };\n}\n\n/**\n * Scrolls specified element into view of its parent.\n * @param {Object} element - The element to be visible.\n * @param {Object} spot - An object with optional top and left properties,\n *   specifying the offset from the top left edge.\n * @param {boolean} skipOverflowHiddenElements - Ignore elements that have\n *   the CSS rule `overflow: hidden;` set. The default is false.\n */\nfunction scrollIntoView(element, spot, skipOverflowHiddenElements) {\n  // Assuming offsetParent is available (it's not available when viewer is in\n  // hidden iframe or object). We have to scroll: if the offsetParent is not set\n  // producing the error. See also animationStarted.\n  var parent = element.offsetParent;\n  if (!parent) {\n    console.error('offsetParent is not set -- cannot scroll');\n    return;\n  }\n  var checkOverflow = skipOverflowHiddenElements || false;\n  var offsetY = element.offsetTop + element.clientTop;\n  var offsetX = element.offsetLeft + element.clientLeft;\n  while (parent.clientHeight === parent.scrollHeight ||\n         (checkOverflow && getComputedStyle(parent).overflow === 'hidden')) {\n    if (parent.dataset._scaleY) {\n      offsetY /= parent.dataset._scaleY;\n      offsetX /= parent.dataset._scaleX;\n    }\n    offsetY += parent.offsetTop;\n    offsetX += parent.offsetLeft;\n    parent = parent.offsetParent;\n    if (!parent) {\n      return; // no need to scroll\n    }\n  }\n  if (spot) {\n    if (spot.top !== undefined) {\n      offsetY += spot.top;\n    }\n    if (spot.left !== undefined) {\n      offsetX += spot.left;\n      parent.scrollLeft = offsetX;\n    }\n  }\n  parent.scrollTop = offsetY;\n}\n\n/**\n * Helper function to start monitoring the scroll event and converting them into\n * PDF.js friendly one: with scroll debounce and scroll direction.\n */\nfunction watchScroll(viewAreaElement, callback) {\n  var debounceScroll = function debounceScroll(evt) {\n    if (rAF) {\n      return;\n    }\n    // schedule an invocation of scroll for next animation frame.\n    rAF = window.requestAnimationFrame(function viewAreaElementScrolled() {\n      rAF = null;\n\n      var currentY = viewAreaElement.scrollTop;\n      var lastY = state.lastY;\n      if (currentY !== lastY) {\n        state.down = currentY > lastY;\n      }\n      state.lastY = currentY;\n      callback(state);\n    });\n  };\n\n  var state = {\n    down: true,\n    lastY: viewAreaElement.scrollTop,\n    _eventHandler: debounceScroll\n  };\n\n  var rAF = null;\n  viewAreaElement.addEventListener('scroll', debounceScroll, true);\n  return state;\n}\n\n/**\n * Helper function to parse query string (e.g. ?param1=value&parm2=...).\n */\nfunction parseQueryString(query) {\n  var parts = query.split('&');\n  var params = {};\n  for (var i = 0, ii = parts.length; i < ii; ++i) {\n    var param = parts[i].split('=');\n    var key = param[0].toLowerCase();\n    var value = param.length > 1 ? param[1] : null;\n    params[decodeURIComponent(key)] = decodeURIComponent(value);\n  }\n  return params;\n}\n\n/**\n * Use binary search to find the index of the first item in a given array which\n * passes a given condition. The items are expected to be sorted in the sense\n * that if the condition is true for one item in the array, then it is also true\n * for all following items.\n *\n * @returns {Number} Index of the first array element to pass the test,\n *                   or |items.length| if no such element exists.\n */\nfunction binarySearchFirstItem(items, condition) {\n  var minIndex = 0;\n  var maxIndex = items.length - 1;\n\n  if (items.length === 0 || !condition(items[maxIndex])) {\n    return items.length;\n  }\n  if (condition(items[minIndex])) {\n    return minIndex;\n  }\n\n  while (minIndex < maxIndex) {\n    var currentIndex = (minIndex + maxIndex) >> 1;\n    var currentItem = items[currentIndex];\n    if (condition(currentItem)) {\n      maxIndex = currentIndex;\n    } else {\n      minIndex = currentIndex + 1;\n    }\n  }\n  return minIndex; /* === maxIndex */\n}\n\n/**\n *  Approximates float number as a fraction using Farey sequence (max order\n *  of 8).\n *  @param {number} x - Positive float number.\n *  @returns {Array} Estimated fraction: the first array item is a numerator,\n *                   the second one is a denominator.\n */\nfunction approximateFraction(x) {\n  // Fast paths for int numbers or their inversions.\n  if (Math.floor(x) === x) {\n    return [x, 1];\n  }\n  var xinv = 1 / x;\n  var limit = 8;\n  if (xinv > limit) {\n    return [1, limit];\n  } else if (Math.floor(xinv) === xinv) {\n    return [1, xinv];\n  }\n\n  var x_ = x > 1 ? xinv : x;\n  // a/b and c/d are neighbours in Farey sequence.\n  var a = 0, b = 1, c = 1, d = 1;\n  // Limiting search to order 8.\n  while (true) {\n    // Generating next term in sequence (order of q).\n    var p = a + c, q = b + d;\n    if (q > limit) {\n      break;\n    }\n    if (x_ <= p / q) {\n      c = p; d = q;\n    } else {\n      a = p; b = q;\n    }\n  }\n  var result;\n  // Select closest of the neighbours to x.\n  if (x_ - a / b < c / d - x_) {\n    result = x_ === x ? [a, b] : [b, a];\n  } else {\n    result = x_ === x ? [c, d] : [d, c];\n  }\n  return result;\n}\n\nfunction roundToDivide(x, div) {\n  var r = x % div;\n  return r === 0 ? x : Math.round(x - r + div);\n}\n\n/**\n * Generic helper to find out what elements are visible within a scroll pane.\n */\nfunction getVisibleElements(scrollEl, views, sortByVisibility) {\n  var top = scrollEl.scrollTop, bottom = top + scrollEl.clientHeight;\n  var left = scrollEl.scrollLeft, right = left + scrollEl.clientWidth;\n\n  function isElementBottomBelowViewTop(view) {\n    var element = view.div;\n    var elementBottom =\n      element.offsetTop + element.clientTop + element.clientHeight;\n    return elementBottom > top;\n  }\n\n  var visible = [], view, element;\n  var currentHeight, viewHeight, hiddenHeight, percentHeight;\n  var currentWidth, viewWidth;\n  var firstVisibleElementInd = (views.length === 0) ? 0 :\n    binarySearchFirstItem(views, isElementBottomBelowViewTop);\n\n  for (var i = firstVisibleElementInd, ii = views.length; i < ii; i++) {\n    view = views[i];\n    element = view.div;\n    currentHeight = element.offsetTop + element.clientTop;\n    viewHeight = element.clientHeight;\n\n    if (currentHeight > bottom) {\n      break;\n    }\n\n    currentWidth = element.offsetLeft + element.clientLeft;\n    viewWidth = element.clientWidth;\n    if (currentWidth + viewWidth < left || currentWidth > right) {\n      continue;\n    }\n    hiddenHeight = Math.max(0, top - currentHeight) +\n      Math.max(0, currentHeight + viewHeight - bottom);\n    percentHeight = ((viewHeight - hiddenHeight) * 100 / viewHeight) | 0;\n\n    visible.push({\n      id: view.id,\n      x: currentWidth,\n      y: currentHeight,\n      view,\n      percent: percentHeight\n    });\n  }\n\n  var first = visible[0];\n  var last = visible[visible.length - 1];\n\n  if (sortByVisibility) {\n    visible.sort(function(a, b) {\n      var pc = a.percent - b.percent;\n      if (Math.abs(pc) > 0.001) {\n        return -pc;\n      }\n      return a.id - b.id; // ensure stability\n    });\n  }\n  return { first, last, views: visible, };\n}\n\n/**\n * Event handler to suppress context menu.\n */\nfunction noContextMenuHandler(e) {\n  e.preventDefault();\n}\n\nfunction isDataSchema(url) {\n  var i = 0, ii = url.length;\n  while (i < ii && url[i].trim() === '') {\n    i++;\n  }\n  return url.substr(i, 5).toLowerCase() === 'data:';\n}\n\n/**\n * Returns the filename or guessed filename from the url (see issue 3455).\n * @param {string} url - The original PDF location.\n * @param {string} defaultFilename - The value returned if the filename is\n *   unknown, or the protocol is unsupported.\n * @returns {string} Guessed PDF filename.\n */\nfunction getPDFFileNameFromURL(url, defaultFilename = 'document.pdf') {\n  if (isDataSchema(url)) {\n    console.warn('getPDFFileNameFromURL: ' +\n                 'ignoring \"data:\" URL for performance reasons.');\n    return defaultFilename;\n  }\n  var reURI = /^(?:(?:[^:]+:)?\\/\\/[^\\/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  //            SCHEME        HOST         1.PATH  2.QUERY   3.REF\n  // Pattern to get last matching NAME.pdf\n  var reFilename = /[^\\/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  var splitURI = reURI.exec(url);\n  var suggestedFilename = reFilename.exec(splitURI[1]) ||\n                          reFilename.exec(splitURI[2]) ||\n                          reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.indexOf('%') !== -1) {\n      // URL-encoded %2Fpath%2Fto%2Ffile.pdf should be file.pdf\n      try {\n        suggestedFilename =\n          reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch (e) { // Possible (extremely rare) errors:\n        // URIError \"Malformed URI\", e.g. for \"%AA.pdf\"\n        // TypeError \"null has no properties\", e.g. for \"%2F.pdf\"\n      }\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\n\nfunction normalizeWheelEventDelta(evt) {\n  var delta = Math.sqrt(evt.deltaX * evt.deltaX + evt.deltaY * evt.deltaY);\n  var angle = Math.atan2(evt.deltaY, evt.deltaX);\n  if (-0.25 * Math.PI < angle && angle < 0.75 * Math.PI) {\n    // All that is left-up oriented has to change the sign.\n    delta = -delta;\n  }\n\n  var MOUSE_DOM_DELTA_PIXEL_MODE = 0;\n  var MOUSE_DOM_DELTA_LINE_MODE = 1;\n  var MOUSE_PIXELS_PER_LINE = 30;\n  var MOUSE_LINES_PER_PAGE = 30;\n\n  // Converts delta to per-page units\n  if (evt.deltaMode === MOUSE_DOM_DELTA_PIXEL_MODE) {\n    delta /= MOUSE_PIXELS_PER_LINE * MOUSE_LINES_PER_PAGE;\n  } else if (evt.deltaMode === MOUSE_DOM_DELTA_LINE_MODE) {\n    delta /= MOUSE_LINES_PER_PAGE;\n  }\n  return delta;\n}\n\n/**\n * Promise that is resolved when DOM window becomes visible.\n */\nvar animationStarted = new Promise(function (resolve) {\n  window.requestAnimationFrame(resolve);\n});\n\n/**\n * Promise that is resolved when UI localization is finished.\n */\nvar localized = new Promise(function (resolve, reject) {\n  if (!mozL10n) {\n    // Resolve as localized even if mozL10n is not available.\n    resolve();\n    return;\n  }\n  if (mozL10n.getReadyState() !== 'loading') {\n    resolve();\n    return;\n  }\n  window.addEventListener('localized', function localized(evt) {\n    resolve();\n  });\n});\n\n/**\n * Simple event bus for an application. Listeners are attached using the\n * `on` and `off` methods. To raise an event, the `dispatch` method shall be\n * used.\n */\nvar EventBus = (function EventBusClosure() {\n  function EventBus() {\n    this._listeners = Object.create(null);\n  }\n  EventBus.prototype = {\n    on: function EventBus_on(eventName, listener) {\n      var eventListeners = this._listeners[eventName];\n      if (!eventListeners) {\n        eventListeners = [];\n        this._listeners[eventName] = eventListeners;\n      }\n      eventListeners.push(listener);\n    },\n    off: function EventBus_on(eventName, listener) {\n      var eventListeners = this._listeners[eventName];\n      var i;\n      if (!eventListeners || ((i = eventListeners.indexOf(listener)) < 0)) {\n        return;\n      }\n      eventListeners.splice(i, 1);\n    },\n    dispatch: function EventBus_dispath(eventName) {\n      var eventListeners = this._listeners[eventName];\n      if (!eventListeners || eventListeners.length === 0) {\n        return;\n      }\n      // Passing all arguments after the eventName to the listeners.\n      var args = Array.prototype.slice.call(arguments, 1);\n      // Making copy of the listeners array in case if it will be modified\n      // during dispatch.\n      eventListeners.slice(0).forEach(function (listener) {\n        listener.apply(null, args);\n      });\n    }\n  };\n  return EventBus;\n})();\n\nvar ProgressBar = (function ProgressBarClosure() {\n\n  function clamp(v, min, max) {\n    return Math.min(Math.max(v, min), max);\n  }\n\n  function ProgressBar(id, opts) {\n    this.visible = true;\n\n    // Fetch the sub-elements for later.\n    this.div = document.querySelector(id + ' .progress');\n\n    // Get the loading bar element, so it can be resized to fit the viewer.\n    this.bar = this.div.parentNode;\n\n    // Get options, with sensible defaults.\n    this.height = opts.height || 100;\n    this.width = opts.width || 100;\n    this.units = opts.units || '%';\n\n    // Initialize heights.\n    this.div.style.height = this.height + this.units;\n    this.percent = 0;\n  }\n\n  ProgressBar.prototype = {\n\n    updateBar: function ProgressBar_updateBar() {\n      if (this._indeterminate) {\n        this.div.classList.add('indeterminate');\n        this.div.style.width = this.width + this.units;\n        return;\n      }\n\n      this.div.classList.remove('indeterminate');\n      var progressSize = this.width * this._percent / 100;\n      this.div.style.width = progressSize + this.units;\n    },\n\n    get percent() {\n      return this._percent;\n    },\n\n    set percent(val) {\n      this._indeterminate = isNaN(val);\n      this._percent = clamp(val, 0, 100);\n      this.updateBar();\n    },\n\n    setWidth: function ProgressBar_setWidth(viewer) {\n      if (viewer) {\n        var container = viewer.parentNode;\n        var scrollbarWidth = container.offsetWidth - viewer.offsetWidth;\n        if (scrollbarWidth > 0) {\n          this.bar.setAttribute('style', 'width: calc(100% - ' +\n                                         scrollbarWidth + 'px);');\n        }\n      }\n    },\n\n    hide: function ProgressBar_hide() {\n      if (!this.visible) {\n        return;\n      }\n      this.visible = false;\n      this.bar.classList.add('hidden');\n      document.body.classList.remove('loadingInProgress');\n    },\n\n    show: function ProgressBar_show() {\n      if (this.visible) {\n        return;\n      }\n      this.visible = true;\n      document.body.classList.add('loadingInProgress');\n      this.bar.classList.remove('hidden');\n    }\n  };\n\n  return ProgressBar;\n})();\n\nexport {\n  CSS_UNITS,\n  DEFAULT_SCALE_VALUE,\n  DEFAULT_SCALE,\n  MIN_SCALE,\n  MAX_SCALE,\n  UNKNOWN_SCALE,\n  MAX_AUTO_SCALE,\n  SCROLLBAR_PADDING,\n  VERTICAL_PADDING,\n  RendererType,\n  mozL10n,\n  EventBus,\n  ProgressBar,\n  getPDFFileNameFromURL,\n  noContextMenuHandler,\n  parseQueryString,\n  getVisibleElements,\n  roundToDivide,\n  approximateFraction,\n  getOutputScale,\n  scrollIntoView,\n  watchScroll,\n  binarySearchFirstItem,\n  normalizeWheelEventDelta,\n  animationStarted,\n  localized,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/ui_utils.js","/* Copyright 2016 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals module, __pdfjsdev_webpack__ */\n\n'use strict';\n\nif (typeof PDFJSDev !== 'undefined' && PDFJSDev.test('PRODUCTION')) {\n  var pdfjsLib;\n  // The if below protected by __pdfjsdev_webpack__ check from webpack parsing.\n  if (typeof __pdfjsdev_webpack__ === 'undefined') {\n    if (typeof window !== 'undefined' && window['pdfjs-dist/build/pdf']) {\n      pdfjsLib = window['pdfjs-dist/build/pdf'];\n    } else if (typeof require === 'function') {\n      if (PDFJSDev.test('LIB')) {\n        pdfjsLib = require('../pdf.js');\n      } else {\n        pdfjsLib = require('../build/pdf.js');\n      }\n    } else {\n      throw new Error('Neither `require` nor `window` found');\n    }\n  }\n  module.exports = pdfjsLib;\n} else {\n  (function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n      define('pdfjs-web/pdfjs', ['exports', 'pdfjs/main_loader'], factory);\n    } else if (typeof exports !== 'undefined') {\n      factory(exports, require('../src/main_loader.js'));\n    } else {\n      factory((root.pdfjsWebPDFJS = {}), root.pdfjsMainLoader);\n    }\n  }(this, function (exports, mainLoader) {\n    // Re-export all mainLoader members.\n    for (var i in mainLoader) {\n      if (Object.prototype.hasOwnProperty.call(mainLoader, i)) {\n        exports[i] = mainLoader[i];\n      }\n    }\n  }));\n}\n\n\n\n// WEBPACK FOOTER //\n// web/pdfjs.js","/* Copyright 2016 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { EventBus } from './ui_utils';\n\n// Attaching to the application event bus to dispatch events to the DOM for\n// backwards viewer API compatibility.\nfunction attachDOMEventsToEventBus(eventBus) {\n  eventBus.on('documentload', function () {\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('documentload', true, true, {});\n    window.dispatchEvent(event);\n  });\n  eventBus.on('pagerendered', function (e) {\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('pagerendered', true, true, {\n      pageNumber: e.pageNumber,\n      cssTransform: e.cssTransform,\n    });\n    e.source.div.dispatchEvent(event);\n  });\n  eventBus.on('textlayerrendered', function (e) {\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('textlayerrendered', true, true, {\n      pageNumber: e.pageNumber\n    });\n    e.source.textLayerDiv.dispatchEvent(event);\n  });\n  eventBus.on('pagechange', function (e) {\n    var event = document.createEvent('UIEvents');\n    event.initUIEvent('pagechange', true, true, window, 0);\n    event.pageNumber = e.pageNumber;\n    e.source.container.dispatchEvent(event);\n  });\n  eventBus.on('pagesinit', function (e) {\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('pagesinit', true, true, null);\n    e.source.container.dispatchEvent(event);\n  });\n  eventBus.on('pagesloaded', function (e) {\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('pagesloaded', true, true, {\n      pagesCount: e.pagesCount\n    });\n    e.source.container.dispatchEvent(event);\n  });\n  eventBus.on('scalechange', function (e) {\n    var event = document.createEvent('UIEvents');\n    event.initUIEvent('scalechange', true, true, window, 0);\n    event.scale = e.scale;\n    event.presetValue = e.presetValue;\n    e.source.container.dispatchEvent(event);\n  });\n  eventBus.on('updateviewarea', function (e) {\n    var event = document.createEvent('UIEvents');\n    event.initUIEvent('updateviewarea', true, true, window, 0);\n    event.location = e.location;\n    e.source.container.dispatchEvent(event);\n  });\n  eventBus.on('find', function (e) {\n    if (e.source === window) {\n      return; // event comes from FirefoxCom, no need to replicate\n    }\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('find' + e.type, true, true, {\n      query: e.query,\n      phraseSearch: e.phraseSearch,\n      caseSensitive: e.caseSensitive,\n      highlightAll: e.highlightAll,\n      findPrevious: e.findPrevious\n    });\n    window.dispatchEvent(event);\n  });\n  eventBus.on('sidebarviewchanged', function (e) {\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('sidebarviewchanged', true, true, {\n      view: e.view,\n    });\n    e.source.outerContainer.dispatchEvent(event);\n  });\n  eventBus.on('pagemode', function (e) {\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('pagemode', true, true, {\n      mode: e.mode,\n    });\n    e.source.pdfViewer.container.dispatchEvent(event);\n  });\n  eventBus.on('namedaction', function (e) {\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('namedaction', true, true, {\n      action: e.action\n    });\n    e.source.pdfViewer.container.dispatchEvent(event);\n  });\n  eventBus.on('presentationmodechanged', function (e) {\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('presentationmodechanged', true, true, {\n      active: e.active,\n      switchInProgress: e.switchInProgress\n    });\n    window.dispatchEvent(event);\n  });\n  eventBus.on('outlineloaded', function (e) {\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('outlineloaded', true, true, {\n      outlineCount: e.outlineCount\n    });\n    e.source.container.dispatchEvent(event);\n  });\n}\n\nvar globalEventBus = null;\nfunction getGlobalEventBus() {\n  if (globalEventBus) {\n    return globalEventBus;\n  }\n  globalEventBus = new EventBus();\n  attachDOMEventsToEventBus(globalEventBus);\n  return globalEventBus;\n}\n\nexport {\n  attachDOMEventsToEventBus,\n  getGlobalEventBus,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/dom_events.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst CLEANUP_TIMEOUT = 30000;\n\nconst RenderingStates = {\n  INITIAL: 0,\n  RUNNING: 1,\n  PAUSED: 2,\n  FINISHED: 3,\n};\n\n/**\n * Controls rendering of the views for pages and thumbnails.\n */\nclass PDFRenderingQueue {\n  constructor() {\n    this.pdfViewer = null;\n    this.pdfThumbnailViewer = null;\n    this.onIdle = null;\n    this.highestPriorityPage = null;\n    this.idleTimeout = null;\n    this.isThumbnailViewEnabled = false;\n  }\n\n  /**\n   * @param {PDFViewer} pdfViewer\n   */\n  setViewer(pdfViewer) {\n    this.pdfViewer = pdfViewer;\n  }\n\n  /**\n   * @param {PDFThumbnailViewer} pdfThumbnailViewer\n   */\n  setThumbnailViewer(pdfThumbnailViewer) {\n    this.pdfThumbnailViewer = pdfThumbnailViewer;\n  }\n\n  /**\n   * @param {IRenderableView} view\n   * @returns {boolean}\n   */\n  isHighestPriority(view) {\n    return this.highestPriorityPage === view.renderingId;\n  }\n\n  /**\n   * @param {Object} currentlyVisiblePages\n   */\n  renderHighestPriority(currentlyVisiblePages) {\n    if (this.idleTimeout) {\n      clearTimeout(this.idleTimeout);\n      this.idleTimeout = null;\n    }\n\n    // Pages have a higher priority than thumbnails, so check them first.\n    if (this.pdfViewer.forceRendering(currentlyVisiblePages)) {\n      return;\n    }\n    // No pages needed rendering, so check thumbnails.\n    if (this.pdfThumbnailViewer && this.isThumbnailViewEnabled) {\n      if (this.pdfThumbnailViewer.forceRendering()) {\n        return;\n      }\n    }\n\n    if (this.onIdle) {\n      this.idleTimeout = setTimeout(this.onIdle.bind(this), CLEANUP_TIMEOUT);\n    }\n  }\n\n  /**\n   * @param {Object} visible\n   * @param {Array} views\n   * @param {boolean} scrolledDown\n   */\n  getHighestPriority(visible, views, scrolledDown) {\n    /**\n     * The state has changed. Figure out which page has the highest priority to\n     * render next (if any).\n     *\n     * Priority:\n     * 1. visible pages\n     * 2. if last scrolled down, the page after the visible pages, or\n     *    if last scrolled up, the page before the visible pages\n     */\n    var visibleViews = visible.views;\n\n    var numVisible = visibleViews.length;\n    if (numVisible === 0) {\n      return false;\n    }\n    for (var i = 0; i < numVisible; ++i) {\n      var view = visibleViews[i].view;\n      if (!this.isViewFinished(view)) {\n        return view;\n      }\n    }\n\n    // All the visible views have rendered; try to render next/previous pages.\n    if (scrolledDown) {\n      var nextPageIndex = visible.last.id;\n      // IDs start at 1, so no need to add 1.\n      if (views[nextPageIndex] && !this.isViewFinished(views[nextPageIndex])) {\n        return views[nextPageIndex];\n      }\n    } else {\n      var previousPageIndex = visible.first.id - 2;\n      if (views[previousPageIndex] &&\n          !this.isViewFinished(views[previousPageIndex])) {\n        return views[previousPageIndex];\n      }\n    }\n    // Everything that needs to be rendered has been.\n    return null;\n  }\n\n  /**\n   * @param {IRenderableView} view\n   * @returns {boolean}\n   */\n  isViewFinished(view) {\n    return view.renderingState === RenderingStates.FINISHED;\n  }\n\n  /**\n   * Render a page or thumbnail view. This calls the appropriate function\n   * based on the views state. If the view is already rendered it will return\n   * `false`.\n   *\n   * @param {IRenderableView} view\n   */\n  renderView(view) {\n    switch (view.renderingState) {\n      case RenderingStates.FINISHED:\n        return false;\n      case RenderingStates.PAUSED:\n        this.highestPriorityPage = view.renderingId;\n        view.resume();\n        break;\n      case RenderingStates.RUNNING:\n        this.highestPriorityPage = view.renderingId;\n        break;\n      case RenderingStates.INITIAL:\n        this.highestPriorityPage = view.renderingId;\n        var continueRendering = () => {\n          this.renderHighestPriority();\n        };\n        view.draw().then(continueRendering, continueRendering);\n        break;\n    }\n    return true;\n  }\n}\n\nexport {\n  RenderingStates,\n  PDFRenderingQueue,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/pdf_rendering_queue.js","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar OverlayManager = {\n  overlays: {},\n  active: null,\n\n  /**\n   * @param {string} name The name of the overlay that is registered.\n   * @param {HTMLDivElement} element The overlay's DOM element.\n   * @param {function} callerCloseMethod (optional) The method that, if present,\n   *                   will call OverlayManager.close from the Object\n   *                   registering the overlay. Access to this method is\n   *                   necessary in order to run cleanup code when e.g.\n   *                   the overlay is force closed. The default is null.\n   * @param {boolean} canForceClose (optional) Indicates if opening the overlay\n   *                  will close an active overlay. The default is false.\n   * @returns {Promise} A promise that is resolved when the overlay has been\n   *                    registered.\n   */\n  register(name, element, callerCloseMethod, canForceClose) {\n    return new Promise((resolve) => {\n      var container;\n      if (!name || !element || !(container = element.parentNode)) {\n        throw new Error('Not enough parameters.');\n      } else if (this.overlays[name]) {\n        throw new Error('The overlay is already registered.');\n      }\n      this.overlays[name] = {\n        element,\n        container,\n        callerCloseMethod: (callerCloseMethod || null),\n        canForceClose: (canForceClose || false),\n      };\n      resolve();\n    });\n  },\n\n  /**\n   * @param {string} name The name of the overlay that is unregistered.\n   * @returns {Promise} A promise that is resolved when the overlay has been\n   *                    unregistered.\n   */\n  unregister(name) {\n    return new Promise((resolve) => {\n      if (!this.overlays[name]) {\n        throw new Error('The overlay does not exist.');\n      } else if (this.active === name) {\n        throw new Error('The overlay cannot be removed while it is active.');\n      }\n      delete this.overlays[name];\n\n      resolve();\n    });\n  },\n\n  /**\n   * @param {string} name The name of the overlay that should be opened.\n   * @returns {Promise} A promise that is resolved when the overlay has been\n   *                    opened.\n   */\n  open(name) {\n    return new Promise((resolve) => {\n      if (!this.overlays[name]) {\n        throw new Error('The overlay does not exist.');\n      } else if (this.active) {\n        if (this.overlays[name].canForceClose) {\n          this._closeThroughCaller();\n        } else if (this.active === name) {\n          throw new Error('The overlay is already active.');\n        } else {\n          throw new Error('Another overlay is currently active.');\n        }\n      }\n      this.active = name;\n      this.overlays[this.active].element.classList.remove('hidden');\n      this.overlays[this.active].container.classList.remove('hidden');\n\n      window.addEventListener('keydown', this._keyDown);\n      resolve();\n    });\n  },\n\n  /**\n   * @param {string} name The name of the overlay that should be closed.\n   * @returns {Promise} A promise that is resolved when the overlay has been\n   *                    closed.\n   */\n  close(name) {\n    return new Promise((resolve) => {\n      if (!this.overlays[name]) {\n        throw new Error('The overlay does not exist.');\n      } else if (!this.active) {\n        throw new Error('The overlay is currently not active.');\n      } else if (this.active !== name) {\n        throw new Error('Another overlay is currently active.');\n      }\n      this.overlays[this.active].container.classList.add('hidden');\n      this.overlays[this.active].element.classList.add('hidden');\n      this.active = null;\n\n      window.removeEventListener('keydown', this._keyDown);\n      resolve();\n    });\n  },\n\n  /**\n   * @private\n   */\n  _keyDown(evt) {\n    var self = OverlayManager;\n    if (self.active && evt.keyCode === 27) { // Esc key.\n      self._closeThroughCaller();\n      evt.preventDefault();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _closeThroughCaller() {\n    if (this.overlays[this.active].callerCloseMethod) {\n      this.overlays[this.active].callerCloseMethod();\n    }\n    if (this.active) {\n      this.close(this.active);\n    }\n  }\n};\n\nexport {\n  OverlayManager,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/overlay_manager.js","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getGlobalEventBus } from './dom_events';\nimport { parseQueryString } from './ui_utils';\n\nvar PageNumberRegExp = /^\\d+$/;\nfunction isPageNumber(str) {\n  return PageNumberRegExp.test(str);\n}\n\n/**\n * @typedef {Object} PDFLinkServiceOptions\n * @property {EventBus} eventBus - The application event bus.\n */\n\n/**\n * Performs navigation functions inside PDF, such as opening specified page,\n * or destination.\n * @class\n * @implements {IPDFLinkService}\n */\nvar PDFLinkService = (function PDFLinkServiceClosure() {\n  /**\n   * @constructs PDFLinkService\n   * @param {PDFLinkServiceOptions} options\n   */\n  function PDFLinkService(options) {\n    options = options || {};\n    this.eventBus = options.eventBus || getGlobalEventBus();\n    this.baseUrl = null;\n    this.pdfDocument = null;\n    this.pdfViewer = null;\n    this.pdfHistory = null;\n\n    this._pagesRefCache = null;\n  }\n\n  PDFLinkService.prototype = {\n    setDocument: function PDFLinkService_setDocument(pdfDocument, baseUrl) {\n      this.baseUrl = baseUrl;\n      this.pdfDocument = pdfDocument;\n      this._pagesRefCache = Object.create(null);\n    },\n\n    setViewer: function PDFLinkService_setViewer(pdfViewer) {\n      this.pdfViewer = pdfViewer;\n    },\n\n    setHistory: function PDFLinkService_setHistory(pdfHistory) {\n      this.pdfHistory = pdfHistory;\n    },\n\n    /**\n     * @returns {number}\n     */\n    get pagesCount() {\n      return this.pdfDocument ? this.pdfDocument.numPages : 0;\n    },\n\n    /**\n     * @returns {number}\n     */\n    get page() {\n      return this.pdfViewer.currentPageNumber;\n    },\n\n    /**\n     * @param {number} value\n     */\n    set page(value) {\n      this.pdfViewer.currentPageNumber = value;\n    },\n\n    /**\n     * @param dest - The PDF destination object.\n     */\n    navigateTo: function PDFLinkService_navigateTo(dest) {\n      var destString = '';\n      var self = this;\n\n      var goToDestination = function(destRef) {\n        // dest array looks like that: <page-ref> </XYZ|/FitXXX> <args..>\n        var pageNumber;\n        if (destRef instanceof Object) {\n          pageNumber = self._cachedPageNumber(destRef);\n        } else if ((destRef | 0) === destRef) { // Integer\n          pageNumber = destRef + 1;\n        } else {\n          console.error('PDFLinkService_navigateTo: \"' + destRef +\n                        '\" is not a valid destination reference.');\n          return;\n        }\n\n        if (pageNumber) {\n          if (pageNumber < 1 || pageNumber > self.pagesCount) {\n            console.error('PDFLinkService_navigateTo: \"' + pageNumber +\n                          '\" is a non-existent page number.');\n            return;\n          }\n          self.pdfViewer.scrollPageIntoView({\n            pageNumber,\n            destArray: dest,\n          });\n\n          if (self.pdfHistory) {\n            // Update the browsing history.\n            self.pdfHistory.push({\n              dest,\n              hash: destString,\n              page: pageNumber\n            });\n          }\n        } else {\n          self.pdfDocument.getPageIndex(destRef).then(function (pageIndex) {\n            self.cachePageRef(pageIndex + 1, destRef);\n            goToDestination(destRef);\n          }).catch(function () {\n            console.error('PDFLinkService_navigateTo: \"' + destRef +\n                          '\" is not a valid page reference.');\n            return;\n          });\n        }\n      };\n\n      var destinationPromise;\n      if (typeof dest === 'string') {\n        destString = dest;\n        destinationPromise = this.pdfDocument.getDestination(dest);\n      } else {\n        destinationPromise = Promise.resolve(dest);\n      }\n      destinationPromise.then(function(destination) {\n        dest = destination;\n        if (!(destination instanceof Array)) {\n          console.error('PDFLinkService_navigateTo: \"' + destination +\n                        '\" is not a valid destination array.');\n          return;\n        }\n        goToDestination(destination[0]);\n      });\n    },\n\n    /**\n     * @param dest - The PDF destination object.\n     * @returns {string} The hyperlink to the PDF object.\n     */\n    getDestinationHash: function PDFLinkService_getDestinationHash(dest) {\n      if (typeof dest === 'string') {\n        // In practice, a named destination may contain only a number.\n        // If that happens, use the '#nameddest=' form to avoid the link\n        // redirecting to a page, instead of the correct destination.\n        return this.getAnchorUrl(\n          '#' + (isPageNumber(dest) ? 'nameddest=' : '') + escape(dest));\n      }\n      if (dest instanceof Array) {\n        var str = JSON.stringify(dest);\n        return this.getAnchorUrl('#' + escape(str));\n      }\n      return this.getAnchorUrl('');\n    },\n\n    /**\n     * Prefix the full url on anchor links to make sure that links are resolved\n     * relative to the current URL instead of the one defined in <base href>.\n     * @param {String} anchor The anchor hash, including the #.\n     * @returns {string} The hyperlink to the PDF object.\n     */\n    getAnchorUrl: function PDFLinkService_getAnchorUrl(anchor) {\n      return (this.baseUrl || '') + anchor;\n    },\n\n    /**\n     * @param {string} hash\n     */\n    setHash: function PDFLinkService_setHash(hash) {\n      var pageNumber, dest;\n      if (hash.indexOf('=') >= 0) {\n        var params = parseQueryString(hash);\n        if ('search' in params) {\n          this.eventBus.dispatch('findfromurlhash', {\n            source: this,\n            query: params['search'].replace(/\"/g, ''),\n            phraseSearch: (params['phrase'] === 'true')\n          });\n        }\n        // borrowing syntax from \"Parameters for Opening PDF Files\"\n        if ('nameddest' in params) {\n          if (this.pdfHistory) {\n            this.pdfHistory.updateNextHashParam(params.nameddest);\n          }\n          this.navigateTo(params.nameddest);\n          return;\n        }\n        if ('page' in params) {\n          pageNumber = (params.page | 0) || 1;\n        }\n        if ('zoom' in params) {\n          // Build the destination array.\n          var zoomArgs = params.zoom.split(','); // scale,left,top\n          var zoomArg = zoomArgs[0];\n          var zoomArgNumber = parseFloat(zoomArg);\n\n          if (zoomArg.indexOf('Fit') === -1) {\n            // If the zoomArg is a number, it has to get divided by 100. If it's\n            // a string, it should stay as it is.\n            dest = [null, { name: 'XYZ' },\n                    zoomArgs.length > 1 ? (zoomArgs[1] | 0) : null,\n                    zoomArgs.length > 2 ? (zoomArgs[2] | 0) : null,\n                    (zoomArgNumber ? zoomArgNumber / 100 : zoomArg)];\n          } else {\n            if (zoomArg === 'Fit' || zoomArg === 'FitB') {\n              dest = [null, { name: zoomArg }];\n            } else if ((zoomArg === 'FitH' || zoomArg === 'FitBH') ||\n                       (zoomArg === 'FitV' || zoomArg === 'FitBV')) {\n              dest = [null, { name: zoomArg },\n                      zoomArgs.length > 1 ? (zoomArgs[1] | 0) : null];\n            } else if (zoomArg === 'FitR') {\n              if (zoomArgs.length !== 5) {\n                console.error('PDFLinkService_setHash: ' +\n                              'Not enough parameters for \\'FitR\\'.');\n              } else {\n                dest = [null, { name: zoomArg },\n                        (zoomArgs[1] | 0), (zoomArgs[2] | 0),\n                        (zoomArgs[3] | 0), (zoomArgs[4] | 0)];\n              }\n            } else {\n              console.error('PDFLinkService_setHash: \\'' + zoomArg +\n                            '\\' is not a valid zoom value.');\n            }\n          }\n        }\n        if (dest) {\n          this.pdfViewer.scrollPageIntoView({\n            pageNumber: pageNumber || this.page,\n            destArray: dest,\n            allowNegativeOffset: true,\n          });\n        } else if (pageNumber) {\n          this.page = pageNumber; // simple page\n        }\n        if ('pagemode' in params) {\n          this.eventBus.dispatch('pagemode', {\n            source: this,\n            mode: params.pagemode\n          });\n        }\n      } else { // Named (or explicit) destination.\n        if ((typeof PDFJSDev === 'undefined' || PDFJSDev.test('GENERIC')) &&\n            isPageNumber(hash) && hash <= this.pagesCount) {\n          console.warn('PDFLinkService_setHash: specifying a page number ' +\n                       'directly after the hash symbol (#) is deprecated, ' +\n                       'please use the \"#page=' + hash + '\" form instead.');\n          this.page = hash | 0;\n        }\n\n        dest = unescape(hash);\n        try {\n          dest = JSON.parse(dest);\n\n          if (!(dest instanceof Array)) {\n            // Avoid incorrectly rejecting a valid named destination, such as\n            // e.g. \"4.3\" or \"true\", because `JSON.parse` converted its type.\n            dest = dest.toString();\n          }\n        } catch (ex) {}\n\n        if (typeof dest === 'string' || isValidExplicitDestination(dest)) {\n          if (this.pdfHistory) {\n            this.pdfHistory.updateNextHashParam(dest);\n          }\n          this.navigateTo(dest);\n          return;\n        }\n        console.error('PDFLinkService_setHash: \\'' + unescape(hash) +\n                      '\\' is not a valid destination.');\n      }\n    },\n\n    /**\n     * @param {string} action\n     */\n    executeNamedAction: function PDFLinkService_executeNamedAction(action) {\n      // See PDF reference, table 8.45 - Named action\n      switch (action) {\n        case 'GoBack':\n          if (this.pdfHistory) {\n            this.pdfHistory.back();\n          }\n          break;\n\n        case 'GoForward':\n          if (this.pdfHistory) {\n            this.pdfHistory.forward();\n          }\n          break;\n\n        case 'NextPage':\n          if (this.page < this.pagesCount) {\n            this.page++;\n          }\n          break;\n\n        case 'PrevPage':\n          if (this.page > 1) {\n            this.page--;\n          }\n          break;\n\n        case 'LastPage':\n          this.page = this.pagesCount;\n          break;\n\n        case 'FirstPage':\n          this.page = 1;\n          break;\n\n        default:\n          break; // No action according to spec\n      }\n\n      this.eventBus.dispatch('namedaction', {\n        source: this,\n        action,\n      });\n    },\n\n    /**\n     * @param {number} pageNum - page number.\n     * @param {Object} pageRef - reference to the page.\n     */\n    cachePageRef: function PDFLinkService_cachePageRef(pageNum, pageRef) {\n      var refStr = pageRef.num + ' ' + pageRef.gen + ' R';\n      this._pagesRefCache[refStr] = pageNum;\n    },\n\n    _cachedPageNumber: function PDFLinkService_cachedPageNumber(pageRef) {\n      var refStr = pageRef.num + ' ' + pageRef.gen + ' R';\n      return (this._pagesRefCache && this._pagesRefCache[refStr]) || null;\n    },\n  };\n\n  function isValidExplicitDestination(dest) {\n    if (!(dest instanceof Array)) {\n      return false;\n    }\n    var destLength = dest.length, allowNull = true;\n    if (destLength < 2) {\n      return false;\n    }\n    var page = dest[0];\n    if (!(typeof page === 'object' &&\n          typeof page.num === 'number' && (page.num | 0) === page.num &&\n          typeof page.gen === 'number' && (page.gen | 0) === page.gen) &&\n        !(typeof page === 'number' && (page | 0) === page && page >= 0)) {\n      return false;\n    }\n    var zoom = dest[1];\n    if (!(typeof zoom === 'object' && typeof zoom.name === 'string')) {\n      return false;\n    }\n    switch (zoom.name) {\n      case 'XYZ':\n        if (destLength !== 5) {\n          return false;\n        }\n        break;\n      case 'Fit':\n      case 'FitB':\n        return destLength === 2;\n      case 'FitH':\n      case 'FitBH':\n      case 'FitV':\n      case 'FitBV':\n        if (destLength !== 3) {\n          return false;\n        }\n        break;\n      case 'FitR':\n        if (destLength !== 6) {\n          return false;\n        }\n        allowNull = false;\n        break;\n      default:\n        return false;\n    }\n    for (var i = 2; i < destLength; i++) {\n      var param = dest[i];\n      if (!(typeof param === 'number' || (allowNull && param === null))) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  return PDFLinkService;\n})();\n\nvar SimpleLinkService = (function SimpleLinkServiceClosure() {\n  function SimpleLinkService() {}\n\n  SimpleLinkService.prototype = {\n    /**\n     * @returns {number}\n     */\n    get page() {\n      return 0;\n    },\n    /**\n     * @param {number} value\n     */\n    set page(value) {},\n    /**\n     * @param dest - The PDF destination object.\n     */\n    navigateTo(dest) {},\n    /**\n     * @param dest - The PDF destination object.\n     * @returns {string} The hyperlink to the PDF object.\n     */\n    getDestinationHash(dest) {\n      return '#';\n    },\n    /**\n     * @param hash - The PDF parameters/hash.\n     * @returns {string} The hyperlink to the PDF object.\n     */\n    getAnchorUrl(hash) {\n      return '#';\n    },\n    /**\n     * @param {string} hash\n     */\n    setHash(hash) {},\n    /**\n     * @param {string} action\n     */\n    executeNamedAction(action) {},\n    /**\n     * @param {number} pageNum - page number.\n     * @param {Object} pageRef - reference to the page.\n     */\n    cachePageRef(pageNum, pageRef) {}\n  };\n  return SimpleLinkService;\n})();\n\nexport {\n  PDFLinkService,\n  SimpleLinkService,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/pdf_link_service.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals Stats */\n\nimport {\n  animationStarted, DEFAULT_SCALE_VALUE, getPDFFileNameFromURL, localized,\n  MAX_SCALE, MIN_SCALE, mozL10n, noContextMenuHandler, normalizeWheelEventDelta,\n  parseQueryString, ProgressBar, RendererType, UNKNOWN_SCALE\n} from './ui_utils';\nimport {\n  build, createBlob, getDocument, getFilenameFromUrl, InvalidPDFException,\n  MissingPDFException, OPS, PDFJS, shadow, UnexpectedResponseException,\n  UNSUPPORTED_FEATURES, version,\n} from './pdfjs';\nimport {\n  PDFRenderingQueue, RenderingStates\n} from './pdf_rendering_queue';\nimport { PDFSidebar, SidebarView } from './pdf_sidebar';\nimport { PDFViewer, PresentationModeState } from './pdf_viewer';\nimport { getGlobalEventBus } from './dom_events';\nimport { HandTool } from './hand_tool';\nimport { AddNoteTool } from './add_note_tool';\nimport { EditNoteTool } from './edit_note_tool';\nimport { NoteStore } from './note_store';\nimport { OverlayManager } from './overlay_manager';\nimport { PasswordPrompt } from './password_prompt';\nimport { PDFDocumentProperties } from './pdf_document_properties';\nimport { PDFFindBar } from './pdf_find_bar';\nimport { PDFFindController } from './pdf_find_controller';\nimport { PDFHistory } from './pdf_history';\nimport { PDFLinkService } from './pdf_link_service';\nimport { PDFOutlineViewer } from './pdf_outline_viewer';\nimport { PDFPresentationMode } from './pdf_presentation_mode';\nimport { PDFThumbnailViewer } from './pdf_thumbnail_viewer';\nimport { SecondaryToolbar } from './secondary_toolbar';\nimport { Toolbar } from './toolbar';\nimport { ViewHistory } from './view_history';\n\nvar DEFAULT_SCALE_DELTA = 1.1;\nvar DISABLE_AUTO_FETCH_LOADING_BAR_TIMEOUT = 5000;\n\nfunction configure(PDFJS) {\n  PDFJS.imageResourcesPath = './images/';\n  PDFJS.workerSrc = '../build/pdf.worker.js';\n  PDFJS.cMapUrl = '../web/cmaps/';\n  PDFJS.cMapPacked = true;\n}\n\nvar DefaultExternalServices = {\n  updateFindControlState(data) {},\n  initPassiveLoading(callbacks) {},\n  fallback(data, callback) {},\n  reportTelemetry(data) {},\n  createDownloadManager() {\n    throw new Error('Not implemented: createDownloadManager');\n  },\n  createPreferences() {\n    throw new Error('Not implemented: createPreferences');\n  },\n  supportsIntegratedFind: false,\n  supportsDocumentFonts: true,\n  supportsDocumentColors: true,\n  supportedMouseWheelZoomModifierKeys: {\n    ctrlKey: true,\n    metaKey: true,\n  }\n};\n\nvar PDFViewerApplication = {\n  initialBookmark: document.location.hash.substring(1),\n  initialDestination: null,\n  initialized: false,\n  fellback: false,\n  appConfig: null,\n  pdfDocument: null,\n  pdfLoadingTask: null,\n  /** @type {PDFViewer} */\n  pdfViewer: null,\n  /** @type {PDFThumbnailViewer} */\n  pdfThumbnailViewer: null,\n  /** @type {PDFRenderingQueue} */\n  pdfRenderingQueue: null,\n  /** @type {PDFPresentationMode} */\n  pdfPresentationMode: null,\n  /** @type {PDFDocumentProperties} */\n  pdfDocumentProperties: null,\n  /** @type {PDFLinkService} */\n  pdfLinkService: null,\n  /** @type {PDFHistory} */\n  pdfHistory: null,\n  /** @type {PDFSidebar} */\n  pdfSidebar: null,\n  /** @type {PDFOutlineViewer} */\n  pdfOutlineViewer: null,\n  /** @type {ViewHistory} */\n  store: null,\n  /** @type {DownloadManager} */\n  downloadManager: null,\n  /** @type {NoteStore} */\n  noteStore: null,\n  /** @type {Preferences} */\n  preferences: null,\n  /** @type {Toolbar} */\n  toolbar: null,\n  /** @type {SecondaryToolbar} */\n  secondaryToolbar: null,\n  /** @type {EventBus} */\n  eventBus: null,\n  pageRotation: 0,\n  isInitialViewSet: false,\n  viewerPrefs: {\n    sidebarViewOnLoad: SidebarView.NONE,\n    showPreviousViewOnLoad: true,\n    defaultZoomValue: '',\n    disablePageLabels: false,\n    renderer: 'canvas',\n    enhanceTextSelection: false,\n    renderInteractiveForms: false,\n  },\n  isViewerEmbedded: (window.parent !== window),\n  url: '',\n  baseUrl: '',\n  externalServices: DefaultExternalServices,\n\n  // called once when the document is loaded\n  initialize: function pdfViewInitialize(appConfig) {\n    this.preferences = this.externalServices.createPreferences();\n\n    configure(PDFJS);\n    this.appConfig = appConfig;\n\n    return this._readPreferences().then(() => {\n      return this._initializeViewerComponents();\n    }).then(() => {\n      // Bind the various event handlers *after* the viewer has been\n      // initialized, to prevent errors if an event arrives too soon.\n      this.bindEvents();\n      this.bindWindowEvents();\n\n      if (typeof PDFJSDev === 'undefined' || PDFJSDev.test('GENERIC')) {\n        // For backwards compatibility, we dispatch the 'localized' event on\n        // the `eventBus` once the viewer has been initialized.\n        localized.then(() => {\n          this.eventBus.dispatch('localized');\n        });\n      }\n\n      if (this.isViewerEmbedded && !PDFJS.isExternalLinkTargetSet()) {\n        // Prevent external links from \"replacing\" the viewer,\n        // when it's embedded in e.g. an iframe or an object.\n        PDFJS.externalLinkTarget = PDFJS.LinkTarget.TOP;\n      }\n\n      this.initialized = true;\n    });\n  },\n\n  /**\n   * @private\n   */\n  _readPreferences() {\n    var { preferences, viewerPrefs, } = this;\n\n    return Promise.all([\n      preferences.get('enableWebGL').then(function resolved(value) {\n        PDFJS.disableWebGL = !value;\n      }),\n      preferences.get('sidebarViewOnLoad').then(function resolved(value) {\n        viewerPrefs['sidebarViewOnLoad'] = value;\n      }),\n      preferences.get('showPreviousViewOnLoad').then(function resolved(value) {\n        viewerPrefs['showPreviousViewOnLoad'] = value;\n      }),\n      preferences.get('defaultZoomValue').then(function resolved(value) {\n        viewerPrefs['defaultZoomValue'] = value;\n      }),\n      preferences.get('enhanceTextSelection').then(function resolved(value) {\n        viewerPrefs['enhanceTextSelection'] = value;\n      }),\n      preferences.get('disableTextLayer').then(function resolved(value) {\n        if (PDFJS.disableTextLayer === true) {\n          return;\n        }\n        PDFJS.disableTextLayer = value;\n      }),\n      preferences.get('disableRange').then(function resolved(value) {\n        if (PDFJS.disableRange === true) {\n          return;\n        }\n        PDFJS.disableRange = value;\n      }),\n      preferences.get('disableStream').then(function resolved(value) {\n        if (PDFJS.disableStream === true) {\n          return;\n        }\n        PDFJS.disableStream = value;\n      }),\n      preferences.get('disableAutoFetch').then(function resolved(value) {\n        PDFJS.disableAutoFetch = value;\n      }),\n      preferences.get('disableFontFace').then(function resolved(value) {\n        if (PDFJS.disableFontFace === true) {\n          return;\n        }\n        PDFJS.disableFontFace = value;\n      }),\n      preferences.get('useOnlyCssZoom').then(function resolved(value) {\n        PDFJS.useOnlyCssZoom = value;\n      }),\n      preferences.get('externalLinkTarget').then(function resolved(value) {\n        if (PDFJS.isExternalLinkTargetSet()) {\n          return;\n        }\n        PDFJS.externalLinkTarget = value;\n      }),\n      preferences.get('renderer').then(function resolved(value) {\n        viewerPrefs['renderer'] = value;\n      }),\n      preferences.get('renderInteractiveForms').then(function resolved(value) {\n        viewerPrefs['renderInteractiveForms'] = value;\n      }),\n      preferences.get('disablePageLabels').then(function resolved(value) {\n        viewerPrefs['disablePageLabels'] = value;\n      }),\n    ]).catch(function (reason) { });\n  },\n\n  /**\n   * @private\n   */\n  _initializeViewerComponents() {\n    var self = this;\n    var appConfig = this.appConfig;\n\n    return new Promise((resolve, reject) => {\n      var eventBus = appConfig.eventBus || getGlobalEventBus();\n      this.eventBus = eventBus;\n\n      var pdfRenderingQueue = new PDFRenderingQueue();\n      pdfRenderingQueue.onIdle = self.cleanup.bind(self);\n      self.pdfRenderingQueue = pdfRenderingQueue;\n\n      var pdfLinkService = new PDFLinkService({\n        eventBus,\n      });\n      self.pdfLinkService = pdfLinkService;\n\n      var downloadManager = self.externalServices.createDownloadManager();\n      self.downloadManager = downloadManager;\n\n      var noteStore = new NoteStore({ eventBus, });\n      self.noteStore = noteStore;\n\n      var container = appConfig.mainContainer;\n      var viewer = appConfig.viewerContainer;\n      self.pdfViewer = new PDFViewer({\n        container,\n        viewer,\n        eventBus,\n        renderingQueue: pdfRenderingQueue,\n        linkService: pdfLinkService,\n        downloadManager,\n        noteStore,\n        renderer: self.viewerPrefs['renderer'],\n        enhanceTextSelection: self.viewerPrefs['enhanceTextSelection'],\n        renderInteractiveForms: self.viewerPrefs['renderInteractiveForms'],\n      });\n      pdfRenderingQueue.setViewer(self.pdfViewer);\n      pdfLinkService.setViewer(self.pdfViewer);\n\n      var thumbnailContainer = appConfig.sidebar.thumbnailView;\n      self.pdfThumbnailViewer = new PDFThumbnailViewer({\n        container: thumbnailContainer,\n        renderingQueue: pdfRenderingQueue,\n        linkService: pdfLinkService,\n      });\n      pdfRenderingQueue.setThumbnailViewer(self.pdfThumbnailViewer);\n\n      self.pdfHistory = new PDFHistory({\n        linkService: pdfLinkService,\n        eventBus,\n      });\n      pdfLinkService.setHistory(self.pdfHistory);\n\n      self.findController = new PDFFindController({\n        pdfViewer: self.pdfViewer,\n      });\n      self.findController.onUpdateResultsCount = function (matchCount) {\n        if (self.supportsIntegratedFind) {\n          return;\n        }\n        self.findBar.updateResultsCount(matchCount);\n      };\n      self.findController.onUpdateState = function (state, previous,\n                                                    matchCount) {\n        if (self.supportsIntegratedFind) {\n          self.externalServices.updateFindControlState(\n            {result: state, findPrevious: previous});\n        } else {\n          self.findBar.updateUIState(state, previous, matchCount);\n        }\n      };\n\n      self.pdfViewer.setFindController(self.findController);\n\n      // FIXME better PDFFindBar constructor parameters\n      var findBarConfig = Object.create(appConfig.findBar);\n      findBarConfig.findController = self.findController;\n      findBarConfig.eventBus = eventBus;\n      self.findBar = new PDFFindBar(findBarConfig);\n\n      self.overlayManager = OverlayManager;\n\n      self.handTool = new HandTool({\n        container,\n        eventBus,\n        preferences: this.preferences,\n      });\n\n      self.addNoteTool = new AddNoteTool({\n        container,\n        eventBus,\n        pdfViewer: self.pdfViewer,\n      });\n\n      self.editNoteTool = new EditNoteTool({\n        container,\n        eventBus,\n        pdfViewer: self.pdfViewer,\n      });\n\n      self.pdfDocumentProperties =\n        new PDFDocumentProperties(appConfig.documentProperties);\n\n      self.toolbar = new Toolbar(appConfig.toolbar, container, eventBus);\n\n      self.secondaryToolbar =\n        new SecondaryToolbar(appConfig.secondaryToolbar, container, eventBus);\n\n      if (self.supportsFullscreen) {\n        self.pdfPresentationMode = new PDFPresentationMode({\n          container,\n          viewer,\n          pdfViewer: self.pdfViewer,\n          eventBus,\n          contextMenuItems: appConfig.fullscreen\n        });\n      }\n\n      self.passwordPrompt = new PasswordPrompt(appConfig.passwordOverlay);\n\n      self.pdfOutlineViewer = new PDFOutlineViewer({\n        container: appConfig.sidebar.outlineView,\n        eventBus,\n        linkService: pdfLinkService,\n      });\n\n      // FIXME better PDFSidebar constructor parameters\n      var sidebarConfig = Object.create(appConfig.sidebar);\n      sidebarConfig.pdfViewer = self.pdfViewer;\n      sidebarConfig.pdfThumbnailViewer = self.pdfThumbnailViewer;\n      sidebarConfig.pdfOutlineViewer = self.pdfOutlineViewer;\n      sidebarConfig.eventBus = eventBus;\n      self.pdfSidebar = new PDFSidebar(sidebarConfig);\n      self.pdfSidebar.onToggled = self.forceRendering.bind(self);\n\n      resolve(undefined);\n    });\n  },\n\n  run: function pdfViewRun(config) {\n    this.initialize(config).then(webViewerInitialized);\n  },\n\n  zoomIn: function pdfViewZoomIn(ticks) {\n    var newScale = this.pdfViewer.currentScale;\n    do {\n      newScale = (newScale * DEFAULT_SCALE_DELTA).toFixed(2);\n      newScale = Math.ceil(newScale * 10) / 10;\n      newScale = Math.min(MAX_SCALE, newScale);\n    } while (--ticks > 0 && newScale < MAX_SCALE);\n    this.pdfViewer.currentScaleValue = newScale;\n  },\n\n  zoomOut: function pdfViewZoomOut(ticks) {\n    var newScale = this.pdfViewer.currentScale;\n    do {\n      newScale = (newScale / DEFAULT_SCALE_DELTA).toFixed(2);\n      newScale = Math.floor(newScale * 10) / 10;\n      newScale = Math.max(MIN_SCALE, newScale);\n    } while (--ticks > 0 && newScale > MIN_SCALE);\n    this.pdfViewer.currentScaleValue = newScale;\n  },\n\n  get pagesCount() {\n    return this.pdfDocument ? this.pdfDocument.numPages : 0;\n  },\n\n  set page(val) {\n    this.pdfViewer.currentPageNumber = val;\n  },\n\n  get page() {\n    return this.pdfViewer.currentPageNumber;\n  },\n\n  get supportsFullscreen() {\n    var support;\n    if (typeof PDFJSDev !== 'undefined' && PDFJSDev.test('MOZCENTRAL')) {\n      support = document.fullscreenEnabled === true ||\n                document.mozFullScreenEnabled === true;\n    } else {\n      var doc = document.documentElement;\n      support = !!(doc.requestFullscreen || doc.mozRequestFullScreen ||\n                   doc.webkitRequestFullScreen || doc.msRequestFullscreen);\n\n      if (document.fullscreenEnabled === false ||\n          document.mozFullScreenEnabled === false ||\n          document.webkitFullscreenEnabled === false ||\n          document.msFullscreenEnabled === false) {\n        support = false;\n      }\n    }\n    if (support && PDFJS.disableFullscreen === true) {\n      support = false;\n    }\n\n    return shadow(this, 'supportsFullscreen', support);\n  },\n\n  get supportsIntegratedFind() {\n    return this.externalServices.supportsIntegratedFind;\n  },\n\n  get supportsDocumentFonts() {\n    return this.externalServices.supportsDocumentFonts;\n  },\n\n  get supportsDocumentColors() {\n    return this.externalServices.supportsDocumentColors;\n  },\n\n  get loadingBar() {\n    var bar = new ProgressBar('#loadingBar', {});\n\n    return shadow(this, 'loadingBar', bar);\n  },\n\n  get supportedMouseWheelZoomModifierKeys() {\n    return this.externalServices.supportedMouseWheelZoomModifierKeys;\n  },\n\n  initPassiveLoading: function pdfViewInitPassiveLoading() {\n    throw new Error('Not implemented: initPassiveLoading');\n  },\n\n  setTitleUsingUrl: function pdfViewSetTitleUsingUrl(url) {\n    this.url = url;\n    this.baseUrl = url.split('#')[0];\n    var title = getPDFFileNameFromURL(url, '');\n    if (!title) {\n      try {\n        title = decodeURIComponent(getFilenameFromUrl(url)) || url;\n      } catch (e) {\n        // decodeURIComponent may throw URIError,\n        // fall back to using the unprocessed url in that case\n        title = url;\n      }\n    }\n    this.setTitle(title);\n  },\n\n  setTitle: function pdfViewSetTitle(title) {\n    if (this.isViewerEmbedded) {\n      // Embedded PDF viewers should not be changing their parent page's title.\n      return;\n    }\n    document.title = title;\n  },\n\n  /**\n   * Closes opened PDF document.\n   * @returns {Promise} - Returns the promise, which is resolved when all\n   *                      destruction is completed.\n   */\n  close: function pdfViewClose() {\n    var errorWrapper = this.appConfig.errorWrapper.container;\n    errorWrapper.setAttribute('hidden', 'true');\n\n    if (!this.pdfLoadingTask) {\n      return Promise.resolve();\n    }\n\n    var promise = this.pdfLoadingTask.destroy();\n    this.pdfLoadingTask = null;\n\n    if (this.pdfDocument) {\n      this.pdfDocument = null;\n\n      this.pdfThumbnailViewer.setDocument(null);\n      this.pdfViewer.setDocument(null);\n      this.pdfLinkService.setDocument(null, null);\n    }\n    this.store = null;\n    this.isInitialViewSet = false;\n\n    this.pdfSidebar.reset();\n    this.pdfOutlineViewer.reset();\n\n    this.findController.reset();\n    this.findBar.reset();\n    this.toolbar.reset();\n    this.secondaryToolbar.reset();\n\n    return promise;\n  },\n\n  /**\n   * Opens PDF document specified by URL or array with additional arguments.\n   * @param {string|TypedArray|ArrayBuffer} file - PDF location or binary data.\n   * @param {Object} args - (optional) Additional arguments for the getDocument\n   *                        call, e.g. HTTP headers ('httpHeaders') or\n   *                        alternative data transport ('range').\n   * @returns {Promise} - Returns the promise, which is resolved when document\n   *                      is opened.\n   */\n  open: function pdfViewOpen(file, args) {\n    if ((typeof PDFJSDev === 'undefined' || PDFJSDev.test('GENERIC')) &&\n        (arguments.length > 2 || typeof args === 'number')) {\n      return Promise.reject(\n        new Error('Call of open() with obsolete signature.'));\n    }\n    if (this.pdfLoadingTask) {\n      // We need to destroy already opened document.\n      return this.close().then(() => {\n        // Reload the preferences if a document was previously opened.\n        this.preferences.reload();\n        // ... and repeat the open() call.\n        return this.open(file, args);\n      });\n    }\n\n    var parameters = Object.create(null), scale;\n    if (typeof file === 'string') { // URL\n      this.setTitleUsingUrl(file);\n      parameters.url = file;\n    } else if (file && 'byteLength' in file) { // ArrayBuffer\n      parameters.data = file;\n    } else if (file.url && file.originalUrl) {\n      this.setTitleUsingUrl(file.originalUrl);\n      parameters.url = file.url;\n    }\n\n    if (args) {\n      for (var prop in args) {\n        parameters[prop] = args[prop];\n      }\n\n      if (args.scale) {\n        scale = args.scale;\n      }\n      if (args.length) {\n        this.pdfDocumentProperties.setFileSize(args.length);\n      }\n    }\n\n    var self = this;\n    self.downloadComplete = false;\n\n    var loadingTask = getDocument(parameters);\n    this.pdfLoadingTask = loadingTask;\n\n    loadingTask.onPassword = function passwordNeeded(updateCallback, reason) {\n      self.passwordPrompt.setUpdateCallback(updateCallback, reason);\n      self.passwordPrompt.open();\n    };\n\n    loadingTask.onProgress = function getDocumentProgress(progressData) {\n      self.progress(progressData.loaded / progressData.total);\n    };\n\n    // Listen for unsupported features to trigger the fallback UI.\n    loadingTask.onUnsupportedFeature = this.fallback.bind(this);\n\n    return loadingTask.promise.then(\n      function getDocumentCallback(pdfDocument) {\n        self.load(pdfDocument, scale);\n      },\n      function getDocumentError(exception) {\n        var message = exception && exception.message;\n        var loadingErrorMessage = mozL10n.get('loading_error', null,\n          'An error occurred while loading the PDF.');\n\n        if (exception instanceof InvalidPDFException) {\n          // change error message also for other builds\n          loadingErrorMessage = mozL10n.get('invalid_file_error', null,\n                                            'Invalid or corrupted PDF file.');\n        } else if (exception instanceof MissingPDFException) {\n          // special message for missing PDF's\n          loadingErrorMessage = mozL10n.get('missing_file_error', null,\n                                            'Missing PDF file.');\n        } else if (exception instanceof UnexpectedResponseException) {\n          loadingErrorMessage = mozL10n.get('unexpected_response_error', null,\n                                            'Unexpected server response.');\n        }\n\n        var moreInfo = {\n          message,\n        };\n        self.error(loadingErrorMessage, moreInfo);\n\n        throw new Error(loadingErrorMessage);\n      }\n    );\n  },\n\n  download: function pdfViewDownload() {\n    function downloadByUrl() {\n      downloadManager.downloadUrl(url, filename);\n    }\n\n    var url = this.baseUrl;\n    // Use this.url instead of this.baseUrl to perform filename detection based\n    // on the reference fragment as ultimate fallback if needed.\n    var filename = getPDFFileNameFromURL(this.url);\n    var downloadManager = this.downloadManager;\n    downloadManager.onerror = function (err) {\n      // This error won't really be helpful because it's likely the\n      // fallback won't work either (or is already open).\n      PDFViewerApplication.error('PDF failed to download.');\n    };\n\n    if (!this.pdfDocument) { // the PDF is not ready yet\n      downloadByUrl();\n      return;\n    }\n\n    if (!this.downloadComplete) { // the PDF is still downloading\n      downloadByUrl();\n      return;\n    }\n\n    this.pdfDocument.getData().then(\n      function getDataSuccess(data) {\n        var blob = createBlob(data, 'application/pdf');\n        downloadManager.download(blob, url, filename);\n      },\n      downloadByUrl // Error occurred try downloading with just the url.\n    ).then(null, downloadByUrl);\n  },\n\n  fallback: function pdfViewFallback(featureId) {},\n\n  /**\n   * Show the error box.\n   * @param {String} message A message that is human readable.\n   * @param {Object} moreInfo (optional) Further information about the error\n   *                            that is more technical.  Should have a 'message'\n   *                            and optionally a 'stack' property.\n   */\n  error: function pdfViewError(message, moreInfo) {\n    var moreInfoText = mozL10n.get('error_version_info',\n      {version: version || '?', build: build || '?'},\n      'PDF.js v{{version}} (build: {{build}})') + '\\n';\n    if (moreInfo) {\n      moreInfoText +=\n        mozL10n.get('error_message', {message: moreInfo.message},\n        'Message: {{message}}');\n      if (moreInfo.stack) {\n        moreInfoText += '\\n' +\n          mozL10n.get('error_stack', {stack: moreInfo.stack},\n          'Stack: {{stack}}');\n      } else {\n        if (moreInfo.filename) {\n          moreInfoText += '\\n' +\n            mozL10n.get('error_file', {file: moreInfo.filename},\n            'File: {{file}}');\n        }\n        if (moreInfo.lineNumber) {\n          moreInfoText += '\\n' +\n            mozL10n.get('error_line', {line: moreInfo.lineNumber},\n            'Line: {{line}}');\n        }\n      }\n    }\n\n    var errorWrapperConfig = this.appConfig.errorWrapper;\n    var errorWrapper = errorWrapperConfig.container;\n    errorWrapper.removeAttribute('hidden');\n\n    var errorMessage = errorWrapperConfig.errorMessage;\n    errorMessage.textContent = message;\n\n    var closeButton = errorWrapperConfig.closeButton;\n    closeButton.onclick = function() {\n      errorWrapper.setAttribute('hidden', 'true');\n    };\n\n    var errorMoreInfo = errorWrapperConfig.errorMoreInfo;\n    var moreInfoButton = errorWrapperConfig.moreInfoButton;\n    var lessInfoButton = errorWrapperConfig.lessInfoButton;\n    moreInfoButton.onclick = function() {\n      errorMoreInfo.removeAttribute('hidden');\n      moreInfoButton.setAttribute('hidden', 'true');\n      lessInfoButton.removeAttribute('hidden');\n      errorMoreInfo.style.height = errorMoreInfo.scrollHeight + 'px';\n    };\n    lessInfoButton.onclick = function() {\n      errorMoreInfo.setAttribute('hidden', 'true');\n      moreInfoButton.removeAttribute('hidden');\n      lessInfoButton.setAttribute('hidden', 'true');\n    };\n    moreInfoButton.oncontextmenu = noContextMenuHandler;\n    lessInfoButton.oncontextmenu = noContextMenuHandler;\n    closeButton.oncontextmenu = noContextMenuHandler;\n    moreInfoButton.removeAttribute('hidden');\n    lessInfoButton.setAttribute('hidden', 'true');\n    errorMoreInfo.value = moreInfoText;\n  },\n\n  progress: function pdfViewProgress(level) {\n    var percent = Math.round(level * 100);\n    // When we transition from full request to range requests, it's possible\n    // that we discard some of the loaded data. This can cause the loading\n    // bar to move backwards. So prevent this by only updating the bar if it\n    // increases.\n    if (percent > this.loadingBar.percent || isNaN(percent)) {\n      this.loadingBar.percent = percent;\n\n      // When disableAutoFetch is enabled, it's not uncommon for the entire file\n      // to never be fetched (depends on e.g. the file structure). In this case\n      // the loading bar will not be completely filled, nor will it be hidden.\n      // To prevent displaying a partially filled loading bar permanently, we\n      // hide it when no data has been loaded during a certain amount of time.\n      if (PDFJS.disableAutoFetch && percent) {\n        if (this.disableAutoFetchLoadingBarTimeout) {\n          clearTimeout(this.disableAutoFetchLoadingBarTimeout);\n          this.disableAutoFetchLoadingBarTimeout = null;\n        }\n        this.loadingBar.show();\n\n        this.disableAutoFetchLoadingBarTimeout = setTimeout(() => {\n          this.loadingBar.hide();\n          this.disableAutoFetchLoadingBarTimeout = null;\n        }, DISABLE_AUTO_FETCH_LOADING_BAR_TIMEOUT);\n      }\n    }\n  },\n\n  load: function pdfViewLoad(pdfDocument, scale) {\n    var self = this;\n    scale = scale || UNKNOWN_SCALE;\n\n    this.pdfDocument = pdfDocument;\n\n    this.pdfDocumentProperties.setDocumentAndUrl(pdfDocument, this.url);\n\n    var downloadedPromise = pdfDocument.getDownloadInfo().then(function() {\n      self.downloadComplete = true;\n      self.loadingBar.hide();\n    });\n\n    this.toolbar.setPagesCount(pdfDocument.numPages, false);\n    this.secondaryToolbar.setPagesCount(pdfDocument.numPages);\n\n    var id = this.documentFingerprint = pdfDocument.fingerprint;\n    var store = this.store = new ViewHistory(id);\n\n    this.pdfLinkService.setDocument(pdfDocument, null);\n\n    var pdfViewer = this.pdfViewer;\n    pdfViewer.currentScale = scale;\n    pdfViewer.setDocument(pdfDocument);\n    var firstPagePromise = pdfViewer.firstPagePromise;\n    var pagesPromise = pdfViewer.pagesPromise;\n    var onePageRendered = pdfViewer.onePageRendered;\n\n    this.pageRotation = 0;\n\n    var pdfThumbnailViewer = this.pdfThumbnailViewer;\n    pdfThumbnailViewer.setDocument(pdfDocument);\n\n    if (this.noteStore) {\n      this.noteStore.setDocumentUrl(this.url);\n    }\n\n    firstPagePromise.then((pdfPage) => {\n      downloadedPromise.then(function () {\n        self.eventBus.dispatch('documentload', {source: self});\n      });\n\n      self.loadingBar.setWidth(self.appConfig.viewerContainer);\n\n      if (!PDFJS.disableHistory && !self.isViewerEmbedded) {\n        // The browsing history is only enabled when the viewer is standalone,\n        // i.e. not when it is embedded in a web page.\n        if (!self.viewerPrefs['showPreviousViewOnLoad']) {\n          self.pdfHistory.clearHistoryState();\n        }\n        self.pdfHistory.initialize(self.documentFingerprint);\n\n        if (self.pdfHistory.initialDestination) {\n          self.initialDestination = self.pdfHistory.initialDestination;\n        } else if (self.pdfHistory.initialBookmark) {\n          self.initialBookmark = self.pdfHistory.initialBookmark;\n        }\n      }\n\n      var initialParams = {\n        destination: this.initialDestination,\n        bookmark: this.initialBookmark,\n        hash: null,\n      };\n      var storedHash = this.viewerPrefs['defaultZoomValue'] ?\n        ('zoom=' + this.viewerPrefs['defaultZoomValue']) : null;\n      var sidebarView = this.viewerPrefs['sidebarViewOnLoad'];\n\n      new Promise((resolve, reject) => {\n        if (!this.viewerPrefs['showPreviousViewOnLoad']) {\n          resolve();\n          return;\n        }\n        store.getMultiple({\n          exists: false,\n          page: '1',\n          zoom: DEFAULT_SCALE_VALUE,\n          scrollLeft: '0',\n          scrollTop: '0',\n          sidebarView: SidebarView.NONE,\n        }).then((values) => {\n          if (!values.exists) {\n            resolve();\n            return;\n          }\n          storedHash = 'page=' + values.page +\n            '&zoom=' + (this.viewerPrefs['defaultZoomValue'] || values.zoom) +\n            ',' + values.scrollLeft + ',' + values.scrollTop;\n          sidebarView = this.viewerPrefs['sidebarViewOnLoad'] ||\n                        (values.sidebarView | 0);\n          resolve();\n        }).catch(function() {\n          resolve();\n        });\n      }).then(() => {\n        this.setInitialView(storedHash, { sidebarView, scale, });\n        initialParams.hash = storedHash;\n\n        // Make all navigation keys work on document load,\n        // unless the viewer is embedded in a web page.\n        if (!this.isViewerEmbedded) {\n          this.pdfViewer.focus();\n        }\n        return pagesPromise;\n      }).then(() => {\n        // For documents with different page sizes, once all pages are resolved,\n        // ensure that the correct location becomes visible on load.\n        if (!initialParams.destination && !initialParams.bookmark &&\n            !initialParams.hash) {\n          return;\n        }\n        if (this.hasEqualPageSizes) {\n          return;\n        }\n        this.initialDestination = initialParams.destination;\n        this.initialBookmark = initialParams.bookmark;\n\n        this.pdfViewer.currentScaleValue = this.pdfViewer.currentScaleValue;\n        this.setInitialView(initialParams.hash);\n      });\n    });\n\n    pdfDocument.getPageLabels().then(function (labels) {\n      if (!labels || self.viewerPrefs['disablePageLabels']) {\n        return;\n      }\n      var i = 0, numLabels = labels.length;\n      if (numLabels !== self.pagesCount) {\n        console.error('The number of Page Labels does not match ' +\n                      'the number of pages in the document.');\n        return;\n      }\n      // Ignore page labels that correspond to standard page numbering.\n      while (i < numLabels && labels[i] === (i + 1).toString()) {\n        i++;\n      }\n      if (i === numLabels) {\n        return;\n      }\n\n      pdfViewer.setPageLabels(labels);\n      pdfThumbnailViewer.setPageLabels(labels);\n\n      // Changing toolbar page display to use labels and we need to set\n      // the label of the current page.\n      self.toolbar.setPagesCount(pdfDocument.numPages, true);\n      self.toolbar.setPageNumber(pdfViewer.currentPageNumber,\n                                 pdfViewer.currentPageLabel);\n    });\n\n    Promise.all([onePageRendered, animationStarted]).then(function() {\n      pdfDocument.getOutline().then(function(outline) {\n        self.pdfOutlineViewer.render({ outline, });\n      });\n    });\n\n    pdfDocument.getMetadata().then(function(data) {\n      var info = data.info, metadata = data.metadata;\n      self.documentInfo = info;\n      self.metadata = metadata;\n\n      // Provides some basic debug information\n      console.log('PDF ' + pdfDocument.fingerprint + ' [' +\n                  info.PDFFormatVersion + ' ' + (info.Producer || '-').trim() +\n                  ' / ' + (info.Creator || '-').trim() + ']' +\n                  ' (PDF.js: ' + (version || '-') +\n                  (!PDFJS.disableWebGL ? ' [WebGL]' : '') + ')');\n\n      var pdfTitle;\n      if (metadata && metadata.has('dc:title')) {\n        var title = metadata.get('dc:title');\n        // Ghostscript sometimes return 'Untitled', sets the title to 'Untitled'\n        if (title !== 'Untitled') {\n          pdfTitle = title;\n        }\n      }\n\n      if (!pdfTitle && info && info['Title']) {\n        pdfTitle = info['Title'];\n      }\n\n      if (pdfTitle) {\n        self.setTitle(pdfTitle + ' - ' + document.title);\n      }\n\n      if (info.IsAcroFormPresent) {\n        console.warn('Warning: AcroForm/XFA is not supported');\n        self.fallback(UNSUPPORTED_FEATURES.forms);\n      }\n    });\n  },\n\n  setInitialView(storedHash, options = {}) {\n    var { scale = 0, sidebarView = SidebarView.NONE, } = options;\n\n    this.isInitialViewSet = true;\n    this.pdfSidebar.setInitialView(sidebarView);\n\n    if (this.initialDestination) {\n      this.pdfLinkService.navigateTo(this.initialDestination);\n      this.initialDestination = null;\n    } else if (this.initialBookmark) {\n      this.pdfLinkService.setHash(this.initialBookmark);\n      this.pdfHistory.push({ hash: this.initialBookmark }, true);\n      this.initialBookmark = null;\n    } else if (storedHash) {\n      this.pdfLinkService.setHash(storedHash);\n    } else if (scale) {\n      this.pdfViewer.currentScaleValue = scale;\n      this.page = 1;\n    }\n\n    // Ensure that the correct page number is displayed in the UI,\n    // even if the active page didn't change during document load.\n    this.toolbar.setPageNumber(this.pdfViewer.currentPageNumber,\n                               this.pdfViewer.currentPageLabel);\n    this.secondaryToolbar.setPageNumber(this.pdfViewer.currentPageNumber);\n\n    if (!this.pdfViewer.currentScaleValue) {\n      // Scale was not initialized: invalid bookmark or scale was not specified.\n      // Setting the default one.\n      this.pdfViewer.currentScaleValue = DEFAULT_SCALE_VALUE;\n    }\n  },\n\n  cleanup: function pdfViewCleanup() {\n    if (!this.pdfDocument) {\n      return; // run cleanup when document is loaded\n    }\n    this.pdfViewer.cleanup();\n    this.pdfThumbnailViewer.cleanup();\n\n    // We don't want to remove fonts used by active page SVGs.\n    if (this.pdfViewer.renderer !== RendererType.SVG) {\n      this.pdfDocument.cleanup();\n    }\n  },\n\n  forceRendering: function pdfViewForceRendering() {\n    this.pdfRenderingQueue.isThumbnailViewEnabled =\n      this.pdfSidebar.isThumbnailViewVisible;\n    this.pdfRenderingQueue.renderHighestPriority();\n  },\n\n  // Whether all pages of the PDF have the same width and height.\n  get hasEqualPageSizes() {\n    var firstPage = this.pdfViewer.getPageView(0);\n    for (var i = 1, ii = this.pagesCount; i < ii; ++i) {\n      var pageView = this.pdfViewer.getPageView(i);\n      if (pageView.width !== firstPage.width ||\n          pageView.height !== firstPage.height) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n  rotatePages: function pdfViewRotatePages(delta) {\n    var pageNumber = this.page;\n    this.pageRotation = (this.pageRotation + 360 + delta) % 360;\n    this.pdfViewer.pagesRotation = this.pageRotation;\n    this.pdfThumbnailViewer.pagesRotation = this.pageRotation;\n\n    this.forceRendering();\n\n    this.pdfViewer.currentPageNumber = pageNumber;\n  },\n\n  requestPresentationMode: function pdfViewRequestPresentationMode() {\n    if (!this.pdfPresentationMode) {\n      return;\n    }\n    this.pdfPresentationMode.request();\n  },\n\n  bindEvents: function pdfViewBindEvents() {\n    var eventBus = this.eventBus;\n\n    eventBus.on('resize', webViewerResize);\n    eventBus.on('hashchange', webViewerHashchange);\n    eventBus.on('pagerendered', webViewerPageRendered);\n    eventBus.on('textlayerrendered', webViewerTextLayerRendered);\n    eventBus.on('updateviewarea', webViewerUpdateViewarea);\n    eventBus.on('pagechanging', webViewerPageChanging);\n    eventBus.on('scalechanging', webViewerScaleChanging);\n    eventBus.on('sidebarviewchanged', webViewerSidebarViewChanged);\n    eventBus.on('pagemode', webViewerPageMode);\n    eventBus.on('namedaction', webViewerNamedAction);\n    eventBus.on('presentationmodechanged', webViewerPresentationModeChanged);\n    eventBus.on('presentationmode', webViewerPresentationMode);\n    eventBus.on('download', webViewerDownload);\n    eventBus.on('firstpage', webViewerFirstPage);\n    eventBus.on('lastpage', webViewerLastPage);\n    eventBus.on('nextpage', webViewerNextPage);\n    eventBus.on('previouspage', webViewerPreviousPage);\n    eventBus.on('zoomin', webViewerZoomIn);\n    eventBus.on('zoomout', webViewerZoomOut);\n    eventBus.on('pagenumberchanged', webViewerPageNumberChanged);\n    eventBus.on('scalechanged', webViewerScaleChanged);\n    eventBus.on('rotatecw', webViewerRotateCw);\n    eventBus.on('rotateccw', webViewerRotateCcw);\n    eventBus.on('documentproperties', webViewerDocumentProperties);\n    eventBus.on('find', webViewerFind);\n    eventBus.on('findfromurlhash', webViewerFindFromUrlHash);\n    eventBus.on('noteschanged', webViewerNotesChanged);\n    if (typeof PDFJSDev === 'undefined' || PDFJSDev.test('GENERIC')) {\n      eventBus.on('fileinputchange', webViewerFileInputChange);\n    }\n  },\n\n  bindWindowEvents: function pdfViewBindWindowEvents() {\n    var eventBus = this.eventBus;\n\n    window.addEventListener('wheel', webViewerWheel);\n    window.addEventListener('click', webViewerClick);\n    window.addEventListener('keydown', webViewerKeyDown);\n\n    window.addEventListener('resize', function windowResize() {\n      eventBus.dispatch('resize');\n    });\n    window.addEventListener('hashchange', function windowHashChange() {\n      eventBus.dispatch('hashchange', {\n        hash: document.location.hash.substring(1),\n      });\n    });\n    if (typeof PDFJSDev === 'undefined' || PDFJSDev.test('GENERIC')) {\n      window.addEventListener('change', function windowChange(evt) {\n        var files = evt.target.files;\n        if (!files || files.length === 0) {\n          return;\n        }\n        eventBus.dispatch('fileinputchange', {\n          fileInput: evt.target,\n        });\n      });\n    }\n  },\n};\n\nvar validateFileURL;\nif (typeof PDFJSDev === 'undefined' || PDFJSDev.test('GENERIC')) {\n  var HOSTED_VIEWER_ORIGINS = ['null',\n    'http://mozilla.github.io', 'https://mozilla.github.io'];\n  validateFileURL = function validateFileURL(file) {\n    try {\n      var viewerOrigin = new URL(window.location.href).origin || 'null';\n      if (HOSTED_VIEWER_ORIGINS.indexOf(viewerOrigin) >= 0) {\n        // Hosted or local viewer, allow for any file locations\n        return;\n      }\n      var fileOrigin = new URL(file, window.location.href).origin;\n      // Removing of the following line will not guarantee that the viewer will\n      // start accepting URLs from foreign origin -- CORS headers on the remote\n      // server must be properly configured.\n      if (fileOrigin !== viewerOrigin) {\n        throw new Error('file origin does not match viewer\\'s');\n      }\n    } catch (e) {\n      var message = e && e.message;\n      var loadingErrorMessage = mozL10n.get('loading_error', null,\n        'An error occurred while loading the PDF.');\n\n      var moreInfo = {\n        message,\n      };\n      PDFViewerApplication.error(loadingErrorMessage, moreInfo);\n      throw e;\n    }\n  };\n}\n\nfunction webViewerInitialized() {\n  var appConfig = PDFViewerApplication.appConfig;\n  var queryString = document.location.search.substring(1);\n  var params = parseQueryString(queryString);\n  var file = 'file' in params ? params.file : appConfig.defaultUrl;\n  validateFileURL(file);\n\n  var waitForBeforeOpening = [];\n\n  mozL10n.setLanguage(PDFJS.locale);\n\n  if (!PDFViewerApplication.supportsFullscreen) {\n    appConfig.toolbar.presentationModeButton.classList.add('hidden');\n  }\n\n  if (PDFViewerApplication.supportsIntegratedFind) {\n    appConfig.toolbar.viewFind.classList.add('hidden');\n  }\n\n  appConfig.sidebar.mainContainer.addEventListener('transitionend',\n    function(e) {\n      if (e.target === /* mainContainer */ this) {\n        PDFViewerApplication.eventBus.dispatch('resize');\n      }\n    }, true);\n\n  appConfig.sidebar.toggleButton.addEventListener('click', function() {\n    PDFViewerApplication.pdfSidebar.toggle();\n  });\n\n  Promise.all(waitForBeforeOpening).then(function () {\n    webViewerOpenFileViaURL(file);\n  }).catch(function (reason) {\n    PDFViewerApplication.error(mozL10n.get('loading_error', null,\n      'An error occurred while opening.'), reason);\n  });\n}\n\nvar webViewerOpenFileViaURL = function webViewerOpenFileViaURL(file) {\n  if (file && file.lastIndexOf('file:', 0) === 0) {\n    // file:-scheme. Load the contents in the main thread because QtWebKit\n    // cannot load file:-URLs in a Web Worker. file:-URLs are usually loaded\n    // very quickly, so there is no need to set up progress event listeners.\n    PDFViewerApplication.setTitleUsingUrl(file);\n    var xhr = new XMLHttpRequest();\n    xhr.onload = function() {\n      PDFViewerApplication.open(new Uint8Array(xhr.response));\n    };\n    try {\n      xhr.open('GET', file);\n      xhr.responseType = 'arraybuffer';\n      xhr.send();\n    } catch (e) {\n      PDFViewerApplication.error(mozL10n.get('loading_error', null,\n        'An error occurred while loading the PDF.'), e);\n    }\n    return;\n  }\n\n  if (file) {\n    PDFViewerApplication.open(file);\n  }\n};\n\nfunction webViewerPageRendered(e) {\n  var pageNumber = e.pageNumber;\n  var pageIndex = pageNumber - 1;\n  var pageView = PDFViewerApplication.pdfViewer.getPageView(pageIndex);\n\n  // If the page is still visible when it has finished rendering,\n  // ensure that the page number input loading indicator is hidden.\n  if (pageNumber === PDFViewerApplication.page) {\n    PDFViewerApplication.toolbar.updateLoadingIndicatorState(false);\n  }\n\n  // Prevent errors in the edge-case where the PDF document is removed *before*\n  // the 'pagerendered' event handler is invoked.\n  if (!pageView) {\n    return;\n  }\n\n  // Use the rendered page to set the corresponding thumbnail image.\n  if (PDFViewerApplication.pdfSidebar.isThumbnailViewVisible) {\n    var thumbnailView = PDFViewerApplication.pdfThumbnailViewer.\n                        getThumbnail(pageIndex);\n    thumbnailView.setImage(pageView);\n  }\n\n  if (pageView.error) {\n    PDFViewerApplication.error(mozL10n.get('rendering_error', null,\n      'An error occurred while rendering the page.'), pageView.error);\n  }\n}\n\nfunction webViewerTextLayerRendered(e) {\n}\n\nfunction webViewerPageMode(e) {\n  // Handle the 'pagemode' hash parameter, see also `PDFLinkService_setHash`.\n  var mode = e.mode, view;\n  switch (mode) {\n    case 'thumbs':\n      view = SidebarView.THUMBS;\n      break;\n    case 'outline':\n      view = SidebarView.OUTLINE;\n      break;\n    case 'none':\n      view = SidebarView.NONE;\n      break;\n    default:\n      console.error('Invalid \"pagemode\" hash parameter: ' + mode);\n      return;\n  }\n  PDFViewerApplication.pdfSidebar.switchView(view, /* forceOpen = */ true);\n}\n\nfunction webViewerNamedAction(e) {\n  // Processing couple of named actions that might be useful.\n  // See also PDFLinkService.executeNamedAction\n  var action = e.action;\n  switch (action) {\n    case 'GoToPage':\n      PDFViewerApplication.appConfig.toolbar.pageNumber.select();\n      break;\n\n    case 'Find':\n      if (!PDFViewerApplication.supportsIntegratedFind) {\n        PDFViewerApplication.findBar.toggle();\n      }\n      break;\n  }\n}\n\nfunction webViewerPresentationModeChanged(e) {\n  var active = e.active;\n  var switchInProgress = e.switchInProgress;\n  PDFViewerApplication.pdfViewer.presentationModeState =\n    switchInProgress ? PresentationModeState.CHANGING :\n    active ? PresentationModeState.FULLSCREEN : PresentationModeState.NORMAL;\n}\n\nfunction webViewerSidebarViewChanged(evt) {\n  PDFViewerApplication.pdfRenderingQueue.isThumbnailViewEnabled =\n    PDFViewerApplication.pdfSidebar.isThumbnailViewVisible;\n\n  var store = PDFViewerApplication.store;\n  if (store && PDFViewerApplication.isInitialViewSet) {\n    // Only update the storage when the document has been loaded *and* rendered.\n    store.set('sidebarView', evt.view).catch(function() { });\n  }\n}\n\nfunction webViewerUpdateViewarea(evt) {\n  var location = evt.location, store = PDFViewerApplication.store;\n\n  if (store && PDFViewerApplication.isInitialViewSet) {\n    store.setMultiple({\n      'exists': true,\n      'page': location.pageNumber,\n      'zoom': location.scale,\n      'scrollLeft': location.left,\n      'scrollTop': location.top,\n    }).catch(function() { /* unable to write to storage */ });\n  }\n\n  // Update the current bookmark in the browsing history.\n  PDFViewerApplication.pdfHistory.updateCurrentBookmark(location.pdfOpenParams,\n                                                        location.pageNumber);\n\n  // Show/hide the loading indicator in the page number input element.\n  var currentPage =\n    PDFViewerApplication.pdfViewer.getPageView(PDFViewerApplication.page - 1);\n  var loading = currentPage.renderingState !== RenderingStates.FINISHED;\n  PDFViewerApplication.toolbar.updateLoadingIndicatorState(loading);\n}\n\nfunction webViewerResize() {\n  var currentScaleValue = PDFViewerApplication.pdfViewer.currentScaleValue;\n  if (currentScaleValue === 'auto' ||\n      currentScaleValue === 'page-fit' ||\n      currentScaleValue === 'page-width') {\n    // Note: the scale is constant for 'page-actual'.\n    PDFViewerApplication.pdfViewer.currentScaleValue = currentScaleValue;\n  } else if (!currentScaleValue) {\n    // Normally this shouldn't happen, but if the scale wasn't initialized\n    // we set it to the default value in order to prevent any issues.\n    // (E.g. the document being rendered with the wrong scale on load.)\n    PDFViewerApplication.pdfViewer.currentScaleValue = DEFAULT_SCALE_VALUE;\n  }\n  PDFViewerApplication.pdfViewer.update();\n}\n\nfunction webViewerHashchange(e) {\n  if (PDFViewerApplication.pdfHistory.isHashChangeUnlocked) {\n    var hash = e.hash;\n    if (!hash) {\n      return;\n    }\n    if (!PDFViewerApplication.isInitialViewSet) {\n      PDFViewerApplication.initialBookmark = hash;\n    } else {\n      PDFViewerApplication.pdfLinkService.setHash(hash);\n    }\n  }\n}\n\nvar webViewerFileInputChange;\nif (typeof PDFJSDev === 'undefined' || PDFJSDev.test('GENERIC')) {\n  webViewerFileInputChange = function webViewerFileInputChange(e) {\n    var file = e.fileInput.files[0];\n\n    if (!PDFJS.disableCreateObjectURL &&\n        typeof URL !== 'undefined' && URL.createObjectURL) {\n      PDFViewerApplication.open(URL.createObjectURL(file));\n    } else {\n      // Read the local file into a Uint8Array.\n      var fileReader = new FileReader();\n      fileReader.onload = function webViewerChangeFileReaderOnload(evt) {\n        var buffer = evt.target.result;\n        var uint8Array = new Uint8Array(buffer);\n        PDFViewerApplication.open(uint8Array);\n      };\n      fileReader.readAsArrayBuffer(file);\n    }\n\n    PDFViewerApplication.setTitleUsingUrl(file.name);\n\n    // URL does not reflect proper document location - hiding some icons.\n    var appConfig = PDFViewerApplication.appConfig;\n    appConfig.secondaryToolbar.downloadButton.setAttribute('hidden', 'true');\n  };\n}\n\nfunction webViewerPresentationMode() {\n  PDFViewerApplication.requestPresentationMode();\n}\nfunction webViewerDownload() {\n  PDFViewerApplication.download();\n}\nfunction webViewerFirstPage() {\n  if (PDFViewerApplication.pdfDocument) {\n    PDFViewerApplication.page = 1;\n  }\n}\nfunction webViewerLastPage() {\n  if (PDFViewerApplication.pdfDocument) {\n    PDFViewerApplication.page = PDFViewerApplication.pagesCount;\n  }\n}\nfunction webViewerNextPage() {\n  PDFViewerApplication.page++;\n}\nfunction webViewerPreviousPage() {\n  PDFViewerApplication.page--;\n}\nfunction webViewerZoomIn() {\n  PDFViewerApplication.zoomIn();\n}\nfunction webViewerZoomOut() {\n  PDFViewerApplication.zoomOut();\n}\nfunction webViewerPageNumberChanged(e) {\n  var pdfViewer = PDFViewerApplication.pdfViewer;\n  pdfViewer.currentPageLabel = e.value;\n\n  // Ensure that the page number input displays the correct value, even if the\n  // value entered by the user was invalid (e.g. a floating point number).\n  if (e.value !== pdfViewer.currentPageNumber.toString() &&\n      e.value !== pdfViewer.currentPageLabel) {\n    PDFViewerApplication.toolbar.setPageNumber(\n      pdfViewer.currentPageNumber, pdfViewer.currentPageLabel);\n  }\n}\nfunction webViewerScaleChanged(e) {\n  PDFViewerApplication.pdfViewer.currentScaleValue = e.value;\n}\nfunction webViewerRotateCw() {\n  PDFViewerApplication.rotatePages(90);\n}\nfunction webViewerRotateCcw() {\n  PDFViewerApplication.rotatePages(-90);\n}\nfunction webViewerDocumentProperties() {\n  PDFViewerApplication.pdfDocumentProperties.open();\n}\n\nfunction webViewerFind(e) {\n  PDFViewerApplication.findController.executeCommand('find' + e.type, {\n    query: e.query,\n    phraseSearch: e.phraseSearch,\n    caseSensitive: e.caseSensitive,\n    highlightAll: e.highlightAll,\n    findPrevious: e.findPrevious\n  });\n}\n\nfunction webViewerFindFromUrlHash(e) {\n  PDFViewerApplication.findController.executeCommand('find', {\n    query: e.query,\n    phraseSearch: e.phraseSearch,\n    caseSensitive: false,\n    highlightAll: true,\n    findPrevious: false\n  });\n}\n\nfunction webViewerNotesChanged(e) {\n  PDFViewerApplication.pdfViewer.updateNotes();\n}\n\nfunction webViewerScaleChanging(e) {\n  PDFViewerApplication.toolbar.setPageScale(e.presetValue, e.scale);\n\n  PDFViewerApplication.pdfViewer.update();\n}\n\nfunction webViewerPageChanging(e) {\n  var page = e.pageNumber;\n\n  PDFViewerApplication.toolbar.setPageNumber(page, e.pageLabel || null);\n  PDFViewerApplication.secondaryToolbar.setPageNumber(page);\n\n  if (PDFViewerApplication.pdfSidebar.isThumbnailViewVisible) {\n    PDFViewerApplication.pdfThumbnailViewer.scrollThumbnailIntoView(page);\n  }\n}\n\nvar zoomDisabled = false, zoomDisabledTimeout;\nfunction webViewerWheel(evt) {\n  var pdfViewer = PDFViewerApplication.pdfViewer;\n  if (pdfViewer.isInPresentationMode) {\n    return;\n  }\n\n  if (evt.ctrlKey || evt.metaKey) {\n    var support = PDFViewerApplication.supportedMouseWheelZoomModifierKeys;\n    if ((evt.ctrlKey && !support.ctrlKey) ||\n        (evt.metaKey && !support.metaKey)) {\n      return;\n    }\n    // Only zoom the pages, not the entire viewer.\n    evt.preventDefault();\n    // NOTE: this check must be placed *after* preventDefault.\n    if (zoomDisabled) {\n      return;\n    }\n\n    var previousScale = pdfViewer.currentScale;\n\n    var delta = normalizeWheelEventDelta(evt);\n\n    var MOUSE_WHEEL_DELTA_PER_PAGE_SCALE = 3.0;\n    var ticks = delta * MOUSE_WHEEL_DELTA_PER_PAGE_SCALE;\n    if (ticks < 0) {\n      PDFViewerApplication.zoomOut(-ticks);\n    } else {\n      PDFViewerApplication.zoomIn(ticks);\n    }\n\n    var currentScale = pdfViewer.currentScale;\n    if (previousScale !== currentScale) {\n      // After scaling the page via zoomIn/zoomOut, the position of the upper-\n      // left corner is restored. When the mouse wheel is used, the position\n      // under the cursor should be restored instead.\n      var scaleCorrectionFactor = currentScale / previousScale - 1;\n      var rect = pdfViewer.container.getBoundingClientRect();\n      var dx = evt.clientX - rect.left;\n      var dy = evt.clientY - rect.top;\n      pdfViewer.container.scrollLeft += dx * scaleCorrectionFactor;\n      pdfViewer.container.scrollTop += dy * scaleCorrectionFactor;\n    }\n  } else {\n    zoomDisabled = true;\n    clearTimeout(zoomDisabledTimeout);\n    zoomDisabledTimeout = setTimeout(function () {\n      zoomDisabled = false;\n    }, 1000);\n  }\n}\n\nfunction webViewerClick(evt) {\n  if (!PDFViewerApplication.secondaryToolbar.isOpen) {\n    return;\n  }\n  var appConfig = PDFViewerApplication.appConfig;\n  if (PDFViewerApplication.pdfViewer.containsElement(evt.target) ||\n      (appConfig.toolbar.container.contains(evt.target) &&\n       evt.target !== appConfig.secondaryToolbar.toggleButton)) {\n    PDFViewerApplication.secondaryToolbar.close();\n  }\n}\n\nfunction webViewerKeyDown(evt) {\n  if (OverlayManager.active) {\n    return;\n  }\n\n  var handled = false, ensureViewerFocused = false;\n  var cmd = (evt.ctrlKey ? 1 : 0) |\n            (evt.altKey ? 2 : 0) |\n            (evt.shiftKey ? 4 : 0) |\n            (evt.metaKey ? 8 : 0);\n\n  var pdfViewer = PDFViewerApplication.pdfViewer;\n  var isViewerInPresentationMode = pdfViewer && pdfViewer.isInPresentationMode;\n\n  // First, handle the key bindings that are independent whether an input\n  // control is selected or not.\n  if (cmd === 1 || cmd === 8 || cmd === 5 || cmd === 12) {\n    // either CTRL or META key with optional SHIFT.\n    switch (evt.keyCode) {\n      case 70: // f\n        if (!PDFViewerApplication.supportsIntegratedFind) {\n          PDFViewerApplication.findBar.open();\n          handled = true;\n        }\n        break;\n      case 71: // g\n        if (!PDFViewerApplication.supportsIntegratedFind) {\n          var findState = PDFViewerApplication.findController.state;\n          if (findState) {\n            PDFViewerApplication.findController.executeCommand('findagain', {\n              query: findState.query,\n              phraseSearch: findState.phraseSearch,\n              caseSensitive: findState.caseSensitive,\n              highlightAll: findState.highlightAll,\n              findPrevious: cmd === 5 || cmd === 12\n            });\n          }\n          handled = true;\n        }\n        break;\n      case 61: // FF/Mac '='\n      case 107: // FF '+' and '='\n      case 187: // Chrome '+'\n      case 171: // FF with German keyboard\n        if (!isViewerInPresentationMode) {\n          PDFViewerApplication.zoomIn();\n        }\n        handled = true;\n        break;\n      case 173: // FF/Mac '-'\n      case 109: // FF '-'\n      case 189: // Chrome '-'\n        if (!isViewerInPresentationMode) {\n          PDFViewerApplication.zoomOut();\n        }\n        handled = true;\n        break;\n      case 48: // '0'\n      case 96: // '0' on Numpad of Swedish keyboard\n        if (!isViewerInPresentationMode) {\n          // keeping it unhandled (to restore page zoom to 100%)\n          setTimeout(function () {\n            // ... and resetting the scale after browser adjusts its scale\n            pdfViewer.currentScaleValue = DEFAULT_SCALE_VALUE;\n          });\n          handled = false;\n        }\n        break;\n\n      case 38: // up arrow\n        if (isViewerInPresentationMode || PDFViewerApplication.page > 1) {\n          PDFViewerApplication.page = 1;\n          handled = true;\n          ensureViewerFocused = true;\n        }\n        break;\n      case 40: // down arrow\n        if (isViewerInPresentationMode ||\n            PDFViewerApplication.page < PDFViewerApplication.pagesCount) {\n          PDFViewerApplication.page = PDFViewerApplication.pagesCount;\n          handled = true;\n          ensureViewerFocused = true;\n        }\n        break;\n    }\n  }\n\n  // CTRL or META without shift\n  if (cmd === 1 || cmd === 8) {\n    switch (evt.keyCode) {\n      case 83: // s\n        PDFViewerApplication.download();\n        handled = true;\n        break;\n    }\n  }\n\n  // CTRL+ALT or Option+Command\n  if (cmd === 3 || cmd === 10) {\n    switch (evt.keyCode) {\n      case 80: // p\n        PDFViewerApplication.requestPresentationMode();\n        handled = true;\n        break;\n      case 71: // g\n        // focuses input#pageNumber field\n        PDFViewerApplication.appConfig.toolbar.pageNumber.select();\n        handled = true;\n        break;\n    }\n  }\n\n  if (handled) {\n    if (ensureViewerFocused && !isViewerInPresentationMode) {\n      pdfViewer.focus();\n    }\n    evt.preventDefault();\n    return;\n  }\n\n  // Some shortcuts should not get handled if a control/input element\n  // is selected.\n  var curElement = document.activeElement || document.querySelector(':focus');\n  var curElementTagName = curElement && curElement.tagName.toUpperCase();\n  if (curElementTagName === 'INPUT' ||\n      curElementTagName === 'TEXTAREA' ||\n      curElementTagName === 'SELECT') {\n    // Make sure that the secondary toolbar is closed when Escape is pressed.\n    if (evt.keyCode !== 27) { // 'Esc'\n      return;\n    }\n  }\n\n  if (cmd === 0) { // no control key pressed at all.\n    switch (evt.keyCode) {\n      case 38: // up arrow\n      case 33: // pg up\n      case 8: // backspace\n        if (!isViewerInPresentationMode &&\n            pdfViewer.currentScaleValue !== 'page-fit') {\n          break;\n        }\n        /* in presentation mode */\n        /* falls through */\n      case 37: // left arrow\n        // horizontal scrolling using arrow keys\n        if (pdfViewer.isHorizontalScrollbarEnabled) {\n          break;\n        }\n        /* falls through */\n      case 75: // 'k'\n      case 80: // 'p'\n        if (PDFViewerApplication.page > 1) {\n          PDFViewerApplication.page--;\n        }\n        handled = true;\n        break;\n      case 27: // esc key\n        if (PDFViewerApplication.secondaryToolbar.isOpen) {\n          PDFViewerApplication.secondaryToolbar.close();\n          handled = true;\n        }\n        if (!PDFViewerApplication.supportsIntegratedFind &&\n            PDFViewerApplication.findBar.opened) {\n          PDFViewerApplication.findBar.close();\n          handled = true;\n        }\n        break;\n      case 40: // down arrow\n      case 34: // pg down\n      case 32: // spacebar\n        if (!isViewerInPresentationMode &&\n            pdfViewer.currentScaleValue !== 'page-fit') {\n          break;\n        }\n        /* falls through */\n      case 39: // right arrow\n        // horizontal scrolling using arrow keys\n        if (pdfViewer.isHorizontalScrollbarEnabled) {\n          break;\n        }\n        /* falls through */\n      case 74: // 'j'\n      case 78: // 'n'\n        if (PDFViewerApplication.page < PDFViewerApplication.pagesCount) {\n          PDFViewerApplication.page++;\n        }\n        handled = true;\n        break;\n\n      case 36: // home\n        if (isViewerInPresentationMode || PDFViewerApplication.page > 1) {\n          PDFViewerApplication.page = 1;\n          handled = true;\n          ensureViewerFocused = true;\n        }\n        break;\n      case 35: // end\n        if (isViewerInPresentationMode ||\n            PDFViewerApplication.page < PDFViewerApplication.pagesCount) {\n          PDFViewerApplication.page = PDFViewerApplication.pagesCount;\n          handled = true;\n          ensureViewerFocused = true;\n        }\n        break;\n\n      case 72: // 'h'\n        if (!isViewerInPresentationMode) {\n          PDFViewerApplication.handTool.toggle();\n        }\n        break;\n      case 82: // 'r'\n        PDFViewerApplication.rotatePages(90);\n        break;\n    }\n  }\n\n  if (cmd === 4) { // shift-key\n    switch (evt.keyCode) {\n      case 32: // spacebar\n        if (!isViewerInPresentationMode &&\n            pdfViewer.currentScaleValue !== 'page-fit') {\n          break;\n        }\n        if (PDFViewerApplication.page > 1) {\n          PDFViewerApplication.page--;\n        }\n        handled = true;\n        break;\n\n      case 82: // 'r'\n        PDFViewerApplication.rotatePages(-90);\n        break;\n    }\n  }\n\n  if (!handled && !isViewerInPresentationMode) {\n    // 33=Page Up  34=Page Down  35=End    36=Home\n    // 37=Left     38=Up         39=Right  40=Down\n    // 32=Spacebar\n    if ((evt.keyCode >= 33 && evt.keyCode <= 40) ||\n        (evt.keyCode === 32 && curElementTagName !== 'BUTTON')) {\n      ensureViewerFocused = true;\n    }\n  }\n\n  if (cmd === 2) { // alt-key\n    switch (evt.keyCode) {\n      case 37: // left arrow\n        if (isViewerInPresentationMode) {\n          PDFViewerApplication.pdfHistory.back();\n          handled = true;\n        }\n        break;\n      case 39: // right arrow\n        if (isViewerInPresentationMode) {\n          PDFViewerApplication.pdfHistory.forward();\n          handled = true;\n        }\n        break;\n    }\n  }\n\n  if (ensureViewerFocused && !pdfViewer.containsElement(curElement)) {\n    // The page container is not focused, but a page navigation key has been\n    // pressed. Change the focus to the viewer container to make sure that\n    // navigation by keyboard works as expected.\n    pdfViewer.focus();\n  }\n\n  if (handled) {\n    evt.preventDefault();\n  }\n}\n\nlocalized.then(function webViewerLocalized() {\n  document.getElementsByTagName('html')[0].dir = mozL10n.getDirection();\n});\n\nexport {\n  PDFViewerApplication,\n  DefaultExternalServices,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/app.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// node_modules/webpack/buildin/global.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals global, process, __pdfjsdev_webpack__ */\n\nimport './compatibility';\n\nvar globalScope = (typeof window !== 'undefined') ? window :\n                  (typeof global !== 'undefined') ? global :\n                  (typeof self !== 'undefined') ? self : this;\n\nvar FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\n\nvar TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n};\n\nvar ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n};\n\nvar AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26\n};\n\nvar AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200\n};\n\nvar AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000,\n};\n\nvar AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5\n};\n\nvar StreamType = {\n  UNKNOWN: 0,\n  FLATE: 1,\n  LZW: 2,\n  DCT: 3,\n  JPX: 4,\n  JBIG: 5,\n  A85: 6,\n  AHX: 7,\n  CCF: 8,\n  RL: 9\n};\n\nvar FontType = {\n  UNKNOWN: 0,\n  TYPE1: 1,\n  TYPE1C: 2,\n  CIDFONTTYPE0: 3,\n  CIDFONTTYPE0C: 4,\n  TRUETYPE: 5,\n  CIDFONTTYPE2: 6,\n  TYPE3: 7,\n  OPENTYPE: 8,\n  TYPE0: 9,\n  MMTYPE1: 10\n};\n\nvar VERBOSITY_LEVELS = {\n  errors: 0,\n  warnings: 1,\n  infos: 5\n};\n\nvar CMapCompressionType = {\n  NONE: 0,\n  BINARY: 1,\n  STREAM: 2,\n};\n\n// All the possible operations for an operator list.\nvar OPS = {\n  // Intentionally start from 1 so it is easy to spot bad operators that will be\n  // 0's.\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotations: 78,\n  endAnnotations: 79,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintJpegXObject: 82,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91\n};\n\nvar verbosity = VERBOSITY_LEVELS.warnings;\n\nfunction setVerbosityLevel(level) {\n  verbosity = level;\n}\n\nfunction getVerbosityLevel() {\n  return verbosity;\n}\n\n// A notice for devs. These are good for things that are helpful to devs, such\n// as warning that Workers were disabled, which is important to devs but not\n// end users.\nfunction info(msg) {\n  if (verbosity >= VERBOSITY_LEVELS.infos) {\n    console.log('Info: ' + msg);\n  }\n}\n\n// Non-fatal warnings.\nfunction warn(msg) {\n  if (verbosity >= VERBOSITY_LEVELS.warnings) {\n    console.log('Warning: ' + msg);\n  }\n}\n\n// Deprecated API function -- display regardless of the PDFJS.verbosity setting.\nfunction deprecated(details) {\n  console.log('Deprecated API usage: ' + details);\n}\n\n// Fatal errors that should trigger the fallback UI and halt execution by\n// throwing an exception.\nfunction error(msg) {\n  if (verbosity >= VERBOSITY_LEVELS.errors) {\n    console.log('Error: ' + msg);\n    console.log(backtrace());\n  }\n  throw new Error(msg);\n}\n\nfunction backtrace() {\n  try {\n    throw new Error();\n  } catch (e) {\n    return e.stack ? e.stack.split('\\n').slice(2).join('\\n') : '';\n  }\n}\n\nfunction assert(cond, msg) {\n  if (!cond) {\n    error(msg);\n  }\n}\n\nvar UNSUPPORTED_FEATURES = {\n  unknown: 'unknown',\n  forms: 'forms',\n  javaScript: 'javaScript',\n  smask: 'smask',\n  shadingPattern: 'shadingPattern',\n  font: 'font'\n};\n\n// Checks if URLs have the same origin. For non-HTTP based URLs, returns false.\nfunction isSameOrigin(baseUrl, otherUrl) {\n  try {\n    var base = new URL(baseUrl);\n    if (!base.origin || base.origin === 'null') {\n      return false; // non-HTTP url\n    }\n  } catch (e) {\n    return false;\n  }\n\n  var other = new URL(otherUrl, base);\n  return base.origin === other.origin;\n}\n\n// Checks if URLs use one of the whitelisted protocols, e.g. to avoid XSS.\nfunction isValidProtocol(url) {\n  if (!url) {\n    return false;\n  }\n  switch (url.protocol) {\n    case 'http:':\n    case 'https:':\n    case 'ftp:':\n    case 'mailto:':\n    case 'tel:':\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Attempts to create a valid absolute URL (utilizing `isValidProtocol`).\n * @param {URL|string} url - An absolute, or relative, URL.\n * @param {URL|string} baseUrl - An absolute URL.\n * @returns Either a valid {URL}, or `null` otherwise.\n */\nfunction createValidAbsoluteUrl(url, baseUrl) {\n  if (!url) {\n    return null;\n  }\n  try {\n    var absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    if (isValidProtocol(absoluteUrl)) {\n      return absoluteUrl;\n    }\n  } catch (ex) { /* `new URL()` will throw on incorrect data. */ }\n  return null;\n}\n\nfunction shadow(obj, prop, value) {\n  Object.defineProperty(obj, prop, { value,\n                                     enumerable: true,\n                                     configurable: true,\n                                     writable: false });\n  return value;\n}\n\nfunction getLookupTableFactory(initializer) {\n  var lookup;\n  return function () {\n    if (initializer) {\n      lookup = Object.create(null);\n      initializer(lookup);\n      initializer = null;\n    }\n    return lookup;\n  };\n}\n\nvar PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n};\n\nvar PasswordException = (function PasswordExceptionClosure() {\n  function PasswordException(msg, code) {\n    this.name = 'PasswordException';\n    this.message = msg;\n    this.code = code;\n  }\n\n  PasswordException.prototype = new Error();\n  PasswordException.constructor = PasswordException;\n\n  return PasswordException;\n})();\n\nvar UnknownErrorException = (function UnknownErrorExceptionClosure() {\n  function UnknownErrorException(msg, details) {\n    this.name = 'UnknownErrorException';\n    this.message = msg;\n    this.details = details;\n  }\n\n  UnknownErrorException.prototype = new Error();\n  UnknownErrorException.constructor = UnknownErrorException;\n\n  return UnknownErrorException;\n})();\n\nvar InvalidPDFException = (function InvalidPDFExceptionClosure() {\n  function InvalidPDFException(msg) {\n    this.name = 'InvalidPDFException';\n    this.message = msg;\n  }\n\n  InvalidPDFException.prototype = new Error();\n  InvalidPDFException.constructor = InvalidPDFException;\n\n  return InvalidPDFException;\n})();\n\nvar MissingPDFException = (function MissingPDFExceptionClosure() {\n  function MissingPDFException(msg) {\n    this.name = 'MissingPDFException';\n    this.message = msg;\n  }\n\n  MissingPDFException.prototype = new Error();\n  MissingPDFException.constructor = MissingPDFException;\n\n  return MissingPDFException;\n})();\n\nvar UnexpectedResponseException =\n    (function UnexpectedResponseExceptionClosure() {\n  function UnexpectedResponseException(msg, status) {\n    this.name = 'UnexpectedResponseException';\n    this.message = msg;\n    this.status = status;\n  }\n\n  UnexpectedResponseException.prototype = new Error();\n  UnexpectedResponseException.constructor = UnexpectedResponseException;\n\n  return UnexpectedResponseException;\n})();\n\nvar NotImplementedException = (function NotImplementedExceptionClosure() {\n  function NotImplementedException(msg) {\n    this.message = msg;\n  }\n\n  NotImplementedException.prototype = new Error();\n  NotImplementedException.prototype.name = 'NotImplementedException';\n  NotImplementedException.constructor = NotImplementedException;\n\n  return NotImplementedException;\n})();\n\nvar MissingDataException = (function MissingDataExceptionClosure() {\n  function MissingDataException(begin, end) {\n    this.begin = begin;\n    this.end = end;\n    this.message = 'Missing data [' + begin + ', ' + end + ')';\n  }\n\n  MissingDataException.prototype = new Error();\n  MissingDataException.prototype.name = 'MissingDataException';\n  MissingDataException.constructor = MissingDataException;\n\n  return MissingDataException;\n})();\n\nvar XRefParseException = (function XRefParseExceptionClosure() {\n  function XRefParseException(msg) {\n    this.message = msg;\n  }\n\n  XRefParseException.prototype = new Error();\n  XRefParseException.prototype.name = 'XRefParseException';\n  XRefParseException.constructor = XRefParseException;\n\n  return XRefParseException;\n})();\n\nvar NullCharactersRegExp = /\\x00/g;\n\nfunction removeNullCharacters(str) {\n  if (typeof str !== 'string') {\n    warn('The argument for removeNullCharacters must be a string.');\n    return str;\n  }\n  return str.replace(NullCharactersRegExp, '');\n}\n\nfunction bytesToString(bytes) {\n  assert(bytes !== null && typeof bytes === 'object' &&\n         bytes.length !== undefined, 'Invalid argument for bytesToString');\n  var length = bytes.length;\n  var MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  var strBuf = [];\n  for (var i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    var chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    var chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join('');\n}\n\nfunction stringToBytes(str) {\n  assert(typeof str === 'string', 'Invalid argument for stringToBytes');\n  var length = str.length;\n  var bytes = new Uint8Array(length);\n  for (var i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xFF;\n  }\n  return bytes;\n}\n\n/**\n * Gets length of the array (Array, Uint8Array, or string) in bytes.\n * @param {Array|Uint8Array|string} arr\n * @returns {number}\n */\nfunction arrayByteLength(arr) {\n  if (arr.length !== undefined) {\n    return arr.length;\n  }\n  assert(arr.byteLength !== undefined);\n  return arr.byteLength;\n}\n\n/**\n * Combines array items (arrays) into single Uint8Array object.\n * @param {Array} arr - the array of the arrays (Array, Uint8Array, or string).\n * @returns {Uint8Array}\n */\nfunction arraysToBytes(arr) {\n  // Shortcut: if first and only item is Uint8Array, return it.\n  if (arr.length === 1 && (arr[0] instanceof Uint8Array)) {\n    return arr[0];\n  }\n  var resultLength = 0;\n  var i, ii = arr.length;\n  var item, itemLength;\n  for (i = 0; i < ii; i++) {\n    item = arr[i];\n    itemLength = arrayByteLength(item);\n    resultLength += itemLength;\n  }\n  var pos = 0;\n  var data = new Uint8Array(resultLength);\n  for (i = 0; i < ii; i++) {\n    item = arr[i];\n    if (!(item instanceof Uint8Array)) {\n      if (typeof item === 'string') {\n        item = stringToBytes(item);\n      } else {\n        item = new Uint8Array(item);\n      }\n    }\n    itemLength = item.byteLength;\n    data.set(item, pos);\n    pos += itemLength;\n  }\n  return data;\n}\n\nfunction string32(value) {\n  return String.fromCharCode((value >> 24) & 0xff, (value >> 16) & 0xff,\n                             (value >> 8) & 0xff, value & 0xff);\n}\n\nfunction log2(x) {\n  var n = 1, i = 0;\n  while (x > n) {\n    n <<= 1;\n    i++;\n  }\n  return i;\n}\n\nfunction readInt8(data, start) {\n  return (data[start] << 24) >> 24;\n}\n\nfunction readUint16(data, offset) {\n  return (data[offset] << 8) | data[offset + 1];\n}\n\nfunction readUint32(data, offset) {\n  return ((data[offset] << 24) | (data[offset + 1] << 16) |\n         (data[offset + 2] << 8) | data[offset + 3]) >>> 0;\n}\n\n// Lazy test the endianness of the platform\n// NOTE: This will be 'true' for simulated TypedArrays\nfunction isLittleEndian() {\n  var buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  var view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return (view32[0] === 1);\n}\n\n// Checks if it's possible to eval JS expressions.\nfunction isEvalSupported() {\n  try {\n    new Function(''); // eslint-disable-line no-new, no-new-func\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\n\nvar Util = (function UtilClosure() {\n  function Util() {}\n\n  var rgbBuf = ['rgb(', 0, ',', 0, ',', 0, ')'];\n\n  // makeCssRgb() can be called thousands of times. Using |rgbBuf| avoids\n  // creating many intermediate strings.\n  Util.makeCssRgb = function Util_makeCssRgb(r, g, b) {\n    rgbBuf[1] = r;\n    rgbBuf[3] = g;\n    rgbBuf[5] = b;\n    return rgbBuf.join('');\n  };\n\n  // Concatenates two transformation matrices together and returns the result.\n  Util.transform = function Util_transform(m1, m2) {\n    return [\n      m1[0] * m2[0] + m1[2] * m2[1],\n      m1[1] * m2[0] + m1[3] * m2[1],\n      m1[0] * m2[2] + m1[2] * m2[3],\n      m1[1] * m2[2] + m1[3] * m2[3],\n      m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n      m1[1] * m2[4] + m1[3] * m2[5] + m1[5]\n    ];\n  };\n\n  // For 2d affine transforms\n  Util.applyTransform = function Util_applyTransform(p, m) {\n    var xt = p[0] * m[0] + p[1] * m[2] + m[4];\n    var yt = p[0] * m[1] + p[1] * m[3] + m[5];\n    return [xt, yt];\n  };\n\n  Util.applyInverseTransform = function Util_applyInverseTransform(p, m) {\n    var d = m[0] * m[3] - m[1] * m[2];\n    var xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    var yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n    return [xt, yt];\n  };\n\n  // Applies the transform to the rectangle and finds the minimum axially\n  // aligned bounding box.\n  Util.getAxialAlignedBoundingBox =\n    function Util_getAxialAlignedBoundingBox(r, m) {\n\n    var p1 = Util.applyTransform(r, m);\n    var p2 = Util.applyTransform(r.slice(2, 4), m);\n    var p3 = Util.applyTransform([r[0], r[3]], m);\n    var p4 = Util.applyTransform([r[2], r[1]], m);\n    return [\n      Math.min(p1[0], p2[0], p3[0], p4[0]),\n      Math.min(p1[1], p2[1], p3[1], p4[1]),\n      Math.max(p1[0], p2[0], p3[0], p4[0]),\n      Math.max(p1[1], p2[1], p3[1], p4[1])\n    ];\n  };\n\n  Util.inverseTransform = function Util_inverseTransform(m) {\n    var d = m[0] * m[3] - m[1] * m[2];\n    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d,\n      (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n  };\n\n  // Apply a generic 3d matrix M on a 3-vector v:\n  //   | a b c |   | X |\n  //   | d e f | x | Y |\n  //   | g h i |   | Z |\n  // M is assumed to be serialized as [a,b,c,d,e,f,g,h,i],\n  // with v as [X,Y,Z]\n  Util.apply3dTransform = function Util_apply3dTransform(m, v) {\n    return [\n      m[0] * v[0] + m[1] * v[1] + m[2] * v[2],\n      m[3] * v[0] + m[4] * v[1] + m[5] * v[2],\n      m[6] * v[0] + m[7] * v[1] + m[8] * v[2]\n    ];\n  };\n\n  // This calculation uses Singular Value Decomposition.\n  // The SVD can be represented with formula A = USV. We are interested in the\n  // matrix S here because it represents the scale values.\n  Util.singularValueDecompose2dScale =\n    function Util_singularValueDecompose2dScale(m) {\n\n    var transpose = [m[0], m[2], m[1], m[3]];\n\n    // Multiply matrix m with its transpose.\n    var a = m[0] * transpose[0] + m[1] * transpose[2];\n    var b = m[0] * transpose[1] + m[1] * transpose[3];\n    var c = m[2] * transpose[0] + m[3] * transpose[2];\n    var d = m[2] * transpose[1] + m[3] * transpose[3];\n\n    // Solve the second degree polynomial to get roots.\n    var first = (a + d) / 2;\n    var second = Math.sqrt((a + d) * (a + d) - 4 * (a * d - c * b)) / 2;\n    var sx = first + second || 1;\n    var sy = first - second || 1;\n\n    // Scale values are the square roots of the eigenvalues.\n    return [Math.sqrt(sx), Math.sqrt(sy)];\n  };\n\n  // Normalize rectangle rect=[x1, y1, x2, y2] so that (x1,y1) < (x2,y2)\n  // For coordinate systems whose origin lies in the bottom-left, this\n  // means normalization to (BL,TR) ordering. For systems with origin in the\n  // top-left, this means (TL,BR) ordering.\n  Util.normalizeRect = function Util_normalizeRect(rect) {\n    var r = rect.slice(0); // clone rect\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  };\n\n  // Returns a rectangle [x1, y1, x2, y2] corresponding to the\n  // intersection of rect1 and rect2. If no intersection, returns 'false'\n  // The rectangle coordinates of rect1, rect2 should be [x1, y1, x2, y2]\n  Util.intersect = function Util_intersect(rect1, rect2) {\n    function compare(a, b) {\n      return a - b;\n    }\n\n    // Order points along the axes\n    var orderedX = [rect1[0], rect1[2], rect2[0], rect2[2]].sort(compare),\n        orderedY = [rect1[1], rect1[3], rect2[1], rect2[3]].sort(compare),\n        result = [];\n\n    rect1 = Util.normalizeRect(rect1);\n    rect2 = Util.normalizeRect(rect2);\n\n    // X: first and second points belong to different rectangles?\n    if ((orderedX[0] === rect1[0] && orderedX[1] === rect2[0]) ||\n        (orderedX[0] === rect2[0] && orderedX[1] === rect1[0])) {\n      // Intersection must be between second and third points\n      result[0] = orderedX[1];\n      result[2] = orderedX[2];\n    } else {\n      return false;\n    }\n\n    // Y: first and second points belong to different rectangles?\n    if ((orderedY[0] === rect1[1] && orderedY[1] === rect2[1]) ||\n        (orderedY[0] === rect2[1] && orderedY[1] === rect1[1])) {\n      // Intersection must be between second and third points\n      result[1] = orderedY[1];\n      result[3] = orderedY[2];\n    } else {\n      return false;\n    }\n\n    return result;\n  };\n\n  Util.sign = function Util_sign(num) {\n    return num < 0 ? -1 : 1;\n  };\n\n  var ROMAN_NUMBER_MAP = [\n    '', 'C', 'CC', 'CCC', 'CD', 'D', 'DC', 'DCC', 'DCCC', 'CM',\n    '', 'X', 'XX', 'XXX', 'XL', 'L', 'LX', 'LXX', 'LXXX', 'XC',\n    '', 'I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX'\n  ];\n  /**\n   * Converts positive integers to (upper case) Roman numerals.\n   * @param {integer} number - The number that should be converted.\n   * @param {boolean} lowerCase - Indicates if the result should be converted\n   *   to lower case letters. The default is false.\n   * @return {string} The resulting Roman number.\n   */\n  Util.toRoman = function Util_toRoman(number, lowerCase) {\n    assert(isInt(number) && number > 0,\n           'The number should be a positive integer.');\n    var pos, romanBuf = [];\n    // Thousands\n    while (number >= 1000) {\n      number -= 1000;\n      romanBuf.push('M');\n    }\n    // Hundreds\n    pos = (number / 100) | 0;\n    number %= 100;\n    romanBuf.push(ROMAN_NUMBER_MAP[pos]);\n    // Tens\n    pos = (number / 10) | 0;\n    number %= 10;\n    romanBuf.push(ROMAN_NUMBER_MAP[10 + pos]);\n    // Ones\n    romanBuf.push(ROMAN_NUMBER_MAP[20 + number]);\n\n    var romanStr = romanBuf.join('');\n    return (lowerCase ? romanStr.toLowerCase() : romanStr);\n  };\n\n  Util.appendToArray = function Util_appendToArray(arr1, arr2) {\n    Array.prototype.push.apply(arr1, arr2);\n  };\n\n  Util.prependToArray = function Util_prependToArray(arr1, arr2) {\n    Array.prototype.unshift.apply(arr1, arr2);\n  };\n\n  Util.extendObj = function extendObj(obj1, obj2) {\n    for (var key in obj2) {\n      obj1[key] = obj2[key];\n    }\n  };\n\n  Util.getInheritableProperty =\n      function Util_getInheritableProperty(dict, name, getArray) {\n    while (dict && !dict.has(name)) {\n      dict = dict.get('Parent');\n    }\n    if (!dict) {\n      return null;\n    }\n    return getArray ? dict.getArray(name) : dict.get(name);\n  };\n\n  Util.inherit = function Util_inherit(sub, base, prototype) {\n    sub.prototype = Object.create(base.prototype);\n    sub.prototype.constructor = sub;\n    for (var prop in prototype) {\n      sub.prototype[prop] = prototype[prop];\n    }\n  };\n\n  Util.loadScript = function Util_loadScript(src, callback) {\n    var script = document.createElement('script');\n    var loaded = false;\n    script.setAttribute('src', src);\n    if (callback) {\n      script.onload = function() {\n        if (!loaded) {\n          callback();\n        }\n        loaded = true;\n      };\n    }\n    document.getElementsByTagName('head')[0].appendChild(script);\n  };\n\n  return Util;\n})();\n\n/**\n * PDF page viewport created based on scale, rotation and offset.\n * @class\n * @alias PageViewport\n */\nvar PageViewport = (function PageViewportClosure() {\n  /**\n   * @constructor\n   * @private\n   * @param viewBox {Array} xMin, yMin, xMax and yMax coordinates.\n   * @param scale {number} scale of the viewport.\n   * @param rotation {number} rotations of the viewport in degrees.\n   * @param offsetX {number} offset X\n   * @param offsetY {number} offset Y\n   * @param dontFlip {boolean} if true, axis Y will not be flipped.\n   */\n  function PageViewport(viewBox, scale, rotation, offsetX, offsetY, dontFlip) {\n    this.viewBox = viewBox;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n\n    // creating transform to convert pdf coordinate system to the normal\n    // canvas like coordinates taking in account scale and rotation\n    var centerX = (viewBox[2] + viewBox[0]) / 2;\n    var centerY = (viewBox[3] + viewBox[1]) / 2;\n    var rotateA, rotateB, rotateC, rotateD;\n    rotation = rotation % 360;\n    rotation = rotation < 0 ? rotation + 360 : rotation;\n    switch (rotation) {\n      case 180:\n        rotateA = -1; rotateB = 0; rotateC = 0; rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0; rotateB = 1; rotateC = 1; rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0; rotateB = -1; rotateC = -1; rotateD = 0;\n        break;\n      // case 0:\n      default:\n        rotateA = 1; rotateB = 0; rotateC = 0; rotateD = -1;\n        break;\n    }\n\n    if (dontFlip) {\n      rotateC = -rotateC; rotateD = -rotateD;\n    }\n\n    var offsetCanvasX, offsetCanvasY;\n    var width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = Math.abs(viewBox[3] - viewBox[1]) * scale;\n      height = Math.abs(viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = Math.abs(viewBox[2] - viewBox[0]) * scale;\n      height = Math.abs(viewBox[3] - viewBox[1]) * scale;\n    }\n    // creating transform for the following operations:\n    // translate(-centerX, -centerY), rotate and flip vertically,\n    // scale, and translate(offsetCanvasX, offsetCanvasY)\n    this.transform = [\n      rotateA * scale,\n      rotateB * scale,\n      rotateC * scale,\n      rotateD * scale,\n      offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY,\n      offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY\n    ];\n\n    this.width = width;\n    this.height = height;\n    this.fontScale = scale;\n  }\n  PageViewport.prototype = /** @lends PageViewport.prototype */ {\n    /**\n     * Clones viewport with additional properties.\n     * @param args {Object} (optional) If specified, may contain the 'scale' or\n     * 'rotation' properties to override the corresponding properties in\n     * the cloned viewport.\n     * @returns {PageViewport} Cloned viewport.\n     */\n    clone: function PageViewPort_clone(args) {\n      args = args || {};\n      var scale = 'scale' in args ? args.scale : this.scale;\n      var rotation = 'rotation' in args ? args.rotation : this.rotation;\n      return new PageViewport(this.viewBox.slice(), scale, rotation,\n                              this.offsetX, this.offsetY, args.dontFlip);\n    },\n    /**\n     * Converts PDF point to the viewport coordinates. For examples, useful for\n     * converting PDF location into canvas pixel coordinates.\n     * @param x {number} X coordinate.\n     * @param y {number} Y coordinate.\n     * @returns {Object} Object that contains 'x' and 'y' properties of the\n     * point in the viewport coordinate space.\n     * @see {@link convertToPdfPoint}\n     * @see {@link convertToViewportRectangle}\n     */\n    convertToViewportPoint: function PageViewport_convertToViewportPoint(x, y) {\n      return Util.applyTransform([x, y], this.transform);\n    },\n    /**\n     * Converts PDF rectangle to the viewport coordinates.\n     * @param rect {Array} xMin, yMin, xMax and yMax coordinates.\n     * @returns {Array} Contains corresponding coordinates of the rectangle\n     * in the viewport coordinate space.\n     * @see {@link convertToViewportPoint}\n     */\n    convertToViewportRectangle:\n      function PageViewport_convertToViewportRectangle(rect) {\n      var tl = Util.applyTransform([rect[0], rect[1]], this.transform);\n      var br = Util.applyTransform([rect[2], rect[3]], this.transform);\n      return [tl[0], tl[1], br[0], br[1]];\n    },\n    /**\n     * Converts viewport coordinates to the PDF location. For examples, useful\n     * for converting canvas pixel location into PDF one.\n     * @param x {number} X coordinate.\n     * @param y {number} Y coordinate.\n     * @returns {Object} Object that contains 'x' and 'y' properties of the\n     * point in the PDF coordinate space.\n     * @see {@link convertToViewportPoint}\n     */\n    convertToPdfPoint: function PageViewport_convertToPdfPoint(x, y) {\n      return Util.applyInverseTransform([x, y], this.transform);\n    }\n  };\n  return PageViewport;\n})();\n\nvar PDFStringTranslateTable = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0x2D8, 0x2C7, 0x2C6, 0x2D9, 0x2DD, 0x2DB, 0x2DA, 0x2DC, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014,\n  0x2013, 0x192, 0x2044, 0x2039, 0x203A, 0x2212, 0x2030, 0x201E, 0x201C,\n  0x201D, 0x2018, 0x2019, 0x201A, 0x2122, 0xFB01, 0xFB02, 0x141, 0x152, 0x160,\n  0x178, 0x17D, 0x131, 0x142, 0x153, 0x161, 0x17E, 0, 0x20AC\n];\n\nfunction stringToPDFString(str) {\n  var i, n = str.length, strBuf = [];\n  if (str[0] === '\\xFE' && str[1] === '\\xFF') {\n    // UTF16BE BOM\n    for (i = 2; i < n; i += 2) {\n      strBuf.push(String.fromCharCode(\n        (str.charCodeAt(i) << 8) | str.charCodeAt(i + 1)));\n    }\n  } else {\n    for (i = 0; i < n; ++i) {\n      var code = PDFStringTranslateTable[str.charCodeAt(i)];\n      strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n    }\n  }\n  return strBuf.join('');\n}\n\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\n\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\n\nfunction isEmptyObj(obj) {\n  for (var key in obj) {\n    return false;\n  }\n  return true;\n}\n\nfunction isBool(v) {\n  return typeof v === 'boolean';\n}\n\nfunction isInt(v) {\n  return typeof v === 'number' && ((v | 0) === v);\n}\n\nfunction isNum(v) {\n  return typeof v === 'number';\n}\n\nfunction isString(v) {\n  return typeof v === 'string';\n}\n\nfunction isArray(v) {\n  return v instanceof Array;\n}\n\nfunction isArrayBuffer(v) {\n  return typeof v === 'object' && v !== null && v.byteLength !== undefined;\n}\n\n// Checks if ch is one of the following characters: SPACE, TAB, CR or LF.\nfunction isSpace(ch) {\n  return (ch === 0x20 || ch === 0x09 || ch === 0x0D || ch === 0x0A);\n}\n\nfunction isNodeJS() {\n  // The if below protected by __pdfjsdev_webpack__ check from webpack parsing.\n  if (typeof __pdfjsdev_webpack__ === 'undefined') {\n    return typeof process === 'object' && process + '' === '[object process]';\n  }\n  return false;\n}\n\n/**\n * Promise Capability object.\n *\n * @typedef {Object} PromiseCapability\n * @property {Promise} promise - A promise object.\n * @property {function} resolve - Fulfills the promise.\n * @property {function} reject - Rejects the promise.\n */\n\n/**\n * Creates a promise capability object.\n * @alias createPromiseCapability\n *\n * @return {PromiseCapability} A capability object contains:\n * - a Promise, resolve and reject methods.\n */\nfunction createPromiseCapability() {\n  var capability = {};\n  capability.promise = new Promise(function (resolve, reject) {\n    capability.resolve = resolve;\n    capability.reject = reject;\n  });\n  return capability;\n}\n\nvar StatTimer = (function StatTimerClosure() {\n  function rpad(str, pad, length) {\n    while (str.length < length) {\n      str += pad;\n    }\n    return str;\n  }\n  function StatTimer() {\n    this.started = Object.create(null);\n    this.times = [];\n    this.enabled = true;\n  }\n  StatTimer.prototype = {\n    time: function StatTimer_time(name) {\n      if (!this.enabled) {\n        return;\n      }\n      if (name in this.started) {\n        warn('Timer is already running for ' + name);\n      }\n      this.started[name] = Date.now();\n    },\n    timeEnd: function StatTimer_timeEnd(name) {\n      if (!this.enabled) {\n        return;\n      }\n      if (!(name in this.started)) {\n        warn('Timer has not been started for ' + name);\n      }\n      this.times.push({\n        'name': name,\n        'start': this.started[name],\n        'end': Date.now()\n      });\n      // Remove timer from started so it can be called again.\n      delete this.started[name];\n    },\n    toString: function StatTimer_toString() {\n      var i, ii;\n      var times = this.times;\n      var out = '';\n      // Find the longest name for padding purposes.\n      var longest = 0;\n      for (i = 0, ii = times.length; i < ii; ++i) {\n        var name = times[i]['name'];\n        if (name.length > longest) {\n          longest = name.length;\n        }\n      }\n      for (i = 0, ii = times.length; i < ii; ++i) {\n        var span = times[i];\n        var duration = span.end - span.start;\n        out += rpad(span['name'], ' ', longest) + ' ' + duration + 'ms\\n';\n      }\n      return out;\n    }\n  };\n  return StatTimer;\n})();\n\nvar createBlob = function createBlob(data, contentType) {\n  if (typeof Blob !== 'undefined') {\n    return new Blob([data], { type: contentType });\n  }\n  throw new Error('The \"Blob\" constructor is not supported.');\n};\n\nvar createObjectURL = (function createObjectURLClosure() {\n  // Blob/createObjectURL is not available, falling back to data schema.\n  var digits =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n  return function createObjectURL(data, contentType, forceDataSchema = false) {\n    if (!forceDataSchema && URL.createObjectURL) {\n      var blob = createBlob(data, contentType);\n      return URL.createObjectURL(blob);\n    }\n\n    var buffer = 'data:' + contentType + ';base64,';\n    for (var i = 0, ii = data.length; i < ii; i += 3) {\n      var b1 = data[i] & 0xFF;\n      var b2 = data[i + 1] & 0xFF;\n      var b3 = data[i + 2] & 0xFF;\n      var d1 = b1 >> 2, d2 = ((b1 & 3) << 4) | (b2 >> 4);\n      var d3 = i + 1 < ii ? ((b2 & 0xF) << 2) | (b3 >> 6) : 64;\n      var d4 = i + 2 < ii ? (b3 & 0x3F) : 64;\n      buffer += digits[d1] + digits[d2] + digits[d3] + digits[d4];\n    }\n    return buffer;\n  };\n})();\n\nfunction MessageHandler(sourceName, targetName, comObj) {\n  this.sourceName = sourceName;\n  this.targetName = targetName;\n  this.comObj = comObj;\n  this.callbackIndex = 1;\n  this.postMessageTransfers = true;\n  var callbacksCapabilities = this.callbacksCapabilities = Object.create(null);\n  var ah = this.actionHandler = Object.create(null);\n\n  this._onComObjOnMessage = (event) => {\n    var data = event.data;\n    if (data.targetName !== this.sourceName) {\n      return;\n    }\n    if (data.isReply) {\n      var callbackId = data.callbackId;\n      if (data.callbackId in callbacksCapabilities) {\n        var callback = callbacksCapabilities[callbackId];\n        delete callbacksCapabilities[callbackId];\n        if ('error' in data) {\n          callback.reject(data.error);\n        } else {\n          callback.resolve(data.data);\n        }\n      } else {\n        error('Cannot resolve callback ' + callbackId);\n      }\n    } else if (data.action in ah) {\n      var action = ah[data.action];\n      if (data.callbackId) {\n        var sourceName = this.sourceName;\n        var targetName = data.sourceName;\n        Promise.resolve().then(function () {\n          return action[0].call(action[1], data.data);\n        }).then(function (result) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            isReply: true,\n            callbackId: data.callbackId,\n            data: result\n          });\n        }, function (reason) {\n          if (reason instanceof Error) {\n            // Serialize error to avoid \"DataCloneError\"\n            reason = reason + '';\n          }\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            isReply: true,\n            callbackId: data.callbackId,\n            error: reason\n          });\n        });\n      } else {\n        action[0].call(action[1], data.data);\n      }\n    } else {\n      error('Unknown action from worker: ' + data.action);\n    }\n  };\n  comObj.addEventListener('message', this._onComObjOnMessage);\n}\n\nMessageHandler.prototype = {\n  on(actionName, handler, scope) {\n    var ah = this.actionHandler;\n    if (ah[actionName]) {\n      error('There is already an actionName called \"' + actionName + '\"');\n    }\n    ah[actionName] = [handler, scope];\n  },\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * @param {String} actionName Action to call.\n   * @param {JSON} data JSON data to send.\n   * @param {Array} [transfers] Optional list of transfers/ArrayBuffers\n   */\n  send(actionName, data, transfers) {\n    var message = {\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data,\n    };\n    this.postMessage(message, transfers);\n  },\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expects that other side will callback with the response.\n   * @param {String} actionName Action to call.\n   * @param {JSON} data JSON data to send.\n   * @param {Array} [transfers] Optional list of transfers/ArrayBuffers.\n   * @returns {Promise} Promise to be resolved with response data.\n   */\n  sendWithPromise(actionName, data, transfers) {\n    var callbackId = this.callbackIndex++;\n    var message = {\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data,\n      callbackId,\n    };\n    var capability = createPromiseCapability();\n    this.callbacksCapabilities[callbackId] = capability;\n    try {\n      this.postMessage(message, transfers);\n    } catch (e) {\n      capability.reject(e);\n    }\n    return capability.promise;\n  },\n  /**\n   * Sends raw message to the comObj.\n   * @private\n   * @param message {Object} Raw message.\n   * @param transfers List of transfers/ArrayBuffers, or undefined.\n   */\n  postMessage(message, transfers) {\n    if (transfers && this.postMessageTransfers) {\n      this.comObj.postMessage(message, transfers);\n    } else {\n      this.comObj.postMessage(message);\n    }\n  },\n\n  destroy() {\n    this.comObj.removeEventListener('message', this._onComObjOnMessage);\n  }\n};\n\nfunction loadJpegStream(id, imageUrl, objs) {\n  var img = new Image();\n  img.onload = (function loadJpegStream_onloadClosure() {\n    objs.resolve(id, img);\n  });\n  img.onerror = (function loadJpegStream_onerrorClosure() {\n    objs.resolve(id, null);\n    warn('Error during JPEG image loading');\n  });\n  img.src = imageUrl;\n}\n\nexport {\n  FONT_IDENTITY_MATRIX,\n  IDENTITY_MATRIX,\n  OPS,\n  VERBOSITY_LEVELS,\n  UNSUPPORTED_FEATURES,\n  AnnotationBorderStyleType,\n  AnnotationFieldFlag,\n  AnnotationFlag,\n  AnnotationType,\n  FontType,\n  ImageKind,\n  CMapCompressionType,\n  InvalidPDFException,\n  MessageHandler,\n  MissingDataException,\n  MissingPDFException,\n  NotImplementedException,\n  PageViewport,\n  PasswordException,\n  PasswordResponses,\n  StatTimer,\n  StreamType,\n  TextRenderingMode,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  Util,\n  XRefParseException,\n  arrayByteLength,\n  arraysToBytes,\n  assert,\n  bytesToString,\n  createBlob,\n  createPromiseCapability,\n  createObjectURL,\n  deprecated,\n  error,\n  getLookupTableFactory,\n  getVerbosityLevel,\n  globalScope,\n  info,\n  isArray,\n  isArrayBuffer,\n  isBool,\n  isEmptyObj,\n  isInt,\n  isNum,\n  isString,\n  isSpace,\n  isNodeJS,\n  isSameOrigin,\n  createValidAbsoluteUrl,\n  isLittleEndian,\n  isEvalSupported,\n  loadJpegStream,\n  log2,\n  readInt8,\n  readUint16,\n  readUint32,\n  removeNullCharacters,\n  setVerbosityLevel,\n  shadow,\n  string32,\n  stringToBytes,\n  stringToPDFString,\n  stringToUTF8String,\n  utf8StringToString,\n  warn,\n};\n\n\n\n// WEBPACK FOOTER //\n// src/shared/util.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { scrollIntoView } from './ui_utils';\n\nvar FindStates = {\n  FIND_FOUND: 0,\n  FIND_NOTFOUND: 1,\n  FIND_WRAPPED: 2,\n  FIND_PENDING: 3\n};\n\nvar FIND_SCROLL_OFFSET_TOP = -50;\nvar FIND_SCROLL_OFFSET_LEFT = -400;\n\nvar CHARACTERS_TO_NORMALIZE = {\n  '\\u2018': '\\'', // Left single quotation mark\n  '\\u2019': '\\'', // Right single quotation mark\n  '\\u201A': '\\'', // Single low-9 quotation mark\n  '\\u201B': '\\'', // Single high-reversed-9 quotation mark\n  '\\u201C': '\"', // Left double quotation mark\n  '\\u201D': '\"', // Right double quotation mark\n  '\\u201E': '\"', // Double low-9 quotation mark\n  '\\u201F': '\"', // Double high-reversed-9 quotation mark\n  '\\u00BC': '1/4', // Vulgar fraction one quarter\n  '\\u00BD': '1/2', // Vulgar fraction one half\n  '\\u00BE': '3/4', // Vulgar fraction three quarters\n};\n\n/**\n * Provides \"search\" or \"find\" functionality for the PDF.\n * This object actually performs the search for a given string.\n */\nvar PDFFindController = (function PDFFindControllerClosure() {\n  function PDFFindController(options) {\n    this.pdfViewer = options.pdfViewer || null;\n\n    this.onUpdateResultsCount = null;\n    this.onUpdateState = null;\n\n    this.reset();\n\n    // Compile the regular expression for text normalization once.\n    var replace = Object.keys(CHARACTERS_TO_NORMALIZE).join('');\n    this.normalizationRegex = new RegExp('[' + replace + ']', 'g');\n  }\n\n  PDFFindController.prototype = {\n    reset: function PDFFindController_reset() {\n      this.startedTextExtraction = false;\n      this.extractTextPromises = [];\n      this.pendingFindMatches = Object.create(null);\n      this.active = false; // If active, find results will be highlighted.\n      this.pageContents = []; // Stores the text for each page.\n      this.pageMatches = [];\n      this.pageMatchesLength = null;\n      this.matchCount = 0;\n      this.selected = { // Currently selected match.\n        pageIdx: -1,\n        matchIdx: -1\n      };\n      this.offset = { // Where the find algorithm currently is in the document.\n        pageIdx: null,\n        matchIdx: null\n      };\n      this.pagesToSearch = null;\n      this.resumePageIdx = null;\n      this.state = null;\n      this.dirtyMatch = false;\n      this.findTimeout = null;\n\n      this._firstPagePromise = new Promise((resolve) => {\n        this.resolveFirstPage = resolve;\n      });\n    },\n\n    normalize: function PDFFindController_normalize(text) {\n      return text.replace(this.normalizationRegex, function (ch) {\n        return CHARACTERS_TO_NORMALIZE[ch];\n      });\n    },\n\n    // Helper for multiple search - fills matchesWithLength array\n    // and takes into account cases when one search term\n    // include another search term (for example, \"tamed tame\" or \"this is\").\n    // Looking for intersecting terms in the 'matches' and\n    // leave elements with a longer match-length.\n\n    _prepareMatches: function PDFFindController_prepareMatches(\n        matchesWithLength, matches, matchesLength) {\n\n      function isSubTerm(matchesWithLength, currentIndex) {\n        var currentElem, prevElem, nextElem;\n        currentElem = matchesWithLength[currentIndex];\n        nextElem = matchesWithLength[currentIndex + 1];\n        // checking for cases like \"TAMEd TAME\"\n        if (currentIndex < matchesWithLength.length - 1 &&\n            currentElem.match === nextElem.match) {\n          currentElem.skipped = true;\n          return true;\n        }\n        // checking for cases like \"thIS IS\"\n        for (var i = currentIndex - 1; i >= 0; i--) {\n          prevElem = matchesWithLength[i];\n          if (prevElem.skipped) {\n            continue;\n          }\n          if (prevElem.match + prevElem.matchLength < currentElem.match) {\n            break;\n          }\n          if (prevElem.match + prevElem.matchLength >=\n              currentElem.match + currentElem.matchLength) {\n            currentElem.skipped = true;\n            return true;\n          }\n        }\n        return false;\n      }\n\n      var i, len;\n      // Sorting array of objects { match: <match>, matchLength: <matchLength> }\n      // in increasing index first and then the lengths.\n      matchesWithLength.sort(function(a, b) {\n        return a.match === b.match ?\n        a.matchLength - b.matchLength : a.match - b.match;\n      });\n      for (i = 0, len = matchesWithLength.length; i < len; i++) {\n        if (isSubTerm(matchesWithLength, i)) {\n          continue;\n        }\n        matches.push(matchesWithLength[i].match);\n        matchesLength.push(matchesWithLength[i].matchLength);\n      }\n    },\n\n    calcFindPhraseMatch: function PDFFindController_calcFindPhraseMatch(\n      query, pageIndex, pageContent) {\n      var matches = [];\n      var queryLen = query.length;\n      var matchIdx = -queryLen;\n      while (true) {\n        matchIdx = pageContent.indexOf(query, matchIdx + queryLen);\n        if (matchIdx === -1) {\n          break;\n        }\n        matches.push(matchIdx);\n      }\n      this.pageMatches[pageIndex] = matches;\n    },\n\n    calcFindWordMatch: function PDFFindController_calcFindWordMatch(\n      query, pageIndex, pageContent) {\n      var matchesWithLength = [];\n      // Divide the query into pieces and search for text on each piece.\n      var queryArray = query.match(/\\S+/g);\n      var subquery, subqueryLen, matchIdx;\n      for (var i = 0, len = queryArray.length; i < len; i++) {\n        subquery = queryArray[i];\n        subqueryLen = subquery.length;\n        matchIdx = -subqueryLen;\n        while (true) {\n          matchIdx = pageContent.indexOf(subquery, matchIdx + subqueryLen);\n          if (matchIdx === -1) {\n            break;\n          }\n          // Other searches do not, so we store the length.\n          matchesWithLength.push({\n            match: matchIdx,\n            matchLength: subqueryLen,\n            skipped: false\n          });\n        }\n      }\n      // Prepare arrays for store the matches.\n      if (!this.pageMatchesLength) {\n        this.pageMatchesLength = [];\n      }\n      this.pageMatchesLength[pageIndex] = [];\n      this.pageMatches[pageIndex] = [];\n      // Sort matchesWithLength, clean up intersecting terms\n      // and put the result into the two arrays.\n      this._prepareMatches(matchesWithLength, this.pageMatches[pageIndex],\n        this.pageMatchesLength[pageIndex]);\n    },\n\n    calcFindMatch: function PDFFindController_calcFindMatch(pageIndex) {\n      var pageContent = this.normalize(this.pageContents[pageIndex]);\n      var query = this.normalize(this.state.query);\n      var caseSensitive = this.state.caseSensitive;\n      var phraseSearch = this.state.phraseSearch;\n      var queryLen = query.length;\n\n      if (queryLen === 0) {\n        // Do nothing: the matches should be wiped out already.\n        return;\n      }\n\n      if (!caseSensitive) {\n        pageContent = pageContent.toLowerCase();\n        query = query.toLowerCase();\n      }\n\n      if (phraseSearch) {\n        this.calcFindPhraseMatch(query, pageIndex, pageContent);\n      } else {\n        this.calcFindWordMatch(query, pageIndex, pageContent);\n      }\n\n      this.updatePage(pageIndex);\n      if (this.resumePageIdx === pageIndex) {\n        this.resumePageIdx = null;\n        this.nextPageMatch();\n      }\n\n      // Update the matches count\n      if (this.pageMatches[pageIndex].length > 0) {\n        this.matchCount += this.pageMatches[pageIndex].length;\n        this.updateUIResultsCount();\n      }\n    },\n\n    extractText: function PDFFindController_extractText() {\n      if (this.startedTextExtraction) {\n        return;\n      }\n      this.startedTextExtraction = true;\n\n      this.pageContents = [];\n      var extractTextPromisesResolves = [];\n      var numPages = this.pdfViewer.pagesCount;\n      for (var i = 0; i < numPages; i++) {\n        this.extractTextPromises.push(new Promise(function (resolve) {\n          extractTextPromisesResolves.push(resolve);\n        }));\n      }\n\n      var self = this;\n      function extractPageText(pageIndex) {\n        self.pdfViewer.getPageTextContent(pageIndex).then(\n          function textContentResolved(textContent) {\n            var textItems = textContent.items;\n            var str = [];\n\n            for (var i = 0, len = textItems.length; i < len; i++) {\n              str.push(textItems[i].str);\n            }\n\n            // Store the pageContent as a string.\n            self.pageContents.push(str.join(''));\n\n            extractTextPromisesResolves[pageIndex](pageIndex);\n            if ((pageIndex + 1) < self.pdfViewer.pagesCount) {\n              extractPageText(pageIndex + 1);\n            }\n          }\n        );\n      }\n      extractPageText(0);\n    },\n\n    executeCommand: function PDFFindController_executeCommand(cmd, state) {\n      if (this.state === null || cmd !== 'findagain') {\n        this.dirtyMatch = true;\n      }\n      this.state = state;\n      this.updateUIState(FindStates.FIND_PENDING);\n\n      this._firstPagePromise.then(() => {\n        this.extractText();\n\n        clearTimeout(this.findTimeout);\n        if (cmd === 'find') {\n          // Only trigger the find action after 250ms of silence.\n          this.findTimeout = setTimeout(this.nextMatch.bind(this), 250);\n        } else {\n          this.nextMatch();\n        }\n      });\n    },\n\n    updatePage: function PDFFindController_updatePage(index) {\n      if (this.selected.pageIdx === index) {\n        // If the page is selected, scroll the page into view, which triggers\n        // rendering the page, which adds the textLayer. Once the textLayer is\n        // build, it will scroll onto the selected match.\n        this.pdfViewer.currentPageNumber = index + 1;\n      }\n\n      var page = this.pdfViewer.getPageView(index);\n      if (page.textLayer) {\n        page.textLayer.updateMatches();\n      }\n    },\n\n    nextMatch: function PDFFindController_nextMatch() {\n      var previous = this.state.findPrevious;\n      var currentPageIndex = this.pdfViewer.currentPageNumber - 1;\n      var numPages = this.pdfViewer.pagesCount;\n\n      this.active = true;\n\n      if (this.dirtyMatch) {\n        // Need to recalculate the matches, reset everything.\n        this.dirtyMatch = false;\n        this.selected.pageIdx = this.selected.matchIdx = -1;\n        this.offset.pageIdx = currentPageIndex;\n        this.offset.matchIdx = null;\n        this.hadMatch = false;\n        this.resumePageIdx = null;\n        this.pageMatches = [];\n        this.matchCount = 0;\n        this.pageMatchesLength = null;\n        var self = this;\n\n        for (var i = 0; i < numPages; i++) {\n          // Wipe out any previous highlighted matches.\n          this.updatePage(i);\n\n          // As soon as the text is extracted start finding the matches.\n          if (!(i in this.pendingFindMatches)) {\n            this.pendingFindMatches[i] = true;\n            this.extractTextPromises[i].then(function(pageIdx) {\n              delete self.pendingFindMatches[pageIdx];\n              self.calcFindMatch(pageIdx);\n            });\n          }\n        }\n      }\n\n      // If there's no query there's no point in searching.\n      if (this.state.query === '') {\n        this.updateUIState(FindStates.FIND_FOUND);\n        return;\n      }\n\n      // If we're waiting on a page, we return since we can't do anything else.\n      if (this.resumePageIdx) {\n        return;\n      }\n\n      var offset = this.offset;\n      // Keep track of how many pages we should maximally iterate through.\n      this.pagesToSearch = numPages;\n      // If there's already a matchIdx that means we are iterating through a\n      // page's matches.\n      if (offset.matchIdx !== null) {\n        var numPageMatches = this.pageMatches[offset.pageIdx].length;\n        if ((!previous && offset.matchIdx + 1 < numPageMatches) ||\n            (previous && offset.matchIdx > 0)) {\n          // The simple case; we just have advance the matchIdx to select\n          // the next match on the page.\n          this.hadMatch = true;\n          offset.matchIdx = (previous ? offset.matchIdx - 1 :\n                                        offset.matchIdx + 1);\n          this.updateMatch(true);\n          return;\n        }\n        // We went beyond the current page's matches, so we advance to\n        // the next page.\n        this.advanceOffsetPage(previous);\n      }\n      // Start searching through the page.\n      this.nextPageMatch();\n    },\n\n    matchesReady: function PDFFindController_matchesReady(matches) {\n      var offset = this.offset;\n      var numMatches = matches.length;\n      var previous = this.state.findPrevious;\n\n      if (numMatches) {\n        // There were matches for the page, so initialize the matchIdx.\n        this.hadMatch = true;\n        offset.matchIdx = (previous ? numMatches - 1 : 0);\n        this.updateMatch(true);\n        return true;\n      }\n      // No matches, so attempt to search the next page.\n      this.advanceOffsetPage(previous);\n      if (offset.wrapped) {\n        offset.matchIdx = null;\n        if (this.pagesToSearch < 0) {\n          // No point in wrapping again, there were no matches.\n          this.updateMatch(false);\n          // while matches were not found, searching for a page\n          // with matches should nevertheless halt.\n          return true;\n        }\n      }\n      // Matches were not found (and searching is not done).\n      return false;\n    },\n\n    /**\n     * The method is called back from the text layer when match presentation\n     * is updated.\n     * @param {number} pageIndex - page index.\n     * @param {number} index - match index.\n     * @param {Array} elements - text layer div elements array.\n     * @param {number} beginIdx - start index of the div array for the match.\n     */\n    updateMatchPosition: function PDFFindController_updateMatchPosition(\n        pageIndex, index, elements, beginIdx) {\n      if (this.selected.matchIdx === index &&\n          this.selected.pageIdx === pageIndex) {\n        var spot = {\n          top: FIND_SCROLL_OFFSET_TOP,\n          left: FIND_SCROLL_OFFSET_LEFT\n        };\n        scrollIntoView(elements[beginIdx], spot,\n                       /* skipOverflowHiddenElements = */ true);\n      }\n    },\n\n    nextPageMatch: function PDFFindController_nextPageMatch() {\n      if (this.resumePageIdx !== null) {\n        console.error('There can only be one pending page.');\n      }\n      do {\n        var pageIdx = this.offset.pageIdx;\n        var matches = this.pageMatches[pageIdx];\n        if (!matches) {\n          // The matches don't exist yet for processing by \"matchesReady\",\n          // so set a resume point for when they do exist.\n          this.resumePageIdx = pageIdx;\n          break;\n        }\n      } while (!this.matchesReady(matches));\n    },\n\n    advanceOffsetPage: function PDFFindController_advanceOffsetPage(previous) {\n      var offset = this.offset;\n      var numPages = this.extractTextPromises.length;\n      offset.pageIdx = (previous ? offset.pageIdx - 1 : offset.pageIdx + 1);\n      offset.matchIdx = null;\n\n      this.pagesToSearch--;\n\n      if (offset.pageIdx >= numPages || offset.pageIdx < 0) {\n        offset.pageIdx = (previous ? numPages - 1 : 0);\n        offset.wrapped = true;\n      }\n    },\n\n    updateMatch: function PDFFindController_updateMatch(found) {\n      var state = FindStates.FIND_NOTFOUND;\n      var wrapped = this.offset.wrapped;\n      this.offset.wrapped = false;\n\n      if (found) {\n        var previousPage = this.selected.pageIdx;\n        this.selected.pageIdx = this.offset.pageIdx;\n        this.selected.matchIdx = this.offset.matchIdx;\n        state = (wrapped ? FindStates.FIND_WRAPPED : FindStates.FIND_FOUND);\n        // Update the currently selected page to wipe out any selected matches.\n        if (previousPage !== -1 && previousPage !== this.selected.pageIdx) {\n          this.updatePage(previousPage);\n        }\n      }\n\n      this.updateUIState(state, this.state.findPrevious);\n      if (this.selected.pageIdx !== -1) {\n        this.updatePage(this.selected.pageIdx);\n      }\n    },\n\n    updateUIResultsCount:\n        function PDFFindController_updateUIResultsCount() {\n      if (this.onUpdateResultsCount) {\n        this.onUpdateResultsCount(this.matchCount);\n      }\n    },\n\n    updateUIState: function PDFFindController_updateUIState(state, previous) {\n      if (this.onUpdateState) {\n        this.onUpdateState(state, previous, this.matchCount);\n      }\n    }\n  };\n  return PDFFindController;\n})();\n\nexport {\n  FindStates,\n  PDFFindController,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/pdf_find_controller.js","/* Copyright 2017 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DefaultExternalServices, PDFViewerApplication } from './app';\nimport { BasePreferences } from './preferences';\nimport { DownloadManager } from './download_manager';\n\nif (typeof PDFJSDev !== 'undefined' && !PDFJSDev.test('GENERIC')) {\n  throw new Error('Module \"pdfjs-web/genericcom\" shall not be used outside ' +\n                  'GENERIC build.');\n}\n\nvar GenericCom = {};\n\nclass GenericPreferences extends BasePreferences {\n  _writeToStorage(prefObj) {\n    return new Promise(function(resolve) {\n      localStorage.setItem('pdfjs.preferences', JSON.stringify(prefObj));\n      resolve();\n    });\n  }\n\n  _readFromStorage(prefObj) {\n    return new Promise(function(resolve) {\n      var readPrefs = JSON.parse(localStorage.getItem('pdfjs.preferences'));\n      resolve(readPrefs);\n    });\n  }\n}\n\nvar GenericExternalServices = Object.create(DefaultExternalServices);\nGenericExternalServices.createDownloadManager = function() {\n  return new DownloadManager();\n};\nGenericExternalServices.createPreferences = function() {\n  return new GenericPreferences();\n};\nPDFViewerApplication.externalServices = GenericExternalServices;\n\nexport {\n  GenericCom,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/genericcom.js","/* Copyright 2017 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable no-extend-native */\n/* globals VBArray, PDFJS, global */\n\n// Skip compatibility checks for the extensions and if we already ran\n// this module.\nif ((typeof PDFJSDev === 'undefined' ||\n     !PDFJSDev.test('FIREFOX || MOZCENTRAL || CHROME')) &&\n    (typeof PDFJS === 'undefined' || !PDFJS.compatibilityChecked)) {\n\nvar globalScope = (typeof window !== 'undefined') ? window :\n                  (typeof global !== 'undefined') ? global :\n                  (typeof self !== 'undefined') ? self : this;\n\nvar userAgent = (typeof navigator !== 'undefined' && navigator.userAgent) || '';\nvar isAndroid = /Android/.test(userAgent);\nvar isAndroidPre3 = /Android\\s[0-2][^\\d]/.test(userAgent);\nvar isAndroidPre5 = /Android\\s[0-4][^\\d]/.test(userAgent);\nvar isChrome = userAgent.indexOf('Chrom') >= 0;\nvar isChromeWithRangeBug = /Chrome\\/(39|40)\\./.test(userAgent);\nvar isIOSChrome = userAgent.indexOf('CriOS') >= 0;\nvar isIE = userAgent.indexOf('Trident') >= 0;\nvar isIOS = /\\b(iPad|iPhone|iPod)(?=;)/.test(userAgent);\nvar isOpera = userAgent.indexOf('Opera') >= 0;\nvar isSafari = /Safari\\//.test(userAgent) &&\n               !/(Chrome\\/|Android\\s)/.test(userAgent);\n\nvar hasDOM = typeof window === 'object' && typeof document === 'object';\n\n// Initializing PDFJS global object here, it case if we need to change/disable\n// some PDF.js features, e.g. range requests\nif (typeof PDFJS === 'undefined') {\n  globalScope.PDFJS = {};\n}\n\nPDFJS.compatibilityChecked = true;\n\n// Checking if the typed arrays are supported\n// Support: iOS<6.0 (subarray), IE<10, Android<4.0\n(function checkTypedArrayCompatibility() {\n  if (typeof Uint8Array !== 'undefined') {\n    // Support: iOS<6.0\n    if (typeof Uint8Array.prototype.subarray === 'undefined') {\n      Uint8Array.prototype.subarray = function subarray(start, end) {\n        return new Uint8Array(this.slice(start, end));\n      };\n      Float32Array.prototype.subarray = function subarray(start, end) {\n        return new Float32Array(this.slice(start, end));\n      };\n    }\n\n    // Support: Android<4.1\n    if (typeof Float64Array === 'undefined') {\n      globalScope.Float64Array = Float32Array;\n    }\n    return;\n  }\n\n  function subarray(start, end) {\n    return new TypedArray(this.slice(start, end));\n  }\n\n  function setArrayOffset(array, offset) {\n    if (arguments.length < 2) {\n      offset = 0;\n    }\n    for (var i = 0, n = array.length; i < n; ++i, ++offset) {\n      this[offset] = array[i] & 0xFF;\n    }\n  }\n\n  function Uint32ArrayView(buffer, length) {\n    this.buffer = buffer;\n    this.byteLength = buffer.length;\n    this.length = length;\n    ensureUint32ArrayViewProps(this.length);\n  }\n  Uint32ArrayView.prototype = Object.create(null);\n\n  var uint32ArrayViewSetters = 0;\n  function createUint32ArrayProp(index) {\n    return {\n      get() {\n        var buffer = this.buffer, offset = index << 2;\n        return (buffer[offset] | (buffer[offset + 1] << 8) |\n          (buffer[offset + 2] << 16) | (buffer[offset + 3] << 24)) >>> 0;\n      },\n      set(value) {\n        var buffer = this.buffer, offset = index << 2;\n        buffer[offset] = value & 255;\n        buffer[offset + 1] = (value >> 8) & 255;\n        buffer[offset + 2] = (value >> 16) & 255;\n        buffer[offset + 3] = (value >>> 24) & 255;\n      }\n    };\n  }\n\n  function ensureUint32ArrayViewProps(length) {\n    while (uint32ArrayViewSetters < length) {\n      Object.defineProperty(Uint32ArrayView.prototype,\n        uint32ArrayViewSetters,\n        createUint32ArrayProp(uint32ArrayViewSetters));\n      uint32ArrayViewSetters++;\n    }\n  }\n\n  function TypedArray(arg1) {\n    var result, i, n;\n    if (typeof arg1 === 'number') {\n      result = [];\n      for (i = 0; i < arg1; ++i) {\n        result[i] = 0;\n      }\n    } else if ('slice' in arg1) {\n      result = arg1.slice(0);\n    } else {\n      result = [];\n      for (i = 0, n = arg1.length; i < n; ++i) {\n        result[i] = arg1[i];\n      }\n    }\n\n    result.subarray = subarray;\n    result.buffer = result;\n    result.byteLength = result.length;\n    result.set = setArrayOffset;\n\n    if (typeof arg1 === 'object' && arg1.buffer) {\n      result.buffer = arg1.buffer;\n    }\n    return result;\n  }\n\n  globalScope.Uint8Array = TypedArray;\n  globalScope.Int8Array = TypedArray;\n\n  // we don't need support for set, byteLength for 32-bit array\n  // so we can use the TypedArray as well\n  globalScope.Int32Array = TypedArray;\n  globalScope.Uint16Array = TypedArray;\n  globalScope.Float32Array = TypedArray;\n  globalScope.Float64Array = TypedArray;\n\n  globalScope.Uint32Array = function () {\n    if (arguments.length === 3) {\n      // Building view for buffer, offset, and length\n      if (arguments[1] !== 0) {\n        throw new Error('offset !== 0 is not supported');\n      }\n      return new Uint32ArrayView(arguments[0], arguments[2]);\n    }\n    return TypedArray.apply(this, arguments);\n  };\n})();\n\n// window.CanvasPixelArray.buffer/.byteLength\n// Support: IE9\n(function canvasPixelArrayBuffer() {\n  if (!hasDOM || !window.CanvasPixelArray) {\n    return;\n  }\n  var cpaProto = window.CanvasPixelArray.prototype;\n  if ('buffer' in cpaProto) {\n    return;\n  }\n  // Trying to fake CanvasPixelArray as Uint8ClampedArray.\n  Object.defineProperty(cpaProto, 'buffer', {\n    get() {\n      return this;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(cpaProto, 'byteLength', {\n    get() {\n      return this.length;\n    },\n    enumerable: false,\n    configurable: true\n  });\n})();\n\n// URL = URL || webkitURL\n// Support: Safari<7, Android 4.2+\n(function normalizeURLObject() {\n  if (!globalScope.URL) {\n    globalScope.URL = globalScope.webkitURL;\n  }\n})();\n\n// Object.defineProperty()?\n// Support: Android<4.0, Safari<5.1\n(function checkObjectDefinePropertyCompatibility() {\n  if (typeof Object.defineProperty !== 'undefined') {\n    var definePropertyPossible = true;\n    try {\n      if (hasDOM) {\n        // some browsers (e.g. safari) cannot use defineProperty() on DOM\n        // objects and thus the native version is not sufficient\n        Object.defineProperty(new Image(), 'id', { value: 'test' });\n      }\n      // ... another test for android gb browser for non-DOM objects\n      var Test = function Test() {};\n      Test.prototype = { get id() { } };\n      Object.defineProperty(new Test(), 'id',\n        { value: '', configurable: true, enumerable: true, writable: false });\n    } catch (e) {\n      definePropertyPossible = false;\n    }\n    if (definePropertyPossible) {\n      return;\n    }\n  }\n\n  Object.defineProperty = function objectDefineProperty(obj, name, def) {\n    delete obj[name];\n    if ('get' in def) {\n      obj.__defineGetter__(name, def['get']);\n    }\n    if ('set' in def) {\n      obj.__defineSetter__(name, def['set']);\n    }\n    if ('value' in def) {\n      obj.__defineSetter__(name, function objectDefinePropertySetter(value) {\n        this.__defineGetter__(name, function objectDefinePropertyGetter() {\n          return value;\n        });\n        return value;\n      });\n      obj[name] = def.value;\n    }\n  };\n})();\n\n\n// No XMLHttpRequest#response?\n// Support: IE<11, Android <4.0\n(function checkXMLHttpRequestResponseCompatibility() {\n  if (typeof XMLHttpRequest === 'undefined') {\n    return;\n  }\n  var xhrPrototype = XMLHttpRequest.prototype;\n  var xhr = new XMLHttpRequest();\n  if (!('overrideMimeType' in xhr)) {\n    // IE10 might have response, but not overrideMimeType\n    // Support: IE10\n    Object.defineProperty(xhrPrototype, 'overrideMimeType', {\n      value: function xmlHttpRequestOverrideMimeType(mimeType) {}\n    });\n  }\n  if ('responseType' in xhr) {\n    return;\n  }\n\n  Object.defineProperty(xhrPrototype, 'responseType', {\n    get: function xmlHttpRequestGetResponseType() {\n      return this._responseType || 'text';\n    },\n    set: function xmlHttpRequestSetResponseType(value) {\n      if (value === 'text' || value === 'arraybuffer') {\n        this._responseType = value;\n        if (value === 'arraybuffer' &&\n            typeof this.overrideMimeType === 'function') {\n          this.overrideMimeType('text/plain; charset=x-user-defined');\n        }\n      }\n    }\n  });\n\n  // Support: IE9\n  if (typeof VBArray !== 'undefined') {\n    Object.defineProperty(xhrPrototype, 'response', {\n      get: function xmlHttpRequestResponseGet() {\n        if (this.responseType === 'arraybuffer') {\n          return new Uint8Array(new VBArray(this.responseBody).toArray());\n        }\n        return this.responseText;\n      }\n    });\n    return;\n  }\n\n  Object.defineProperty(xhrPrototype, 'response', {\n    get: function xmlHttpRequestResponseGet() {\n      if (this.responseType !== 'arraybuffer') {\n        return this.responseText;\n      }\n      var text = this.responseText;\n      var i, n = text.length;\n      var result = new Uint8Array(n);\n      for (i = 0; i < n; ++i) {\n        result[i] = text.charCodeAt(i) & 0xFF;\n      }\n      return result.buffer;\n    }\n  });\n})();\n\n// window.btoa (base64 encode function) ?\n// Support: IE<10\n(function checkWindowBtoaCompatibility() {\n  if ('btoa' in globalScope) {\n    return;\n  }\n\n  var digits =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n  globalScope.btoa = function (chars) {\n    var buffer = '';\n    var i, n;\n    for (i = 0, n = chars.length; i < n; i += 3) {\n      var b1 = chars.charCodeAt(i) & 0xFF;\n      var b2 = chars.charCodeAt(i + 1) & 0xFF;\n      var b3 = chars.charCodeAt(i + 2) & 0xFF;\n      var d1 = b1 >> 2, d2 = ((b1 & 3) << 4) | (b2 >> 4);\n      var d3 = i + 1 < n ? ((b2 & 0xF) << 2) | (b3 >> 6) : 64;\n      var d4 = i + 2 < n ? (b3 & 0x3F) : 64;\n      buffer += (digits.charAt(d1) + digits.charAt(d2) +\n                 digits.charAt(d3) + digits.charAt(d4));\n    }\n    return buffer;\n  };\n})();\n\n// window.atob (base64 encode function)?\n// Support: IE<10\n(function checkWindowAtobCompatibility() {\n  if ('atob' in globalScope) {\n    return;\n  }\n\n  // https://github.com/davidchambers/Base64.js\n  var digits =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  globalScope.atob = function (input) {\n    input = input.replace(/=+$/, '');\n    if (input.length % 4 === 1) {\n      throw new Error('bad atob input');\n    }\n    for (\n      // initialize result and counters\n      var bc = 0, bs, buffer, idx = 0, output = '';\n      // get next character\n      (buffer = input.charAt(idx++));\n      // character found in table?\n      // initialize bit storage and add its ascii value\n      ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\n        // and if not first of each 4 characters,\n        // convert the first 8 bits to one ascii character\n        bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0\n    ) {\n      // try to find character in table (0-63, not found => -1)\n      buffer = digits.indexOf(buffer);\n    }\n    return output;\n  };\n})();\n\n// Function.prototype.bind?\n// Support: Android<4.0, iOS<6.0\n(function checkFunctionPrototypeBindCompatibility() {\n  if (typeof Function.prototype.bind !== 'undefined') {\n    return;\n  }\n\n  Function.prototype.bind = function functionPrototypeBind(obj) {\n    var fn = this, headArgs = Array.prototype.slice.call(arguments, 1);\n    var bound = function functionPrototypeBindBound() {\n      var args = headArgs.concat(Array.prototype.slice.call(arguments));\n      return fn.apply(obj, args);\n    };\n    return bound;\n  };\n})();\n\n// HTMLElement dataset property\n// Support: IE<11, Safari<5.1, Android<4.0\n(function checkDatasetProperty() {\n  if (!hasDOM) {\n    return;\n  }\n  var div = document.createElement('div');\n  if ('dataset' in div) {\n    return; // dataset property exists\n  }\n\n  Object.defineProperty(HTMLElement.prototype, 'dataset', {\n    get() {\n      if (this._dataset) {\n        return this._dataset;\n      }\n\n      var dataset = {};\n      for (var j = 0, jj = this.attributes.length; j < jj; j++) {\n        var attribute = this.attributes[j];\n        if (attribute.name.substring(0, 5) !== 'data-') {\n          continue;\n        }\n        var key = attribute.name.substring(5).replace(/\\-([a-z])/g,\n          function(all, ch) {\n            return ch.toUpperCase();\n          });\n        dataset[key] = attribute.value;\n      }\n\n      Object.defineProperty(this, '_dataset', {\n        value: dataset,\n        writable: false,\n        enumerable: false\n      });\n      return dataset;\n    },\n    enumerable: true\n  });\n})();\n\n// HTMLElement classList property\n// Support: IE<10, Android<4.0, iOS<5.0\n(function checkClassListProperty() {\n  function changeList(element, itemName, add, remove) {\n    var s = element.className || '';\n    var list = s.split(/\\s+/g);\n    if (list[0] === '') {\n      list.shift();\n    }\n    var index = list.indexOf(itemName);\n    if (index < 0 && add) {\n      list.push(itemName);\n    }\n    if (index >= 0 && remove) {\n      list.splice(index, 1);\n    }\n    element.className = list.join(' ');\n    return (index >= 0);\n  }\n\n  if (!hasDOM) {\n    return;\n  }\n\n  var div = document.createElement('div');\n  if ('classList' in div) {\n    return; // classList property exists\n  }\n\n  var classListPrototype = {\n    add(name) {\n      changeList(this.element, name, true, false);\n    },\n    contains(name) {\n      return changeList(this.element, name, false, false);\n    },\n    remove(name) {\n      changeList(this.element, name, false, true);\n    },\n    toggle(name) {\n      changeList(this.element, name, true, true);\n    }\n  };\n\n  Object.defineProperty(HTMLElement.prototype, 'classList', {\n    get() {\n      if (this._classList) {\n        return this._classList;\n      }\n\n      var classList = Object.create(classListPrototype, {\n        element: {\n          value: this,\n          writable: false,\n          enumerable: true\n        }\n      });\n      Object.defineProperty(this, '_classList', {\n        value: classList,\n        writable: false,\n        enumerable: false\n      });\n      return classList;\n    },\n    enumerable: true\n  });\n})();\n\n// Checking if worker has console support. Forwarding all messages to the main\n// thread if console object is absent.\n(function checkWorkerConsoleCompatibility() {\n  if (typeof importScripts === 'undefined' || 'console' in globalScope) {\n    return;\n  }\n\n  var consoleTimer = {};\n\n  var workerConsole = {\n    log: function log() {\n      var args = Array.prototype.slice.call(arguments);\n      globalScope.postMessage({\n        targetName: 'main',\n        action: 'console_log',\n        data: args\n      });\n    },\n\n    error: function error() {\n      var args = Array.prototype.slice.call(arguments);\n      globalScope.postMessage({\n        targetName: 'main',\n        action: 'console_error',\n        data: args\n      });\n    },\n\n    time: function time(name) {\n      consoleTimer[name] = Date.now();\n    },\n\n    timeEnd: function timeEnd(name) {\n      var time = consoleTimer[name];\n      if (!time) {\n        throw new Error('Unknown timer name ' + name);\n      }\n      this.log('Timer:', name, Date.now() - time);\n    }\n  };\n\n  globalScope.console = workerConsole;\n})();\n\n// Check console compatibility\n// In older IE versions the console object is not available\n// unless console is open.\n// Support: IE<10\n(function checkConsoleCompatibility() {\n  if (!hasDOM) {\n    return;\n  }\n  if (!('console' in window)) {\n    window.console = {\n      log() {},\n      error() {},\n      warn() {}\n    };\n    return;\n  }\n  if (!('bind' in console.log)) {\n    // native functions in IE9 might not have bind\n    console.log = (function(fn) {\n      return function(msg) {\n        return fn(msg);\n      };\n    })(console.log);\n    console.error = (function(fn) {\n      return function(msg) {\n        return fn(msg);\n      };\n    })(console.error);\n    console.warn = (function(fn) {\n      return function(msg) {\n        return fn(msg);\n      };\n    })(console.warn);\n    return;\n  }\n})();\n\n// Check onclick compatibility in Opera\n// Support: Opera<15\n(function checkOnClickCompatibility() {\n  // workaround for reported Opera bug DSK-354448:\n  // onclick fires on disabled buttons with opaque content\n  function ignoreIfTargetDisabled(event) {\n    if (isDisabled(event.target)) {\n      event.stopPropagation();\n    }\n  }\n  function isDisabled(node) {\n    return node.disabled || (node.parentNode && isDisabled(node.parentNode));\n  }\n  if (isOpera) {\n    // use browser detection since we cannot feature-check this bug\n    document.addEventListener('click', ignoreIfTargetDisabled, true);\n  }\n})();\n\n// Checks if possible to use URL.createObjectURL()\n// Support: IE, Chrome on iOS\n(function checkOnBlobSupport() {\n  // sometimes IE and Chrome on iOS loosing the data created with\n  // createObjectURL(), see #3977 and #8081\n  if (isIE || isIOSChrome) {\n    PDFJS.disableCreateObjectURL = true;\n  }\n})();\n\n// Checks if navigator.language is supported\n(function checkNavigatorLanguage() {\n  if (typeof navigator === 'undefined') {\n    return;\n  }\n  if ('language' in navigator) {\n    return;\n  }\n  PDFJS.locale = navigator.userLanguage || 'en-US';\n})();\n\n// Support: Safari 6.0+, Android<3.0, Chrome 39/40, iOS\n(function checkRangeRequests() {\n  // Safari has issues with cached range requests see:\n  // https://github.com/mozilla/pdf.js/issues/3260\n  // Last tested with version 6.0.4.\n\n  // Older versions of Android (pre 3.0) has issues with range requests, see:\n  // https://github.com/mozilla/pdf.js/issues/3381.\n  // Make sure that we only match webkit-based Android browsers,\n  // since Firefox/Fennec works as expected.\n\n  // Range requests are broken in Chrome 39 and 40, https://crbug.com/442318\n  if (isSafari || isAndroidPre3 || isChromeWithRangeBug || isIOS) {\n    PDFJS.disableRange = true;\n    PDFJS.disableStream = true;\n  }\n})();\n\n// Check if the browser supports manipulation of the history.\n// Support: IE<10, Android<4.2\n(function checkHistoryManipulation() {\n  if (!hasDOM) {\n    return;\n  }\n  // Android 2.x has so buggy pushState support that it was removed in\n  // Android 3.0 and restored as late as in Android 4.2.\n  // Support: Android 2.x\n  if (!history.pushState || isAndroidPre3) {\n    PDFJS.disableHistory = true;\n  }\n})();\n\n// Support: IE<11, Chrome<21, Android<4.4, Safari<6\n(function checkSetPresenceInImageData() {\n  if (!hasDOM) {\n    return;\n  }\n  // IE < 11 will use window.CanvasPixelArray which lacks set function.\n  if (window.CanvasPixelArray) {\n    if (typeof window.CanvasPixelArray.prototype.set !== 'function') {\n      window.CanvasPixelArray.prototype.set = function(arr) {\n        for (var i = 0, ii = this.length; i < ii; i++) {\n          this[i] = arr[i];\n        }\n      };\n    }\n  } else {\n    // Old Chrome and Android use an inaccessible CanvasPixelArray prototype.\n    // Because we cannot feature detect it, we rely on user agent parsing.\n    var polyfill = false, versionMatch;\n    if (isChrome) {\n      versionMatch = userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\n      // Chrome < 21 lacks the set function.\n      polyfill = versionMatch && parseInt(versionMatch[2]) < 21;\n    } else if (isAndroid) {\n      // Android < 4.4 lacks the set function.\n      // Android >= 4.4 will contain Chrome in the user agent,\n      // thus pass the Chrome check above and not reach this block.\n      polyfill = isAndroidPre5;\n    } else if (isSafari) {\n      versionMatch = userAgent.\n        match(/Version\\/([0-9]+)\\.([0-9]+)\\.([0-9]+) Safari\\//);\n      // Safari < 6 lacks the set function.\n      polyfill = versionMatch && parseInt(versionMatch[1]) < 6;\n    }\n\n    if (polyfill) {\n      var contextPrototype = window.CanvasRenderingContext2D.prototype;\n      var createImageData = contextPrototype.createImageData;\n      contextPrototype.createImageData = function(w, h) {\n        var imageData = createImageData.call(this, w, h);\n        imageData.data.set = function(arr) {\n          for (var i = 0, ii = this.length; i < ii; i++) {\n            this[i] = arr[i];\n          }\n        };\n        return imageData;\n      };\n      // this closure will be kept referenced, so clear its vars\n      contextPrototype = null;\n    }\n  }\n})();\n\n// Support: IE<10, Android<4.0, iOS\n(function checkRequestAnimationFrame() {\n  function installFakeAnimationFrameFunctions() {\n    window.requestAnimationFrame = function (callback) {\n      return window.setTimeout(callback, 20);\n    };\n    window.cancelAnimationFrame = function (timeoutID) {\n      window.clearTimeout(timeoutID);\n    };\n  }\n\n  if (!hasDOM) {\n    return;\n  }\n  if (isIOS) {\n    // requestAnimationFrame on iOS is broken, replacing with fake one.\n    installFakeAnimationFrameFunctions();\n    return;\n  }\n  if ('requestAnimationFrame' in window) {\n    return;\n  }\n  window.requestAnimationFrame = window.mozRequestAnimationFrame ||\n                                 window.webkitRequestAnimationFrame;\n  if (window.requestAnimationFrame) {\n    return;\n  }\n  installFakeAnimationFrameFunctions();\n})();\n\n// Support: Android, iOS\n(function checkCanvasSizeLimitation() {\n  if (isIOS || isAndroid) {\n    // 5MP\n    PDFJS.maxCanvasPixels = 5242880;\n  }\n})();\n\n// Disable fullscreen support for certain problematic configurations.\n// Support: IE11+ (when embedded).\n(function checkFullscreenSupport() {\n  if (!hasDOM) {\n    return;\n  }\n  if (isIE && window.parent !== window) {\n    PDFJS.disableFullscreen = true;\n  }\n})();\n\n// Provides document.currentScript support\n// Support: IE, Chrome<29.\n(function checkCurrentScript() {\n  if (!hasDOM) {\n    return;\n  }\n  if ('currentScript' in document) {\n    return;\n  }\n  Object.defineProperty(document, 'currentScript', {\n    get() {\n      var scripts = document.getElementsByTagName('script');\n      return scripts[scripts.length - 1];\n    },\n    enumerable: true,\n    configurable: true\n  });\n})();\n\n// Provides `input.type = 'type'` runtime failure protection.\n// Support: IE9,10.\n(function checkInputTypeNumberAssign() {\n  if (!hasDOM) {\n    return;\n  }\n  var el = document.createElement('input');\n  try {\n    el.type = 'number';\n  } catch (ex) {\n    var inputProto = el.constructor.prototype;\n    var typeProperty = Object.getOwnPropertyDescriptor(inputProto, 'type');\n    Object.defineProperty(inputProto, 'type', {\n      get() {\n        return typeProperty.get.call(this);\n      },\n      set(value) {\n        typeProperty.set.call(this, value === 'number' ? 'text' : value);\n      },\n      enumerable: true,\n      configurable: true\n    });\n  }\n})();\n\n// Provides correct document.readyState value for legacy browsers.\n// Support: IE9,10.\n(function checkDocumentReadyState() {\n  if (!hasDOM) {\n    return;\n  }\n  if (!document.attachEvent) {\n    return;\n  }\n  var documentProto = document.constructor.prototype;\n  var readyStateProto = Object.getOwnPropertyDescriptor(documentProto,\n                                                        'readyState');\n  Object.defineProperty(documentProto, 'readyState', {\n    get() {\n      var value = readyStateProto.get.call(this);\n      return value === 'interactive' ? 'loading' : value;\n    },\n    set(value) {\n      readyStateProto.set.call(this, value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n})();\n\n// Provides support for ChildNode.remove in legacy browsers.\n// Support: IE.\n(function checkChildNodeRemove() {\n  if (!hasDOM) {\n    return;\n  }\n  if (typeof Element.prototype.remove !== 'undefined') {\n    return;\n  }\n  Element.prototype.remove = function () {\n    if (this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n})();\n\n/**\n * Polyfill for Promises:\n * The following promise implementation tries to generally implement the\n * Promise/A+ spec. Some notable differences from other promise libraries are:\n * - There currently isn't a separate deferred and promise object.\n * - Unhandled rejections eventually show an error if they aren't handled.\n *\n * Based off of the work in:\n * https://bugzilla.mozilla.org/show_bug.cgi?id=810490\n */\n(function checkPromise() {\n  if (globalScope.Promise) {\n    // Promises existing in the DOM/Worker, checking presence of all/resolve\n    if (typeof globalScope.Promise.all !== 'function') {\n      globalScope.Promise.all = function (iterable) {\n        var count = 0, results = [], resolve, reject;\n        var promise = new globalScope.Promise(function (resolve_, reject_) {\n          resolve = resolve_;\n          reject = reject_;\n        });\n        iterable.forEach(function (p, i) {\n          count++;\n          p.then(function (result) {\n            results[i] = result;\n            count--;\n            if (count === 0) {\n              resolve(results);\n            }\n          }, reject);\n        });\n        if (count === 0) {\n          resolve(results);\n        }\n        return promise;\n      };\n    }\n    if (typeof globalScope.Promise.resolve !== 'function') {\n      globalScope.Promise.resolve = function (value) {\n        return new globalScope.Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n    }\n    if (typeof globalScope.Promise.reject !== 'function') {\n      globalScope.Promise.reject = function (reason) {\n        return new globalScope.Promise(function (resolve, reject) {\n          reject(reason);\n        });\n      };\n    }\n    if (typeof globalScope.Promise.prototype.catch !== 'function') {\n      globalScope.Promise.prototype.catch = function (onReject) {\n        return globalScope.Promise.prototype.then(undefined, onReject);\n      };\n    }\n    return;\n  }\n\n  var STATUS_PENDING = 0;\n  var STATUS_RESOLVED = 1;\n  var STATUS_REJECTED = 2;\n\n  // In an attempt to avoid silent exceptions, unhandled rejections are\n  // tracked and if they aren't handled in a certain amount of time an\n  // error is logged.\n  var REJECTION_TIMEOUT = 500;\n\n  var HandlerManager = {\n    handlers: [],\n    running: false,\n    unhandledRejections: [],\n    pendingRejectionCheck: false,\n\n    scheduleHandlers: function scheduleHandlers(promise) {\n      if (promise._status === STATUS_PENDING) {\n        return;\n      }\n\n      this.handlers = this.handlers.concat(promise._handlers);\n      promise._handlers = [];\n\n      if (this.running) {\n        return;\n      }\n      this.running = true;\n\n      setTimeout(this.runHandlers.bind(this), 0);\n    },\n\n    runHandlers: function runHandlers() {\n      var RUN_TIMEOUT = 1; // ms\n      var timeoutAt = Date.now() + RUN_TIMEOUT;\n      while (this.handlers.length > 0) {\n        var handler = this.handlers.shift();\n\n        var nextStatus = handler.thisPromise._status;\n        var nextValue = handler.thisPromise._value;\n\n        try {\n          if (nextStatus === STATUS_RESOLVED) {\n            if (typeof handler.onResolve === 'function') {\n              nextValue = handler.onResolve(nextValue);\n            }\n          } else if (typeof handler.onReject === 'function') {\n              nextValue = handler.onReject(nextValue);\n              nextStatus = STATUS_RESOLVED;\n\n              if (handler.thisPromise._unhandledRejection) {\n                this.removeUnhandeledRejection(handler.thisPromise);\n              }\n          }\n        } catch (ex) {\n          nextStatus = STATUS_REJECTED;\n          nextValue = ex;\n        }\n\n        handler.nextPromise._updateStatus(nextStatus, nextValue);\n        if (Date.now() >= timeoutAt) {\n          break;\n        }\n      }\n\n      if (this.handlers.length > 0) {\n        setTimeout(this.runHandlers.bind(this), 0);\n        return;\n      }\n\n      this.running = false;\n    },\n\n    addUnhandledRejection: function addUnhandledRejection(promise) {\n      this.unhandledRejections.push({\n        promise,\n        time: Date.now()\n      });\n      this.scheduleRejectionCheck();\n    },\n\n    removeUnhandeledRejection: function removeUnhandeledRejection(promise) {\n      promise._unhandledRejection = false;\n      for (var i = 0; i < this.unhandledRejections.length; i++) {\n        if (this.unhandledRejections[i].promise === promise) {\n          this.unhandledRejections.splice(i);\n          i--;\n        }\n      }\n    },\n\n    scheduleRejectionCheck: function scheduleRejectionCheck() {\n      if (this.pendingRejectionCheck) {\n        return;\n      }\n      this.pendingRejectionCheck = true;\n      setTimeout(() => {\n        this.pendingRejectionCheck = false;\n        var now = Date.now();\n        for (var i = 0; i < this.unhandledRejections.length; i++) {\n          if (now - this.unhandledRejections[i].time > REJECTION_TIMEOUT) {\n            var unhandled = this.unhandledRejections[i].promise._value;\n            var msg = 'Unhandled rejection: ' + unhandled;\n            if (unhandled.stack) {\n              msg += '\\n' + unhandled.stack;\n            }\n            // Raising and catching the error, so debugger can break on it.\n            try {\n              throw new Error(msg);\n            } catch (_) {\n              console.warn(msg);\n            }\n            this.unhandledRejections.splice(i);\n            i--;\n          }\n        }\n        if (this.unhandledRejections.length) {\n          this.scheduleRejectionCheck();\n        }\n      }, REJECTION_TIMEOUT);\n    }\n  };\n\n  var Promise = function Promise(resolver) {\n    this._status = STATUS_PENDING;\n    this._handlers = [];\n    try {\n      resolver.call(this, this._resolve.bind(this), this._reject.bind(this));\n    } catch (e) {\n      this._reject(e);\n    }\n  };\n\n  /**\n   * Builds a promise that is resolved when all the passed in promises are\n   * resolved.\n   * @param {array} promises array of data and/or promises to wait for.\n   * @return {Promise} New dependent promise.\n   */\n  Promise.all = function Promise_all(promises) {\n    var resolveAll, rejectAll;\n    var deferred = new Promise(function (resolve, reject) {\n      resolveAll = resolve;\n      rejectAll = reject;\n    });\n    var unresolved = promises.length;\n    var results = [];\n    if (unresolved === 0) {\n      resolveAll(results);\n      return deferred;\n    }\n    function reject(reason) {\n      if (deferred._status === STATUS_REJECTED) {\n        return;\n      }\n      results = [];\n      rejectAll(reason);\n    }\n    for (var i = 0, ii = promises.length; i < ii; ++i) {\n      var promise = promises[i];\n      var resolve = (function(i) {\n        return function(value) {\n          if (deferred._status === STATUS_REJECTED) {\n            return;\n          }\n          results[i] = value;\n          unresolved--;\n          if (unresolved === 0) {\n            resolveAll(results);\n          }\n        };\n      })(i);\n      if (Promise.isPromise(promise)) {\n        promise.then(resolve, reject);\n      } else {\n        resolve(promise);\n      }\n    }\n    return deferred;\n  };\n\n  /**\n   * Checks if the value is likely a promise (has a 'then' function).\n   * @return {boolean} true if value is thenable\n   */\n  Promise.isPromise = function Promise_isPromise(value) {\n    return value && typeof value.then === 'function';\n  };\n\n  /**\n   * Creates resolved promise\n   * @param value resolve value\n   * @returns {Promise}\n   */\n  Promise.resolve = function Promise_resolve(value) {\n    return new Promise(function (resolve) {\n      resolve(value);\n    });\n  };\n\n  /**\n   * Creates rejected promise\n   * @param reason rejection value\n   * @returns {Promise}\n   */\n  Promise.reject = function Promise_reject(reason) {\n    return new Promise(function (resolve, reject) {\n      reject(reason);\n    });\n  };\n\n  Promise.prototype = {\n    _status: null,\n    _value: null,\n    _handlers: null,\n    _unhandledRejection: null,\n\n    _updateStatus: function Promise__updateStatus(status, value) {\n      if (this._status === STATUS_RESOLVED ||\n          this._status === STATUS_REJECTED) {\n        return;\n      }\n\n      if (status === STATUS_RESOLVED &&\n          Promise.isPromise(value)) {\n        value.then(this._updateStatus.bind(this, STATUS_RESOLVED),\n                   this._updateStatus.bind(this, STATUS_REJECTED));\n        return;\n      }\n\n      this._status = status;\n      this._value = value;\n\n      if (status === STATUS_REJECTED && this._handlers.length === 0) {\n        this._unhandledRejection = true;\n        HandlerManager.addUnhandledRejection(this);\n      }\n\n      HandlerManager.scheduleHandlers(this);\n    },\n\n    _resolve: function Promise_resolve(value) {\n      this._updateStatus(STATUS_RESOLVED, value);\n    },\n\n    _reject: function Promise_reject(reason) {\n      this._updateStatus(STATUS_REJECTED, reason);\n    },\n\n    then: function Promise_then(onResolve, onReject) {\n      var nextPromise = new Promise(function (resolve, reject) {\n        this.resolve = resolve;\n        this.reject = reject;\n      });\n      this._handlers.push({\n        thisPromise: this,\n        onResolve,\n        onReject,\n        nextPromise,\n      });\n      HandlerManager.scheduleHandlers(this);\n      return nextPromise;\n    },\n\n    catch: function Promise_catch(onReject) {\n      return this.then(undefined, onReject);\n    }\n  };\n\n  globalScope.Promise = Promise;\n})();\n\n(function checkWeakMap() {\n  if (globalScope.WeakMap) {\n    return;\n  }\n\n  var id = 0;\n  function WeakMap() {\n    this.id = '$weakmap' + (id++);\n  }\n  WeakMap.prototype = {\n    has(obj) {\n      return !!Object.getOwnPropertyDescriptor(obj, this.id);\n    },\n    get(obj, defaultValue) {\n      return this.has(obj) ? obj[this.id] : defaultValue;\n    },\n    set(obj, value) {\n      Object.defineProperty(obj, this.id, {\n        value,\n        enumerable: false,\n        configurable: true\n      });\n    },\n    delete(obj) {\n      delete obj[this.id];\n    }\n  };\n\n  globalScope.WeakMap = WeakMap;\n})();\n\n// Polyfill from https://github.com/Polymer/URL\n/* Any copyright is dedicated to the Public Domain.\n * http://creativecommons.org/publicdomain/zero/1.0/ */\n(function checkURLConstructor() {\n  // feature detect for URL constructor\n  var hasWorkingUrl = false;\n  try {\n    if (typeof URL === 'function' &&\n        typeof URL.prototype === 'object' &&\n        ('origin' in URL.prototype)) {\n      var u = new URL('b', 'http://a');\n      u.pathname = 'c%20d';\n      hasWorkingUrl = u.href === 'http://a/c%20d';\n    }\n  } catch (e) { }\n\n  if (hasWorkingUrl) {\n    return;\n  }\n\n  var relative = Object.create(null);\n  relative['ftp'] = 21;\n  relative['file'] = 0;\n  relative['gopher'] = 70;\n  relative['http'] = 80;\n  relative['https'] = 443;\n  relative['ws'] = 80;\n  relative['wss'] = 443;\n\n  var relativePathDotMapping = Object.create(null);\n  relativePathDotMapping['%2e'] = '.';\n  relativePathDotMapping['.%2e'] = '..';\n  relativePathDotMapping['%2e.'] = '..';\n  relativePathDotMapping['%2e%2e'] = '..';\n\n  function isRelativeScheme(scheme) {\n    return relative[scheme] !== undefined;\n  }\n\n  function invalid() {\n    clear.call(this);\n    this._isInvalid = true;\n  }\n\n  function IDNAToASCII(h) {\n    if (h === '') {\n      invalid.call(this);\n    }\n    // XXX\n    return h.toLowerCase();\n  }\n\n  function percentEscape(c) {\n    var unicode = c.charCodeAt(0);\n    if (unicode > 0x20 &&\n       unicode < 0x7F &&\n       // \" # < > ? `\n       [0x22, 0x23, 0x3C, 0x3E, 0x3F, 0x60].indexOf(unicode) === -1\n      ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  function percentEscapeQuery(c) {\n    // XXX This actually needs to encode c using encoding and then\n    // convert the bytes one-by-one.\n\n    var unicode = c.charCodeAt(0);\n    if (unicode > 0x20 &&\n       unicode < 0x7F &&\n       // \" # < > ` (do not escape '?')\n       [0x22, 0x23, 0x3C, 0x3E, 0x60].indexOf(unicode) === -1\n      ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  var EOF, ALPHA = /[a-zA-Z]/,\n      ALPHANUMERIC = /[a-zA-Z0-9\\+\\-\\.]/;\n\n  function parse(input, stateOverride, base) {\n    function err(message) {\n      errors.push(message);\n    }\n\n    var state = stateOverride || 'scheme start',\n        cursor = 0,\n        buffer = '',\n        seenAt = false,\n        seenBracket = false,\n        errors = [];\n\n    loop: while ((input[cursor - 1] !== EOF || cursor === 0) &&\n                 !this._isInvalid) {\n      var c = input[cursor];\n      switch (state) {\n        case 'scheme start':\n          if (c && ALPHA.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n            state = 'scheme';\n          } else if (!stateOverride) {\n            buffer = '';\n            state = 'no scheme';\n            continue;\n          } else {\n            err('Invalid scheme.');\n            break loop;\n          }\n          break;\n\n        case 'scheme':\n          if (c && ALPHANUMERIC.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n          } else if (c === ':') {\n            this._scheme = buffer;\n            buffer = '';\n            if (stateOverride) {\n              break loop;\n            }\n            if (isRelativeScheme(this._scheme)) {\n              this._isRelative = true;\n            }\n            if (this._scheme === 'file') {\n              state = 'relative';\n            } else if (this._isRelative && base &&\n                       base._scheme === this._scheme) {\n              state = 'relative or authority';\n            } else if (this._isRelative) {\n              state = 'authority first slash';\n            } else {\n              state = 'scheme data';\n            }\n          } else if (!stateOverride) {\n            buffer = '';\n            cursor = 0;\n            state = 'no scheme';\n            continue;\n          } else if (c === EOF) {\n            break loop;\n          } else {\n            err('Code point not allowed in scheme: ' + c);\n            break loop;\n          }\n          break;\n\n        case 'scheme data':\n          if (c === '?') {\n            this._query = '?';\n            state = 'query';\n          } else if (c === '#') {\n            this._fragment = '#';\n            state = 'fragment';\n          } else {\n            // XXX error handling\n            if (c !== EOF && c !== '\\t' && c !== '\\n' && c !== '\\r') {\n              this._schemeData += percentEscape(c);\n            }\n          }\n          break;\n\n        case 'no scheme':\n          if (!base || !(isRelativeScheme(base._scheme))) {\n            err('Missing scheme.');\n            invalid.call(this);\n          } else {\n            state = 'relative';\n            continue;\n          }\n          break;\n\n        case 'relative or authority':\n          if (c === '/' && input[cursor + 1] === '/') {\n            state = 'authority ignore slashes';\n          } else {\n            err('Expected /, got: ' + c);\n            state = 'relative';\n            continue;\n          }\n          break;\n\n        case 'relative':\n          this._isRelative = true;\n          if (this._scheme !== 'file') {\n            this._scheme = base._scheme;\n          }\n          if (c === EOF) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._username = base._username;\n            this._password = base._password;\n            break loop;\n          } else if (c === '/' || c === '\\\\') {\n            if (c === '\\\\') {\n              err('\\\\ is an invalid code point.');\n            }\n            state = 'relative slash';\n          } else if (c === '?') {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = '?';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'query';\n          } else if (c === '#') {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._fragment = '#';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'fragment';\n          } else {\n            var nextC = input[cursor + 1];\n            var nextNextC = input[cursor + 2];\n            if (this._scheme !== 'file' || !ALPHA.test(c) ||\n                (nextC !== ':' && nextC !== '|') ||\n                (nextNextC !== EOF && nextNextC !== '/' && nextNextC !== '\\\\' &&\n                 nextNextC !== '?' && nextNextC !== '#')) {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n              this._path = base._path.slice();\n              this._path.pop();\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'relative slash':\n          if (c === '/' || c === '\\\\') {\n            if (c === '\\\\') {\n              err('\\\\ is an invalid code point.');\n            }\n            if (this._scheme === 'file') {\n              state = 'file host';\n            } else {\n              state = 'authority ignore slashes';\n            }\n          } else {\n            if (this._scheme !== 'file') {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'authority first slash':\n          if (c === '/') {\n            state = 'authority second slash';\n          } else {\n            err('Expected \\'/\\', got: ' + c);\n            state = 'authority ignore slashes';\n            continue;\n          }\n          break;\n\n        case 'authority second slash':\n          state = 'authority ignore slashes';\n          if (c !== '/') {\n            err('Expected \\'/\\', got: ' + c);\n            continue;\n          }\n          break;\n\n        case 'authority ignore slashes':\n          if (c !== '/' && c !== '\\\\') {\n            state = 'authority';\n            continue;\n          } else {\n            err('Expected authority, got: ' + c);\n          }\n          break;\n\n        case 'authority':\n          if (c === '@') {\n            if (seenAt) {\n              err('@ already seen.');\n              buffer += '%40';\n            }\n            seenAt = true;\n            for (var i = 0; i < buffer.length; i++) {\n              var cp = buffer[i];\n              if (cp === '\\t' || cp === '\\n' || cp === '\\r') {\n                err('Invalid whitespace in authority.');\n                continue;\n              }\n              // XXX check URL code points\n              if (cp === ':' && this._password === null) {\n                this._password = '';\n                continue;\n              }\n              var tempC = percentEscape(cp);\n              if (this._password !== null) {\n                this._password += tempC;\n              } else {\n                this._username += tempC;\n              }\n            }\n            buffer = '';\n          } else if (c === EOF || c === '/' || c === '\\\\' ||\n                     c === '?' || c === '#') {\n            cursor -= buffer.length;\n            buffer = '';\n            state = 'host';\n            continue;\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'file host':\n          if (c === EOF || c === '/' || c === '\\\\' || c === '?' || c === '#') {\n            if (buffer.length === 2 && ALPHA.test(buffer[0]) &&\n                (buffer[1] === ':' || buffer[1] === '|')) {\n              state = 'relative path';\n            } else if (buffer.length === 0) {\n              state = 'relative path start';\n            } else {\n              this._host = IDNAToASCII.call(this, buffer);\n              buffer = '';\n              state = 'relative path start';\n            }\n            continue;\n          } else if (c === '\\t' || c === '\\n' || c === '\\r') {\n            err('Invalid whitespace in file host.');\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'host':\n        case 'hostname':\n          if (c === ':' && !seenBracket) {\n            // XXX host parsing\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'port';\n            if (stateOverride === 'hostname') {\n              break loop;\n            }\n          } else if (c === EOF || c === '/' ||\n                     c === '\\\\' || c === '?' || c === '#') {\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'relative path start';\n            if (stateOverride) {\n              break loop;\n            }\n            continue;\n          } else if (c !== '\\t' && c !== '\\n' && c !== '\\r') {\n            if (c === '[') {\n              seenBracket = true;\n            } else if (c === ']') {\n              seenBracket = false;\n            }\n            buffer += c;\n          } else {\n            err('Invalid code point in host/hostname: ' + c);\n          }\n          break;\n\n        case 'port':\n          if (/[0-9]/.test(c)) {\n            buffer += c;\n          } else if (c === EOF || c === '/' || c === '\\\\' ||\n                     c === '?' || c === '#' || stateOverride) {\n            if (buffer !== '') {\n              var temp = parseInt(buffer, 10);\n              if (temp !== relative[this._scheme]) {\n                this._port = temp + '';\n              }\n              buffer = '';\n            }\n            if (stateOverride) {\n              break loop;\n            }\n            state = 'relative path start';\n            continue;\n          } else if (c === '\\t' || c === '\\n' || c === '\\r') {\n            err('Invalid code point in port: ' + c);\n          } else {\n            invalid.call(this);\n          }\n          break;\n\n        case 'relative path start':\n          if (c === '\\\\') {\n            err('\\'\\\\\\' not allowed in path.');\n          }\n          state = 'relative path';\n          if (c !== '/' && c !== '\\\\') {\n            continue;\n          }\n          break;\n\n        case 'relative path':\n          if (c === EOF || c === '/' || c === '\\\\' ||\n              (!stateOverride && (c === '?' || c === '#'))) {\n            if (c === '\\\\') {\n              err('\\\\ not allowed in relative path.');\n            }\n            var tmp;\n            if ((tmp = relativePathDotMapping[buffer.toLowerCase()])) {\n              buffer = tmp;\n            }\n            if (buffer === '..') {\n              this._path.pop();\n              if (c !== '/' && c !== '\\\\') {\n                this._path.push('');\n              }\n            } else if (buffer === '.' && c !== '/' && c !== '\\\\') {\n              this._path.push('');\n            } else if (buffer !== '.') {\n              if (this._scheme === 'file' && this._path.length === 0 &&\n                  buffer.length === 2 && ALPHA.test(buffer[0]) &&\n                  buffer[1] === '|') {\n                buffer = buffer[0] + ':';\n              }\n              this._path.push(buffer);\n            }\n            buffer = '';\n            if (c === '?') {\n              this._query = '?';\n              state = 'query';\n            } else if (c === '#') {\n              this._fragment = '#';\n              state = 'fragment';\n            }\n          } else if (c !== '\\t' && c !== '\\n' && c !== '\\r') {\n            buffer += percentEscape(c);\n          }\n          break;\n\n        case 'query':\n          if (!stateOverride && c === '#') {\n            this._fragment = '#';\n            state = 'fragment';\n          } else if (c !== EOF && c !== '\\t' && c !== '\\n' && c !== '\\r') {\n            this._query += percentEscapeQuery(c);\n          }\n          break;\n\n        case 'fragment':\n          if (c !== EOF && c !== '\\t' && c !== '\\n' && c !== '\\r') {\n            this._fragment += c;\n          }\n          break;\n      }\n\n      cursor++;\n    }\n  }\n\n  function clear() {\n    this._scheme = '';\n    this._schemeData = '';\n    this._username = '';\n    this._password = null;\n    this._host = '';\n    this._port = '';\n    this._path = [];\n    this._query = '';\n    this._fragment = '';\n    this._isInvalid = false;\n    this._isRelative = false;\n  }\n\n  // Does not process domain names or IP addresses.\n  // Does not handle encoding for the query parameter.\n  function JURL(url, base /* , encoding */) {\n    if (base !== undefined && !(base instanceof JURL)) {\n      base = new JURL(String(base));\n    }\n\n    this._url = url;\n    clear.call(this);\n\n    var input = url.replace(/^[ \\t\\r\\n\\f]+|[ \\t\\r\\n\\f]+$/g, '');\n    // encoding = encoding || 'utf-8'\n\n    parse.call(this, input, null, base);\n  }\n\n  JURL.prototype = {\n    toString() {\n      return this.href;\n    },\n    get href() {\n      if (this._isInvalid) {\n        return this._url;\n      }\n      var authority = '';\n      if (this._username !== '' || this._password !== null) {\n        authority = this._username +\n          (this._password !== null ? ':' + this._password : '') + '@';\n      }\n\n      return this.protocol +\n          (this._isRelative ? '//' + authority + this.host : '') +\n          this.pathname + this._query + this._fragment;\n    },\n    set href(href) {\n      clear.call(this);\n      parse.call(this, href);\n    },\n\n    get protocol() {\n      return this._scheme + ':';\n    },\n    set protocol(protocol) {\n      if (this._isInvalid) {\n        return;\n      }\n      parse.call(this, protocol + ':', 'scheme start');\n    },\n\n    get host() {\n      return this._isInvalid ? '' : this._port ?\n          this._host + ':' + this._port : this._host;\n    },\n    set host(host) {\n      if (this._isInvalid || !this._isRelative) {\n        return;\n      }\n      parse.call(this, host, 'host');\n    },\n\n    get hostname() {\n      return this._host;\n    },\n    set hostname(hostname) {\n      if (this._isInvalid || !this._isRelative) {\n        return;\n      }\n      parse.call(this, hostname, 'hostname');\n    },\n\n    get port() {\n      return this._port;\n    },\n    set port(port) {\n      if (this._isInvalid || !this._isRelative) {\n        return;\n      }\n      parse.call(this, port, 'port');\n    },\n\n    get pathname() {\n      return this._isInvalid ? '' : this._isRelative ?\n          '/' + this._path.join('/') : this._schemeData;\n    },\n    set pathname(pathname) {\n      if (this._isInvalid || !this._isRelative) {\n        return;\n      }\n      this._path = [];\n      parse.call(this, pathname, 'relative path start');\n    },\n\n    get search() {\n      return this._isInvalid || !this._query || this._query === '?' ?\n          '' : this._query;\n    },\n    set search(search) {\n      if (this._isInvalid || !this._isRelative) {\n        return;\n      }\n      this._query = '?';\n      if (search[0] === '?') {\n        search = search.slice(1);\n      }\n      parse.call(this, search, 'query');\n    },\n\n    get hash() {\n      return this._isInvalid || !this._fragment || this._fragment === '#' ?\n          '' : this._fragment;\n    },\n    set hash(hash) {\n      if (this._isInvalid) {\n        return;\n      }\n      this._fragment = '#';\n      if (hash[0] === '#') {\n        hash = hash.slice(1);\n      }\n      parse.call(this, hash, 'fragment');\n    },\n\n    get origin() {\n      var host;\n      if (this._isInvalid || !this._scheme) {\n        return '';\n      }\n      // javascript: Gecko returns String(\"\"), WebKit/Blink String(\"null\")\n      // Gecko throws error for \"data://\"\n      // data: Gecko returns \"\", Blink returns \"data://\", WebKit returns \"null\"\n      // Gecko returns String(\"\") for file: mailto:\n      // WebKit/Blink returns String(\"SCHEME://\") for file: mailto:\n      switch (this._scheme) {\n        case 'data':\n        case 'file':\n        case 'javascript':\n        case 'mailto':\n          return 'null';\n      }\n      host = this.host;\n      if (!host) {\n        return '';\n      }\n      return this._scheme + '://' + host;\n    }\n  };\n\n  // Copy over the static methods\n  var OriginalURL = globalScope.URL;\n  if (OriginalURL) {\n    JURL.createObjectURL = function(blob) {\n      // IE extension allows a second optional options argument.\n      // http://msdn.microsoft.com/en-us/library/ie/hh772302(v=vs.85).aspx\n      return OriginalURL.createObjectURL.apply(OriginalURL, arguments);\n    };\n    JURL.revokeObjectURL = function(url) {\n      OriginalURL.revokeObjectURL(url);\n    };\n  }\n\n  globalScope.URL = JURL;\n})();\n\n}\n\n\n\n// WEBPACK FOOTER //\n// src/shared/compatibility.js","/* Copyright 2017 Overview Services Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @typedef {Object} AddNoteToolOptions\n * @property {HTMLDivElement} container - The document container.\n * @property {EventBus} eventBus - The application event bus.\n * @property {PDFViewer} pdfViewer - The PDF Viewer.\n */\n\n/**\n * @class\n */\nvar AddNoteTool = (function AddNoteToolClosure() {\n  /**\n   * @constructs AddNoteTool\n   * @param {AddNoteToolOptions} options\n   */\n  function AddNoteTool(options) {\n    this.container = options.container;\n    this.eventBus = options.eventBus;\n    this.pdfViewer = options.pdfViewer;\n    this.active = false;\n\n    // Events to destroy when deactivating\n    this._onmousedown = null;\n    this._onmousemove = null;\n    this._onmouseup = null;\n\n    this.eventBus.on('toggleaddingnote', this.toggle.bind(this));\n  }\n\n  AddNoteTool.prototype = {\n    /**\n     * @return {boolean}\n     */\n    get isActive() {\n      return this.active;\n    },\n\n    toggle: function AddNoteTool_toggle() {\n      if (this.active) {\n        this.deactivate();\n      } else {\n        this.activate();\n      }\n    },\n\n    activate: function() {\n      if (!this.active) {\n        this.active = true;\n        this.container.classList.add('addingNote');\n        this._listenForMousedown();\n        this.eventBus.dispatch('addingnotechanged', { isActive: true, });\n      }\n    },\n\n    _listenForMousedown: function() {\n      var self = this;\n      this._stopListening();\n\n      this._onmousedown = function(ev) {\n        // Prevent clicking on a link, say, or on another note\n        ev.preventDefault();\n        ev.stopPropagation();\n\n        var node = ev.target;\n        while (node !== null && !(node.nodeName === 'DIV' && node.classList.contains('noteLayer'))) {\n          node = node.parentNode;\n        }\n\n        if (node === null) {\n          return;\n        }\n\n        var noteLayer = node;\n        var pageLayer = node.parentNode;\n\n        var rect = noteLayer.getBoundingClientRect();\n        var x0 = ev.clientX - rect.left;\n        var y0 = ev.clientY - rect.top;\n\n        var div = document.createElement('div');\n        div.className = 'addingNote';\n        div.style.left = x0 + 'px';\n        div.style.top = y0 + 'px';\n        div.style.width = '0';\n        div.style.height = '0';\n        noteLayer.appendChild(div);\n\n        var point0 = {\n          pageIndex: +pageLayer.getAttribute('data-page-number') - 1,\n          layerRect: rect,\n          div: div,\n          x0: x0,\n          y0: y0,\n        };\n\n        self._listenForMouseup(point0);\n      }\n      this.container.addEventListener('mousedown', this._onmousedown);\n    },\n\n    _listenForMouseup: function(point0) {\n      var self = this;\n      this._stopListening();\n\n      function getCurrentRect(ev) {\n        var x0 = point0.x0;\n        var y0 = point0.y0;\n\n        var x1 = ev.clientX - point0.layerRect.left;\n        var y1 = ev.clientY - point0.layerRect.top;\n\n        // Clamp x1 and y1 onto the page.\n        if (x1 < 0) x1 = 0;\n        if (x1 > point0.layerRect.width) x1 = point0.layerRect.width;\n        if (y1 < 0) y1 = 0;\n        if (y1 > point0.layerRect.height) y1 = point0.layerRect.height;\n\n        return {\n          x: Math.min(x0, x1),\n          y: Math.min(y0, y1),\n          width: Math.abs(x1 - x0),\n          height: Math.abs(y1 - y0),\n        };\n      }\n\n      this._onmousemove = function(ev) {\n        ev.stopPropagation();\n        ev.preventDefault();\n\n        var rect = getCurrentRect(ev);\n        point0.div.style.left = rect.x + 'px';\n        point0.div.style.top = rect.y + 'px';\n        point0.div.style.width = rect.width + 'px';\n        point0.div.style.height = rect.height + 'px';\n      };\n\n      this._onmouseup = function(ev) {\n        ev.stopPropagation();\n        ev.preventDefault();\n\n        var rect = getCurrentRect(ev);\n        point0.div.parentNode.removeChild(point0.div);\n        self._addNote(point0.pageIndex, rect);\n        self.deactivate();\n      };\n\n      this.container.addEventListener('mousemove', this._onmousemove);\n      this.container.addEventListener('mouseup', this._onmouseup);\n    },\n\n    /**\n     * Stop listening for mousedown, mousemove, mouseup.\n     */\n    _stopListening: function() {\n      var events = [ 'mousedown', 'mousemove', 'mouseup' ];\n      for (var i = 0, ii = events.length; i < ii; i++) {\n        var event = events[i];\n        var listenerName = '_on' + event;\n        var listener = this[listenerName];\n\n        if (listener !== null) {\n          this.container.removeEventListener(event, listener);\n          this[listenerName] = null;\n        }\n      }\n    },\n\n    /**\n     * Finishes adding the Note by calling NoteStore.add().\n     */\n    _addNote: function AddNoteTool_addNote(pageIndex, rectInPx) {\n      var pageView = this.pdfViewer.getPageView(pageIndex);\n\n      var p0 = pageView.viewport.convertToPdfPoint(\n        rectInPx.x,\n        rectInPx.y\n      );\n      var p1 = pageView.viewport.convertToPdfPoint(\n        rectInPx.x + rectInPx.width,\n        rectInPx.y + rectInPx.height\n      );\n\n      this.pdfViewer.noteStore.add({\n        pageIndex: pageIndex,\n        x: Math.min(p0[0], p1[0]),\n        y: Math.min(p0[1], p1[1]),\n        width: Math.abs(p1[0] - p0[0]),\n        height: Math.abs(p1[1] - p0[1]),\n        text: '',\n      })\n    },\n\n    deactivate: function() {\n      if (this.active) {\n        this.active = false;\n        this.container.classList.remove('addingNote');\n        this._stopListening();\n        this.eventBus.dispatch('addingnotechanged', { isActive: false, });\n      }\n    },\n  };\n\n  return AddNoteTool;\n})();\n\nexport {\n  AddNoteTool,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/add_note_tool.js","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AnnotationLayer } from './pdfjs';\nimport { mozL10n } from './ui_utils';\nimport { SimpleLinkService } from './pdf_link_service';\n\n/**\n * @typedef {Object} AnnotationLayerBuilderOptions\n * @property {HTMLDivElement} pageDiv\n * @property {PDFPage} pdfPage\n * @property {boolean} renderInteractiveForms\n * @property {IPDFLinkService} linkService\n * @property {DownloadManager} downloadManager\n */\n\nclass AnnotationLayerBuilder {\n  /**\n   * @param {AnnotationLayerBuilderOptions} options\n   */\n  constructor(options) {\n    this.pageDiv = options.pageDiv;\n    this.pdfPage = options.pdfPage;\n    this.renderInteractiveForms = options.renderInteractiveForms;\n    this.linkService = options.linkService;\n    this.downloadManager = options.downloadManager;\n\n    this.div = null;\n  }\n\n  /**\n   * @param {PageViewport} viewport\n   * @param {string} intent (default value is 'display')\n   */\n  render(viewport, intent = 'display') {\n    this.pdfPage.getAnnotations({ intent, }).then((annotations) => {\n      var parameters = {\n        viewport: viewport.clone({ dontFlip: true }),\n        div: this.div,\n        annotations,\n        page: this.pdfPage,\n        renderInteractiveForms: this.renderInteractiveForms,\n        linkService: this.linkService,\n        downloadManager: this.downloadManager,\n      };\n\n      if (this.div) {\n        // If an annotationLayer already exists, refresh its children's\n        // transformation matrices.\n        AnnotationLayer.update(parameters);\n      } else {\n        // Create an annotation layer div and render the annotations\n        // if there is at least one annotation.\n        if (annotations.length === 0) {\n          return;\n        }\n\n        this.div = document.createElement('div');\n        this.div.className = 'annotationLayer';\n        this.pageDiv.appendChild(this.div);\n        parameters.div = this.div;\n\n        AnnotationLayer.render(parameters);\n        if (typeof mozL10n !== 'undefined') {\n          mozL10n.translate(this.div);\n        }\n      }\n    });\n  }\n\n  hide() {\n    if (!this.div) {\n      return;\n    }\n    this.div.setAttribute('hidden', 'true');\n  }\n}\n\n/**\n * @implements IPDFAnnotationLayerFactory\n */\nclass DefaultAnnotationLayerFactory {\n  /**\n   * @param {HTMLDivElement} pageDiv\n   * @param {PDFPage} pdfPage\n   * @param {boolean} renderInteractiveForms\n   * @returns {AnnotationLayerBuilder}\n   */\n  createAnnotationLayerBuilder(pageDiv, pdfPage,\n                               renderInteractiveForms = false) {\n    return new AnnotationLayerBuilder({\n      pageDiv,\n      pdfPage,\n      renderInteractiveForms,\n      linkService: new SimpleLinkService(),\n    });\n  }\n}\n\nexport {\n  AnnotationLayerBuilder,\n  DefaultAnnotationLayerFactory,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/annotation_layer_builder.js","/* Copyright 2013 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createObjectURL, createValidAbsoluteUrl, PDFJS } from './pdfjs';\n\nif (typeof PDFJSDev !== 'undefined' && !PDFJSDev.test('GENERIC')) {\n  throw new Error('Module \"pdfjs-web/download_manager\" shall not be used ' +\n                  'outside CHROME and GENERIC builds.');\n}\n\nfunction download(blobUrl, filename) {\n  var a = document.createElement('a');\n  if (a.click) {\n    // Use a.click() if available. Otherwise, Chrome might show\n    // \"Unsafe JavaScript attempt to initiate a navigation change\n    //  for frame with URL\" and not open the PDF at all.\n    // Supported by (not mentioned = untested):\n    // - Firefox 6 - 19 (4- does not support a.click, 5 ignores a.click)\n    // - Chrome 19 - 26 (18- does not support a.click)\n    // - Opera 9 - 12.15\n    // - Internet Explorer 6 - 10\n    // - Safari 6 (5.1- does not support a.click)\n    a.href = blobUrl;\n    a.target = '_parent';\n    // Use a.download if available. This increases the likelihood that\n    // the file is downloaded instead of opened by another PDF plugin.\n    if ('download' in a) {\n      a.download = filename;\n    }\n    // <a> must be in the document for IE and recent Firefox versions.\n    // (otherwise .click() is ignored)\n    (document.body || document.documentElement).appendChild(a);\n    a.click();\n    a.parentNode.removeChild(a);\n  } else {\n    if (window.top === window &&\n        blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n      // If _parent == self, then opening an identical URL with different\n      // location hash will only cause a navigation, not a download.\n      var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n      blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n    }\n    window.open(blobUrl, '_parent');\n  }\n}\n\nfunction DownloadManager() {}\n\nDownloadManager.prototype = {\n  downloadUrl: function DownloadManager_downloadUrl(url, filename) {\n    if (!createValidAbsoluteUrl(url, 'http://example.com')) {\n      return; // restricted/invalid URL\n    }\n    download(url + '#pdfjs.action=download', filename);\n  },\n\n  downloadData: function DownloadManager_downloadData(data, filename,\n                                                      contentType) {\n    if (navigator.msSaveBlob) { // IE10 and above\n      return navigator.msSaveBlob(new Blob([data], { type: contentType }),\n                                  filename);\n    }\n\n    var blobUrl = createObjectURL(data, contentType,\n                                  PDFJS.disableCreateObjectURL);\n    download(blobUrl, filename);\n  },\n\n  download: function DownloadManager_download(blob, url, filename) {\n    if (navigator.msSaveBlob) {\n      // IE10 / IE11\n      if (!navigator.msSaveBlob(blob, filename)) {\n        this.downloadUrl(url, filename);\n      }\n      return;\n    }\n\n    if (PDFJS.disableCreateObjectURL) {\n      // URL.createObjectURL is not supported\n      this.downloadUrl(url, filename);\n      return;\n    }\n\n    var blobUrl = URL.createObjectURL(blob);\n    download(blobUrl, filename);\n  }\n};\n\nexport {\n  DownloadManager,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/download_manager.js","/* Copyright 2017 Overview Services Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Util } from '../src/shared/util';\nimport { scrollIntoView } from './ui_utils';\n\n/**\n * @typedef {Object} EditNoteToolOptions\n * @property {HTMLDivElement} container - The document container.\n * @property {EventBus} eventBus - The application event bus.\n * @property {PDFViewer} pdfViewer - The PDF Viewer.\n */\n\n/**\n * @class\n */\nvar EditNoteTool = (function EditNoteToolClosure() {\n  /**\n   * @constructs EditNoteTool\n   * @param {EditNoteToolOptions} options\n   */\n  function EditNoteTool(options) {\n    this.container = options.container;\n    this.eventBus = options.eventBus;\n    this.pdfViewer = options.pdfViewer;\n    this.div = document.createElement('div');\n    this.div.className = 'editNoteTool';\n    this.container.appendChild(this.div);\n\n    this.active = false;\n    this.currentNote = null;\n\n    this._attachEventBus();\n  }\n\n  var EditNoteHtml = [\n    '<div class=\"editNoteBackground\">',\n      '<div class=\"bgAbove\"></div>',\n      '<div class=\"bgBelow\"></div>',\n      '<div class=\"bgLeft\"></div>',\n      '<div class=\"bgRight\"></div>',\n    '</div>',\n    '<div class=\"editNotePopup\">',\n      '<div class=\"editNoteToolbar\">',\n        '<button class=\"editNotePrevious\"><span>Previous</span></button>',\n        '<button class=\"editNoteNext\"><span>Next</span></button>',\n        '<span class=\"space\"></span>',\n        '<button class=\"editNoteDelete\"><span>Delete</span></button>',\n        '<button class=\"editNoteClose\"><span>Close</span></button>',\n      '</div>',\n      '<div class=\"editNoteHighlight\"></div>',\n      '<form method=\"POST\" action=\"\">',\n        '<div>',\n          '<textarea name=\"note\"></textarea>',\n          '<button class=\"editNoteSave\" disabled><span>Save</span></button>',\n        '</div>',\n      '</form>',\n    '</div>',\n  ].join('');\n\n  EditNoteTool.prototype = {\n    setNote: function EditNoteTool_setNote(note) {\n      this.currentNote = note;\n\n      if (this.currentNote === null) {\n        this.div.innerHTML = '';\n      } else {\n        this.div.innerHTML = EditNoteHtml;\n        this._attachDom();\n        this._updateDom();\n      }\n    },\n\n    _attachEventBus: function() {\n      this.eventBus.on('clicknote', this.setNote.bind(this));\n      this.eventBus.on('movetonextnote', this.moveToNext.bind(this));\n      this.eventBus.on('movetopreviousnote', this.moveToPrevious.bind(this));\n      this.eventBus.on('updateviewarea', this._updateDomPositions.bind(this));\n    },\n\n    _attachDom: function() {\n      this.div.querySelector('div.editNoteBackground')\n        .addEventListener('mousedown', this._onMousedownBackground.bind(this));\n      this.div.querySelector('button.editNotePrevious')\n        .addEventListener('click', this._onClickPrevious.bind(this));\n      this.div.querySelector('button.editNoteNext')\n        .addEventListener('click', this._onClickNext.bind(this));\n      this.div.querySelector('button.editNoteDelete')\n        .addEventListener('click', this._onClickDelete.bind(this));\n      this.div.querySelector('button.editNoteClose')\n        .addEventListener('click', this._onClickClose.bind(this));\n      this.div.querySelector('textarea')\n        .addEventListener('input', this._onTextInput.bind(this));\n      this.div.querySelector('form')\n        .addEventListener('submit', this._onSubmit.bind(this));\n    },\n\n    close: function() {\n      this.setNote(null);\n    },\n\n    moveToPrevious: function() {\n      var noteStore = this.pdfViewer.noteStore;\n      if (noteStore) {\n        var previousNote = noteStore.getPreviousNote(this.currentNote);\n        this.setNote(previousNote);\n      }\n    },\n\n    moveToNext: function() {\n      var noteStore = this.pdfViewer.noteStore;\n      if (noteStore) {\n        var nextNote = noteStore.getNextNote(this.currentNote);\n        this.setNote(nextNote);\n      }\n    },\n\n    _setError: function(err) {\n      console.warn(err);\n\n      this.div.classList.add('error');\n\n      this._disableToolbarButtons();\n      var error = document.createElement('p');\n      error.className = 'error';\n      error.textContent =\n        'Save failed. Please reload this document and try again.';\n\n      this._disableForm();\n      var form = this.div.querySelector('form');\n      form.appendChild(error);\n    },\n\n    deleteNote: function() {\n      var noteStore = this.pdfViewer.noteStore; // assume it's set\n\n      this._disableToolbarButtons();\n      this._disableForm();\n\n      this.div.classList.add('deleting');\n\n      var self = this;\n      return noteStore.deleteNote(this.currentNote)\n        .then(\n          // No need to unset 'deleting': the entire div is about to disappear\n          function() { self.setNote(null); },\n          function(err) { self._setError(err); }\n        );\n    },\n\n    _disableToolbarButtons: function() {\n      var buttons = this.div.querySelectorAll('.editNoteToolbar button');\n      for (var i = 0, ii = buttons.length; i < ii; i++) {\n        buttons[i].disabled = true;\n      }\n    },\n\n    _enableToolbarButtons: function() {\n      var buttons = this.div.querySelectorAll('.editNoteToolbar button');\n      for (var i = 0, ii = buttons.length; i < ii; i++) {\n        buttons[i].disabled = false;\n      }\n    },\n\n    _disableForm: function() {\n      this.div.querySelector('textarea').disabled = true;\n      this.div.querySelector('form button').disabled = true;\n    },\n\n    _enableForm: function() {\n      this.div.querySelector('textarea').disabled = false;\n      this.div.querySelector('form button').disabled = false;\n    },\n\n    saveNote: function() {\n      var noteStore = this.pdfViewer.noteStore; // assume it's set\n\n      this.div.classList.add('saving');\n      this._disableToolbarButtons();\n      this._disableForm();\n\n      var textarea = this.div.querySelector('form textarea');\n      var text = textarea.value;\n\n      var self = this;\n      return noteStore.setNoteText(this.currentNote, text)\n        .then(\n          function() {\n            self.div.classList.remove('saving');\n            self._enableToolbarButtons();\n            self._enableForm();\n            self.div.querySelector('button').disabled = true; // until an edit\n          },\n          function(err) {\n            self.div.classList.remove('saving');\n            self._setError(err);\n          }\n        );\n    },\n\n    _onTextInput: function(ev) {\n      ev.target.nextSibling.disabled = false;\n    },\n\n    _onMousedownBackground: function(ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      this.close();\n    },\n\n    _onClickPrevious: function(ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      this.eventBus.dispatch('movetopreviousnote');\n    },\n\n    _onClickNext: function(ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      this.eventBus.dispatch('movetonextnote');\n    },\n\n    _onClickDelete: function(ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      this.deleteNote();\n    },\n\n    _onClickClose: function(ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      this.close();\n    },\n\n    _onSubmit: function(ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      this.saveNote();\n    },\n\n    _updateDom: function() {\n      var div = this.div;\n      var note = this.currentNote;\n\n      div.querySelector('textarea').value = note.text;\n\n      this._updateDomPositions();\n    },\n\n    _updateDomPositions: function() {\n      if (!this.currentNote) return;\n\n      var div = this.div;\n      var note = this.currentNote;\n\n      div.querySelector('textarea').value = note.text;\n\n      var pageView = this.pdfViewer.getPageView(note.pageIndex);\n      var viewport = pageView.viewport;\n      var pageDiv = pageView.div;\n      var noteRect = Util.normalizeRect(viewport.convertToViewportRectangle([\n        note.x,\n        note.y,\n        note.x + note.width,\n        note.y + note.height,\n      ])); // relative to pageDiv\n      var pageStyle = window.getComputedStyle(pageDiv);\n\n      var position = {\n        top: pageDiv.offsetTop + noteRect[1] + parseFloat(pageStyle.borderTopWidth),\n        left: pageDiv.offsetLeft + noteRect[0] + parseFloat(pageStyle.borderLeftWidth),\n        bottom: pageDiv.offsetTop + noteRect[3] + parseFloat(pageStyle.borderTopWidth),\n        right: pageDiv.offsetLeft + noteRect[2] + parseFloat(pageStyle.borderLeftWidth),\n      };\n      position.height = position.bottom - position.top;\n      position.width = position.right - position.left;\n\n      var bg = div.querySelector('.editNoteBackground');\n\n      var bgAbove = bg.querySelector('.bgAbove');\n      bgAbove.style.height = position.top + 'px';\n\n      var bgLeft = bg.querySelector('.bgLeft');\n      bgLeft.style.top = position.top + 'px';\n      bgLeft.style.width = position.left + 'px';\n      bgLeft.style.height = position.height + 'px';\n\n      var bgRight = bg.querySelector('.bgRight');\n      bgRight.style.top = position.top + 'px';\n      bgRight.style.left = position.right + 'px';\n      bgRight.style.height = position.height + 'px';\n\n      var bgBelow = bg.querySelector('.bgBelow');\n      bgBelow.style.top = position.bottom + 'px';\n      bgBelow.style.height = (this.container.scrollHeight - position.bottom) + 'px';\n\n      var popup = div.querySelector('.editNotePopup');\n      popup.style.top = position.top + 'px';\n      popup.style.height = position.height + 'px';\n      popup.style.left = (pageDiv.offsetLeft + parseFloat(pageStyle.borderLeftWidth)) + 'px';\n      popup.style.width = pageDiv.clientWidth + 'px';\n\n      scrollIntoView(this.div.querySelector('.editNotePopup'), {\n        top: -80, // so the edit-note toolbar appears, which is negative-offset\n        left: 0,\n      });\n    },\n  };\n\n  return EditNoteTool;\n})();\n\nexport {\n  EditNoteTool,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/edit_note_tool.js","/* Copyright 2013 Rob Wu <rob@robwu.nl>\n * https://github.com/Rob--W/grab-to-pan.js\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Construct a GrabToPan instance for a given HTML element.\n * @param options.element {Element}\n * @param options.ignoreTarget {function} optional. See `ignoreTarget(node)`\n * @param options.onActiveChanged {function(boolean)} optional. Called\n *  when grab-to-pan is (de)activated. The first argument is a boolean that\n *  shows whether grab-to-pan is activated.\n */\nfunction GrabToPan(options) {\n  this.element = options.element;\n  this.document = options.element.ownerDocument;\n  if (typeof options.ignoreTarget === 'function') {\n    this.ignoreTarget = options.ignoreTarget;\n  }\n  this.onActiveChanged = options.onActiveChanged;\n\n  // Bind the contexts to ensure that `this` always points to\n  // the GrabToPan instance.\n  this.activate = this.activate.bind(this);\n  this.deactivate = this.deactivate.bind(this);\n  this.toggle = this.toggle.bind(this);\n  this._onmousedown = this._onmousedown.bind(this);\n  this._onmousemove = this._onmousemove.bind(this);\n  this._endPan = this._endPan.bind(this);\n\n  // This overlay will be inserted in the document when the mouse moves during\n  // a grab operation, to ensure that the cursor has the desired appearance.\n  var overlay = this.overlay = document.createElement('div');\n  overlay.className = 'grab-to-pan-grabbing';\n}\nGrabToPan.prototype = {\n  /**\n   * Class name of element which can be grabbed\n   */\n  CSS_CLASS_GRAB: 'grab-to-pan-grab',\n\n  /**\n   * Bind a mousedown event to the element to enable grab-detection.\n   */\n  activate: function GrabToPan_activate() {\n    if (!this.active) {\n      this.active = true;\n      this.element.addEventListener('mousedown', this._onmousedown, true);\n      this.element.classList.add(this.CSS_CLASS_GRAB);\n      if (this.onActiveChanged) {\n        this.onActiveChanged(true);\n      }\n    }\n  },\n\n  /**\n   * Removes all events. Any pending pan session is immediately stopped.\n   */\n  deactivate: function GrabToPan_deactivate() {\n    if (this.active) {\n      this.active = false;\n      this.element.removeEventListener('mousedown', this._onmousedown, true);\n      this._endPan();\n      this.element.classList.remove(this.CSS_CLASS_GRAB);\n      if (this.onActiveChanged) {\n        this.onActiveChanged(false);\n      }\n    }\n  },\n\n  toggle: function GrabToPan_toggle() {\n    if (this.active) {\n      this.deactivate();\n    } else {\n      this.activate();\n    }\n  },\n\n  /**\n   * Whether to not pan if the target element is clicked.\n   * Override this method to change the default behaviour.\n   *\n   * @param node {Element} The target of the event\n   * @return {boolean} Whether to not react to the click event.\n   */\n  ignoreTarget: function GrabToPan_ignoreTarget(node) {\n    // Use matchesSelector to check whether the clicked element\n    // is (a child of) an input element / link\n    return node[matchesSelector](\n      'a[href], a[href] *, input, textarea, button, button *, select, option'\n    );\n  },\n\n  /**\n   * @private\n   */\n  _onmousedown: function GrabToPan__onmousedown(event) {\n    if (event.button !== 0 || this.ignoreTarget(event.target)) {\n      return;\n    }\n    if (event.originalTarget) {\n      try {\n        // eslint-disable-next-line no-unused-expressions\n        event.originalTarget.tagName;\n      } catch (e) {\n        // Mozilla-specific: element is a scrollbar (XUL element)\n        return;\n      }\n    }\n\n    this.scrollLeftStart = this.element.scrollLeft;\n    this.scrollTopStart = this.element.scrollTop;\n    this.clientXStart = event.clientX;\n    this.clientYStart = event.clientY;\n    this.document.addEventListener('mousemove', this._onmousemove, true);\n    this.document.addEventListener('mouseup', this._endPan, true);\n    // When a scroll event occurs before a mousemove, assume that the user\n    // dragged a scrollbar (necessary for Opera Presto, Safari and IE)\n    // (not needed for Chrome/Firefox)\n    this.element.addEventListener('scroll', this._endPan, true);\n    event.preventDefault();\n    event.stopPropagation();\n\n    var focusedElement = document.activeElement;\n    if (focusedElement && !focusedElement.contains(event.target)) {\n      focusedElement.blur();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _onmousemove: function GrabToPan__onmousemove(event) {\n    this.element.removeEventListener('scroll', this._endPan, true);\n    if (isLeftMouseReleased(event)) {\n      this._endPan();\n      return;\n    }\n    var xDiff = event.clientX - this.clientXStart;\n    var yDiff = event.clientY - this.clientYStart;\n    var scrollTop = this.scrollTopStart - yDiff;\n    var scrollLeft = this.scrollLeftStart - xDiff;\n    if (this.element.scrollTo) {\n      this.element.scrollTo({\n        top: scrollTop,\n        left: scrollLeft,\n        behavior: 'instant',\n      });\n    } else {\n      this.element.scrollTop = scrollTop;\n      this.element.scrollLeft = scrollLeft;\n    }\n    if (!this.overlay.parentNode) {\n      document.body.appendChild(this.overlay);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _endPan: function GrabToPan__endPan() {\n    this.element.removeEventListener('scroll', this._endPan, true);\n    this.document.removeEventListener('mousemove', this._onmousemove, true);\n    this.document.removeEventListener('mouseup', this._endPan, true);\n    // Note: ChildNode.remove doesn't throw if the parentNode is undefined.\n    this.overlay.remove();\n  }\n};\n\n// Get the correct (vendor-prefixed) name of the matches method.\nvar matchesSelector;\n['webkitM', 'mozM', 'msM', 'oM', 'm'].some(function(prefix) {\n  var name = prefix + 'atches';\n  if (name in document.documentElement) {\n    matchesSelector = name;\n  }\n  name += 'Selector';\n  if (name in document.documentElement) {\n    matchesSelector = name;\n  }\n  return matchesSelector; // If found, then truthy, and [].some() ends.\n});\n\n// Browser sniffing because it's impossible to feature-detect\n// whether event.which for onmousemove is reliable\nvar isNotIEorIsIE10plus = !document.documentMode || document.documentMode > 9;\nvar chrome = window.chrome;\nvar isChrome15OrOpera15plus = chrome && (chrome.webstore || chrome.app);\n//                                       ^ Chrome 15+       ^ Opera 15+\nvar isSafari6plus = /Apple/.test(navigator.vendor) &&\n                    /Version\\/([6-9]\\d*|[1-5]\\d+)/.test(navigator.userAgent);\n\n/**\n * Whether the left mouse is not pressed.\n * @param event {MouseEvent}\n * @return {boolean} True if the left mouse button is not pressed.\n *                   False if unsure or if the left mouse button is pressed.\n */\nfunction isLeftMouseReleased(event) {\n  if ('buttons' in event && isNotIEorIsIE10plus) {\n    // http://www.w3.org/TR/DOM-Level-3-Events/#events-MouseEvent-buttons\n    // Firefox 15+\n    // Internet Explorer 10+\n    return !(event.buttons & 1);\n  }\n  if (isChrome15OrOpera15plus || isSafari6plus) {\n    // Chrome 14+\n    // Opera 15+\n    // Safari 6.0+\n    return event.which === 0;\n  }\n}\n\nexport {\n  GrabToPan,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/grab_to_pan.js","/* Copyright 2013 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GrabToPan } from './grab_to_pan';\nimport { localized } from './ui_utils';\n\n/**\n * @typedef {Object} HandToolOptions\n * @property {HTMLDivElement} container - The document container.\n * @property {EventBus} eventBus - The application event bus.\n */\n\n/**\n * @class\n */\nvar HandTool = (function HandToolClosure() {\n  /**\n   * @constructs HandTool\n   * @param {HandToolOptions} options\n   */\n  function HandTool(options) {\n    this.container = options.container;\n    this.eventBus = options.eventBus;\n    var preferences = options.preferences;\n\n    this.wasActive = false;\n\n    this.handTool = new GrabToPan({\n      element: this.container,\n      onActiveChanged: (isActive) => {\n        this.eventBus.dispatch('handtoolchanged', { isActive, });\n      },\n    });\n\n    this.eventBus.on('togglehandtool', this.toggle.bind(this));\n\n    Promise.all([localized,\n                 preferences.get('enableHandToolOnLoad')]).then((values) => {\n      if (values[1] === true) {\n        this.handTool.activate();\n      }\n    }).catch(function rejected(reason) { });\n\n    this.eventBus.on('presentationmodechanged', (evt) => {\n      if (evt.switchInProgress) {\n        return;\n      }\n      if (evt.active) {\n        this.enterPresentationMode();\n      } else {\n        this.exitPresentationMode();\n      }\n    });\n  }\n\n  HandTool.prototype = {\n    /**\n     * @return {boolean}\n     */\n    get isActive() {\n      return !!this.handTool.active;\n    },\n\n    toggle: function HandTool_toggle() {\n      this.handTool.toggle();\n    },\n\n    enterPresentationMode: function HandTool_enterPresentationMode() {\n      if (this.isActive) {\n        this.wasActive = true;\n        this.handTool.deactivate();\n      }\n    },\n\n    exitPresentationMode: function HandTool_exitPresentationMode() {\n      if (this.wasActive) {\n        this.wasActive = false;\n        this.handTool.activate();\n      }\n    }\n  };\n\n  return HandTool;\n})();\n\nexport {\n  HandTool,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/hand_tool.js","/* Copyright 2017 Overview Services Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Util } from '../src/shared/util';\nimport { CustomStyle } from './pdfjs';\n\n/**\n * @typedef {Object} NoteElementPrameters\n * @property {Object} data\n * @property {HTMLDivElement} layer\n * @property {PageViewport} viewport\n */\n\n/**\n * @class\n * @alias NoteElementFactory\n */\nfunction NoteElementFactory() {}\nNoteElementFactory.prototype =\n    /** @lends NoteElementFactory.prototype */ {\n  /**\n   * @param {NoteElementParameters} parameters\n   * @returns {NoteElement}\n   */\n  create: function NoteElementFactory_create(parameters) {\n    return new NoteElement(parameters);\n  },\n};\n\n/**\n * @class\n * @alias NoteElement\n */\nvar NoteElement = (function NoteElementClosure() {\n  function NoteElement(parameters) {\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.viewport = parameters.viewport;\n\n    this.container = this._createContainer();\n  }\n\n  NoteElement.prototype = /** @lends NoteElement.prototype */ {\n    /**\n     * Create an empty container for the note's HTML element.\n     *\n     * @private\n     * @memberof NoteElement\n     * @returns {HTMLSectionElement}\n     */\n    _createContainer: function NoteElement_createContainer() {\n      var data = this.data, viewport = this.viewport;\n      var container = document.createElement('section');\n\n      var rect = Util.normalizeRect(viewport.convertToViewportRectangle([\n        data.x,\n        data.y,\n        data.x + data.width,\n        data.y + data.height,\n      ]));\n\n      container.style.left = rect[0] + 'px';\n      container.style.top = rect[1] + 'px';\n      container.style.width = (rect[2] - rect[0]) + 'px';\n      container.style.height = (rect[3] - rect[1]) + 'px';\n\n      return container;\n    },\n  };\n\n  return NoteElement;\n})();\n\n/**\n * @typedef {Object} NoteLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Array} notes\n */\n\n/**\n * @class\n * @alias NoteLayer\n */\nvar NoteLayer = (function NoteLayerClosure() {\n  return {\n    /**\n     * Render a new note layer with all note elements.\n     *\n     * @public\n     * @param {NoteLayerParameters} parameters\n     * @memberof NoteLayer\n     */\n    render: function NoteLayer_render(parameters) {\n      var noteElementFactory = new NoteElementFactory();\n\n      for (var i = 0, ii = parameters.notes.length; i < ii; i++) {\n        var data = parameters.notes[i];\n        if (!data) {\n          continue;\n        }\n\n        var element = noteElementFactory.create({\n          data,\n          layer: parameters.div,\n          viewport: parameters.viewport,\n        });\n        parameters.div.appendChild(element.container);\n      }\n\n      parameters.div.removeAttribute('hidden');\n    },\n  };\n})();\n\nexport {\n  NoteLayer,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/note_layer.js","/* Copyright 2017 Overview Services Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { NoteLayer} from './note_layer';\n\n/**\n * @typedef {Object} NoteLayerBuilderOptions\n * @property {HTMLDivElement} pageDiv\n * @property {PDFPage} pdfPage\n * @property {NoteStore} noteStore\n * @property {EventBus} eventBus\n */\n\nclass NoteLayerBuilder {\n  /**\n   * @param {NoteLayerBuilderOptions} options\n   */\n  constructor(options) {\n    this.pageDiv = options.pageDiv;\n    this.pdfPage = options.pdfPage;\n    this.noteStore = options.noteStore;\n    this.eventBus = options.eventBus;\n    this.div = null;\n  }\n\n  /**\n   * @param {PageViewport} viewport\n   */\n  render(viewport) {\n    if (!this.noteStore) {\n      return;\n    }\n\n    var parameters = {\n      viewport,\n      div: this.div,\n      notes: this.noteStore.getNotesForPageIndex(this.pdfPage.pageIndex),\n      page: this.pdfPage,\n    };\n\n    if (this.div) {\n      this.div.innerHTML = '';\n    } else {\n      var div = this.div = document.createElement('div');\n      this.div.className = 'noteLayer';\n      this.pageDiv.appendChild(this.div);\n\n      if (this.eventBus && this.noteStore) {\n        var self = this;\n        this.div.addEventListener('click', function(ev) {\n          if (ev.target.nodeName === 'SECTION') {\n            for (var i = 0, ii = div.childNodes.length; i < ii; i++) {\n              var node = div.childNodes[i];\n              if (node === ev.target) {\n                var note = self.noteStore.getNote(self.pdfPage.pageIndex, i);\n                self.eventBus.dispatch('clicknote', note);\n              }\n            }\n          }\n        });\n      }\n    }\n\n    parameters.div = this.div;\n    NoteLayer.render(parameters);\n  }\n\n  hide() {\n    if (!this.div) {\n      return;\n    }\n    this.div.setAttribute('hidden', true);\n  }\n}\n\n/**\n * @implements INoteLayerFactory\n */\nclass DefaultNoteLayerFactory {\n  /**\n   * @param {HTMLDivElement} pageDiv\n   * @param {PDFPage} pdfPage\n   * @returns {NoteLayerBuilder}\n   */\n  createNoteLayerBuilder(pageDiv, pdfPage) {\n    return new NoteLayerBuilder({\n      pageDiv,\n      pdfPage,\n      noteStore: null,\n      eventBus: null,\n    });\n  }\n}\n\nexport {\n  NoteLayerBuilder,\n  DefaultNoteLayerFactory,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/note_layer_builder.js","/* Copyright 2017 Overview Services Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar LOAD_TIMEOUT = 30000; // ms\nvar SAVE_TIMEOUT = 30000; // ms\n\n/**\n * Returns a String representing our in-memory data structure, suitable for\n * saving on the server.\n */\nfunction encode(data) {\n  var ret = Array.prototype.concat.apply([], data);\n  return JSON.stringify(ret);\n}\n\n/**\n * Turns a String from the server into our internal data structure.\n *\n * Our internal data structure is an Array of sorted Arrays of Notes. The outer\n * index is `pageIndex` (0-based), which makes it fast+easy to find Notes for a\n * given page.\n *\n * Throws error on invalid data.\n */\nfunction decode(s) {\n  var arr;\n  try {\n    arr = JSON.parse(s);\n  } catch (e) {\n    throw new Error('Invalid JSON from server: ' + e.message);\n  }\n\n  if (!Array.isArray(arr)) {\n    throw new Error('Expected JSON from server to be Array of objects');\n  }\n\n  var ret = [];\n\n  for (var i = 0, ii = arr.length; i < ii; i++) {\n    var note = arr[i];\n    if (!note // not typeof, because typeof null === 'null'\n      || typeof note.pageIndex !== 'number'\n      || typeof note.x !== 'number'\n      || typeof note.y !== 'number'\n      || typeof note.width !== 'number'\n      || typeof note.height !== 'number'\n      || typeof note.text !== 'string'\n    ) {\n      throw new Error('Invalid Note from server: ' + JSON.stringify(note));\n    }\n\n    for (var j = ret.length - 1, jj = note.pageIndex; j < jj; j++) {\n      ret.push([]);\n    }\n\n    ret[note.pageIndex].push({\n      pageIndex: note.pageIndex,\n      x: note.x,\n      y: note.y,\n      width: note.width,\n      height: note.height,\n      text: note.text,\n    })\n  }\n\n  return ret;\n}\n\nfunction compareNotes(a, b) {\n  return (b.y - a.y) ||\n         (a.x - b.x) ||\n         (a.height - b.height) ||\n         (a.width - b.width) ||\n         a.text.localeCompare(b.text);\n}\n\n/**\n * @typedef {Object} NoteStoreOptions\n * @property {EventBus} eventBus - The application event bus.\n */\n\n/**\n * @class\n * @alias NoteStore\n */\nvar NoteStore = (function NoteStoreClosure() {\n  /**\n   * @constructs NoteStore\n   * @param {NoteStoreOptions} options\n   */\n  function NoteStore(options) {\n    this.eventBus = options.eventBus;\n\n    this.url = null;\n\n    this.loaded = null;\n    this._savePromise = null;\n    // Callers can call _save() even when we're already saving, to queue another\n    // save. All subsequent calls to _save() (until the original save ends) will\n    // share the same promise.\n    this._nextSavePromise = null;\n    this._isChangedSinceLastSave = null;\n\n    this._data = [];\n  }\n\n  NoteStore.prototype = /** @lends NoteStore.prototype */ {\n    /**\n     * Given a document URL, formulates a Notes URL and begins loading\n     * annotations from it.\n     *\n     * Returns a new Promise, `this.loaded`.\n     */\n    setDocumentUrl: function NoteStore_setDocument(url) {\n      url = new URL(url, window.location).href\n        .replace(/\\.pdf$/, '/notes');\n\n      this._savePromise = null;\n      // Callers can call _save() even when we're already saving, to queue another\n      // save. All subsequent calls to _save() (until the original save ends) will\n      // share the same promise.\n      this._nextSavePromise = null;\n      this._setData([]);\n\n      this.url = url;\n\n      var self = this;\n      this.loaded = new Promise(function(resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.timeout = 30000;\n        xhr.onload = function() {\n          try {\n            self._setData(decode(xhr.responseText));\n            resolve(null);\n          } catch (e) {\n            self._setData([]);\n            reject(e);\n          }\n        };\n        xhr.onerror = function() {\n          reject(new Error(\n            'Error loading XHR. Status ' + xhr.status + ' ' + xhr.statusText));\n        };\n        xhr.onabort = function() {\n          reject(new Error('Note request aborted'));\n        };\n        xhr.ontimeout = function() {\n          reject(new Error('Note request timed out'));\n        };\n        xhr.open('GET', self.url);\n        xhr.responseType = 'text';\n        xhr.timeout = LOAD_TIMEOUT;\n        xhr.send(null);\n      });\n    },\n\n    /**\n     * Returns the \"next\" Note relative to the given one.\n     *\n     * If given `null`, returns the first Note.\n     */\n    getNextNote: function NoteStore_getNextNote(note) {\n      var i, j, ii, jj, page;\n\n      // Search for `note` from the current page until the end. Return the note\n      // after the note we found.\n      var seenNote = false;\n      for (i = (note ? note.pageIndex : 0), ii = this._data.length; i < ii; i++) {\n        page = this._data[i];\n        for (j = 0, jj = page.length; j < jj; j++) {\n          if (seenNote || note === null) {\n            return page[j];\n          } else if (page[j] === note) {\n            seenNote = true;\n          }\n        }\n      }\n\n      // If we still haven't returned, then we've passed the end of the\n      // document. Return the first Note.\n      for (i = 0, ii = this._data.length; i < ii; i++) {\n        page = this._data[i];\n        if (page.length > 0) {\n          return page[0];\n        }\n      }\n\n      return null; // there are no notes\n    },\n\n    /**\n     * Returns the \"previous\" Note relative to the given one.\n     *\n     * If given `null`, returns the last Note.\n     */\n    getPreviousNote: function NoteStore_getPreviousNote(note) {\n      var i, j, page;\n\n      // Search for `note` from the current page until the beginning. Return the\n      // note before the note we found.\n      var seenNote = false;\n      for (i = (note ? note.pageIndex : this._data.length - 1); i >= 0; i--) {\n        page = this._data[i];\n        for (j = page.length - 1; j >= 0; j--) {\n          if (seenNote || note === null) {\n            return page[j];\n          } else if (page[j] === note) {\n            seenNote = true;\n          }\n        }\n      }\n\n      // If we still haven't returned, then we've passed the end of the\n      // document. Return the last Note.\n      for (i = this._data.length - 1; i >= 0; i--) {\n        page = this._data[i];\n        if (page.length > 0) {\n          return page[page.length - 1];\n        }\n      }\n\n      return null; // there are no notes\n    },\n\n    /**\n     * Schedules a save to the server and returns a Promise that resolves when\n     * the save completes.\n     *\n     * If _save() is called without local changes, this is a no-op.\n     *\n     * If _save() is called while we're already saving, this queues another\n     * save.\n     *\n     * If _save() is called while we're already saving _and_ another save is\n     * queued, both saves will be folded into one save which will begin when the\n     * current save completes.\n     */\n    _save: function NoteStore_save() {\n      var self = this;\n\n      if (!self.loaded) {\n        return Promise.reject(new Error('You must setPdfDocument() before saving'));\n      }\n\n      return self.loaded.then(function() {\n        if (!self._isChangedSinceLastSave) {\n          return self._savePromise || Promise.resolve(null);\n        }\n\n        if (self._savePromise !== null) {\n          if (self._nextSavePromise !== null) {\n            return self._nextSavePromise;\n          }\n\n          return self._nextSavePromise = self._savePromise.\n            then(function() { self._doSave(); });\n        }\n\n        return self._savePromise = self._doSave();\n      });\n    },\n\n    /**\n     * Sends an XHR request to the server with the latest data and returns when\n     * the server acknowledges.\n     *\n     * This is unsafe to call outside of _save() because it might lead to races.\n     */\n    _doSave: function NoteStore_doSave() {\n      this._isChangedSinceLastSave = false;\n\n      var self = this;\n      return new Promise(function(resolve, reject) {\n        function end(callback, arg) {\n          // Advance to _nextSavePromise. When we resolve(), it will begin.\n          // (See _save().)\n          self._savePromise = self._nextSavePromise;\n          self._nextSavePromise = null;\n          callback(arg);\n        }\n\n        var xhr = new XMLHttpRequest();\n        xhr.onload = function() {\n          if (Math.floor(xhr.status / 100) !== 2) {\n            end(reject,\n              new Error('Save failed: ' + xhr.status + ' ' + xhr.statusText)\n            );\n          } else {\n            end(resolve);\n          }\n        };\n        xhr.onerror = function(ev) {\n          end(reject,\n            new Error('Save failed: ' + xhr.status + ' ' + xhr.statusText)\n          );\n        };\n        xhr.ontimeout = function() {\n          end(reject, new Error('Save timed out'));\n        };\n        xhr.onabort = function() {\n          end(reject, new Error('Save aborted'));\n        };\n\n        xhr.timeout = SAVE_TIMEOUT;\n        xhr.open('PUT', self.url);\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        xhr.send(encode(self._data));\n      });\n    },\n\n    /**\n     * Fetches Notes for the given page.\n     */\n    getNotesForPageIndex: function NoteStore_getNotesForPageIndex(pageIndex) {\n      return this._data[pageIndex] || [];\n    },\n\n    /**\n     * Fetches a single Note.\n     */\n    getNote: function NoteStore_getNote(pageIndex, indexOnPage) {\n      return (this._data[pageIndex] || [])[indexOnPage] || null;\n    },\n\n    _setData: function NoteStore_setData(data) {\n      this._data = data;\n      this.eventBus.dispatch('noteschanged');\n    },\n\n    /**\n     * Ensures `this.loaded`; adds a Note; and begins saving.\n     *\n     * The returned Promise resolves when the save completes.\n     */\n    add: function NoteStore_add(note) {\n      var self = this;\n\n      if (!self.loaded) {\n        return Promise.reject(new Error('You must setPdfDocument() before add'));\n      }\n\n      return self.loaded.then(function() {\n        // If this pageIndex is the highest we've seen, add empty pages\n        for (var i = self._data.length - 1, ii = note.pageIndex; i < ii; i++) {\n          self._data.push([]);\n        }\n\n        self._data[note.pageIndex].push({\n          pageIndex: note.pageIndex,\n          x: note.x,\n          y: note.y,\n          width: note.width,\n          height: note.height,\n          text: note.text,\n        });\n\n        // Keep list sorted.\n        // [adam] in-order .splice() would be better. I'm too lazy today.\n        self._data[note.pageIndex].sort(compareNotes);\n\n        self.eventBus.dispatch('noteschanged');\n        self._isChangedSinceLastSave = true;\n        return self._save();\n      });\n    },\n\n    /**\n     * Ensures `this.loaded`; deletes Note; begins saving.\n     *\n     * The returned Promise resolves when the save completes.\n     */\n    deleteNote: function NoteStore_deleteNote(note) {\n      var self = this;\n\n      if (!self.loaded) {\n        return Promise.reject(new Error('Programmer error: delete before read'));\n      }\n\n      return self.loaded.then(function() {\n        var arr = self._data[note.pageIndex];\n\n        var index = arr.indexOf(note);\n\n        if (index === -1) {\n          return Promise.resolve(null); // it's already deleted\n        }\n\n        arr.splice(index, 1);\n\n        self.eventBus.dispatch('noteschanged');\n        self._isChangedSinceLastSave = true;\n        return self._save();\n      });\n    },\n\n    /**\n     * Ensures `this.loaded`; updates text of the given Note; begins saving.\n     *\n     * The returned Promise resolves when the save completes.\n     */\n    setNoteText: function NoteStore_setNoteText(note, text) {\n      var self = this;\n\n      if (!self.loaded) {\n        return Promise.reject(new Error('Programmer error: set before read'));\n      }\n\n      return self.loaded.then(function() {\n        note.text = text;\n\n        self._data[note.pageIndex].sort(compareNotes); // Wild edge case\n        self.eventBus.dispatch('noteschanged');\n        self._isChangedSinceLastSave = true;\n        return self._save();\n      });\n    },\n  };\n\n  return NoteStore;\n})();\n\nexport {\n  NoteStore,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/note_store.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { mozL10n } from './ui_utils';\nimport { OverlayManager } from './overlay_manager';\nimport { PasswordResponses } from './pdfjs';\n\n/**\n * @typedef {Object} PasswordPromptOptions\n * @property {string} overlayName - Name of the overlay for the overlay manager.\n * @property {HTMLDivElement} container - Div container for the overlay.\n * @property {HTMLParagraphElement} label - Label containing instructions for\n *                                          entering the password.\n * @property {HTMLInputElement} input - Input field for entering the password.\n * @property {HTMLButtonElement} submitButton - Button for submitting the\n *                                              password.\n * @property {HTMLButtonElement} cancelButton - Button for cancelling password\n *                                              entry.\n */\n\nclass PasswordPrompt {\n  /**\n   * @param {PasswordPromptOptions} options\n   */\n  constructor(options) {\n    this.overlayName = options.overlayName;\n    this.container = options.container;\n    this.label = options.label;\n    this.input = options.input;\n    this.submitButton = options.submitButton;\n    this.cancelButton = options.cancelButton;\n\n    this.updateCallback = null;\n    this.reason = null;\n\n    // Attach the event listeners.\n    this.submitButton.addEventListener('click', this.verify.bind(this));\n    this.cancelButton.addEventListener('click', this.close.bind(this));\n    this.input.addEventListener('keydown', (e) => {\n      if (e.keyCode === 13) { // Enter key\n        this.verify();\n      }\n    });\n\n    OverlayManager.register(this.overlayName, this.container,\n                            this.close.bind(this), true);\n  }\n\n  open() {\n    OverlayManager.open(this.overlayName).then(() => {\n      this.input.focus();\n\n      var promptString = mozL10n.get('password_label', null,\n        'Enter the password to open this PDF file.');\n\n      if (this.reason === PasswordResponses.INCORRECT_PASSWORD) {\n        promptString = mozL10n.get('password_invalid', null,\n          'Invalid password. Please try again.');\n      }\n\n      this.label.textContent = promptString;\n    });\n  }\n\n  close() {\n    OverlayManager.close(this.overlayName).then(() => {\n      this.input.value = '';\n    });\n  }\n\n  verify() {\n    var password = this.input.value;\n    if (password && password.length > 0) {\n      this.close();\n      return this.updateCallback(password);\n    }\n  }\n\n  setUpdateCallback(updateCallback, reason) {\n    this.updateCallback = updateCallback;\n    this.reason = reason;\n  }\n}\n\nexport {\n  PasswordPrompt,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/password_prompt.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getPDFFileNameFromURL, mozL10n } from './ui_utils';\nimport { createPromiseCapability } from './pdfjs';\nimport { OverlayManager } from './overlay_manager';\n\n/**\n * @typedef {Object} PDFDocumentPropertiesOptions\n * @property {string} overlayName - Name/identifier for the overlay.\n * @property {Object} fields - Names and elements of the overlay's fields.\n * @property {HTMLDivElement} container - Div container for the overlay.\n * @property {HTMLButtonElement} closeButton - Button for closing the overlay.\n */\n\nclass PDFDocumentProperties {\n  /**\n   * @param {PDFDocumentPropertiesOptions} options\n   */\n  constructor(options) {\n    this.overlayName = options.overlayName;\n    this.fields = options.fields;\n    this.container = options.container;\n\n    this.rawFileSize = 0;\n    this.url = null;\n    this.pdfDocument = null;\n\n    // Bind the event listener for the Close button.\n    if (options.closeButton) {\n      options.closeButton.addEventListener('click', this.close.bind(this));\n    }\n    this._dataAvailableCapability = createPromiseCapability();\n\n    OverlayManager.register(this.overlayName, this.container,\n                            this.close.bind(this));\n  }\n\n  /**\n   * Open the document properties overlay.\n   */\n  open() {\n    Promise.all([OverlayManager.open(this.overlayName),\n                 this._dataAvailableCapability.promise]).then(() => {\n      this._getProperties();\n    });\n  }\n\n  /**\n   * Close the document properties overlay.\n   */\n  close() {\n    OverlayManager.close(this.overlayName);\n  }\n\n  /**\n   * Set the file size of the PDF document. This method is used to\n   * update the file size in the document properties overlay once it\n   * is known so we do not have to wait until the entire file is loaded.\n   *\n   * @param {number} fileSize - The file size of the PDF document.\n   */\n  setFileSize(fileSize) {\n    if (fileSize > 0) {\n      this.rawFileSize = fileSize;\n    }\n  }\n\n  /**\n   * Set a reference to the PDF document and the URL in order\n   * to populate the overlay fields with the document properties.\n   * Note that the overlay will contain no information if this method\n   * is not called.\n   *\n   * @param {Object} pdfDocument - A reference to the PDF document.\n   * @param {string} url - The URL of the document.\n   */\n  setDocumentAndUrl(pdfDocument, url) {\n    this.pdfDocument = pdfDocument;\n    this.url = url;\n    this._dataAvailableCapability.resolve();\n  }\n\n  /**\n   * @private\n   */\n  _getProperties() {\n    if (!OverlayManager.active) {\n      // If the dialog was closed before `_dataAvailableCapability` was\n      // resolved, don't bother updating the properties.\n      return;\n    }\n    // Get the file size (if it hasn't already been set).\n    this.pdfDocument.getDownloadInfo().then((data) => {\n      if (data.length === this.rawFileSize) {\n        return;\n      }\n      this.setFileSize(data.length);\n      this._updateUI(this.fields['fileSize'], this._parseFileSize());\n    });\n\n    // Get the document properties.\n    this.pdfDocument.getMetadata().then((data) => {\n      var content = {\n        'fileName': getPDFFileNameFromURL(this.url),\n        'fileSize': this._parseFileSize(),\n        'title': data.info.Title,\n        'author': data.info.Author,\n        'subject': data.info.Subject,\n        'keywords': data.info.Keywords,\n        'creationDate': this._parseDate(data.info.CreationDate),\n        'modificationDate': this._parseDate(data.info.ModDate),\n        'creator': data.info.Creator,\n        'producer': data.info.Producer,\n        'version': data.info.PDFFormatVersion,\n        'pageCount': this.pdfDocument.numPages\n      };\n\n      // Show the properties in the dialog.\n      for (var identifier in content) {\n        this._updateUI(this.fields[identifier], content[identifier]);\n      }\n    });\n  }\n\n  /**\n   * @private\n   */\n  _updateUI(field, content) {\n    if (field && content !== undefined && content !== '') {\n      field.textContent = content;\n    }\n  }\n\n  /**\n   * @private\n   */\n  _parseFileSize() {\n    var fileSize = this.rawFileSize, kb = fileSize / 1024;\n    if (!kb) {\n      return;\n    } else if (kb < 1024) {\n      return mozL10n.get('document_properties_kb', {\n        size_kb: (+kb.toPrecision(3)).toLocaleString(),\n        size_b: fileSize.toLocaleString()\n      }, '{{size_kb}} KB ({{size_b}} bytes)');\n    }\n    return mozL10n.get('document_properties_mb', {\n      size_mb: (+(kb / 1024).toPrecision(3)).toLocaleString(),\n      size_b: fileSize.toLocaleString()\n    }, '{{size_mb}} MB ({{size_b}} bytes)');\n  }\n\n  /**\n   * @private\n   */\n  _parseDate(inputDate) {\n    // This is implemented according to the PDF specification, but note that\n    // Adobe Reader doesn't handle changing the date to universal time\n    // and doesn't use the user's time zone (they're effectively ignoring\n    // the HH' and mm' parts of the date string).\n    var dateToParse = inputDate;\n    if (dateToParse === undefined) {\n      return '';\n    }\n\n    // Remove the D: prefix if it is available.\n    if (dateToParse.substring(0, 2) === 'D:') {\n      dateToParse = dateToParse.substring(2);\n    }\n\n    // Get all elements from the PDF date string.\n    // JavaScript's `Date` object expects the month to be between\n    // 0 and 11 instead of 1 and 12, so we're correcting for this.\n    var year = parseInt(dateToParse.substring(0, 4), 10);\n    var month = parseInt(dateToParse.substring(4, 6), 10) - 1;\n    var day = parseInt(dateToParse.substring(6, 8), 10);\n    var hours = parseInt(dateToParse.substring(8, 10), 10);\n    var minutes = parseInt(dateToParse.substring(10, 12), 10);\n    var seconds = parseInt(dateToParse.substring(12, 14), 10);\n    var utRel = dateToParse.substring(14, 15);\n    var offsetHours = parseInt(dateToParse.substring(15, 17), 10);\n    var offsetMinutes = parseInt(dateToParse.substring(18, 20), 10);\n\n    // As per spec, utRel = 'Z' means equal to universal time.\n    // The other cases ('-' and '+') have to be handled here.\n    if (utRel === '-') {\n      hours += offsetHours;\n      minutes += offsetMinutes;\n    } else if (utRel === '+') {\n      hours -= offsetHours;\n      minutes -= offsetMinutes;\n    }\n\n    // Return the new date format from the user's locale.\n    var date = new Date(Date.UTC(year, month, day, hours, minutes, seconds));\n    var dateString = date.toLocaleDateString();\n    var timeString = date.toLocaleTimeString();\n    return mozL10n.get('document_properties_date_string',\n                       { date: dateString, time: timeString },\n                       '{{date}}, {{time}}');\n  }\n}\n\nexport {\n  PDFDocumentProperties,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/pdf_document_properties.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FindStates } from './pdf_find_controller';\nimport { mozL10n } from './ui_utils';\n\n/**\n * Creates a \"search bar\" given a set of DOM elements that act as controls\n * for searching or for setting search preferences in the UI. This object\n * also sets up the appropriate events for the controls. Actual searching\n * is done by PDFFindController.\n */\nclass PDFFindBar {\n  constructor(options) {\n    this.opened = false;\n\n    this.bar = options.bar || null;\n    this.toggleButton = options.toggleButton || null;\n    this.findField = options.findField || null;\n    this.highlightAll = options.highlightAllCheckbox || null;\n    this.caseSensitive = options.caseSensitiveCheckbox || null;\n    this.findMsg = options.findMsg || null;\n    this.findResultsCount = options.findResultsCount || null;\n    this.findStatusIcon = options.findStatusIcon || null;\n    this.findPreviousButton = options.findPreviousButton || null;\n    this.findNextButton = options.findNextButton || null;\n    this.findController = options.findController || null;\n    this.eventBus = options.eventBus;\n\n    if (this.findController === null) {\n      throw new Error('PDFFindBar cannot be used without a ' +\n                      'PDFFindController instance.');\n    }\n\n    // Add event listeners to the DOM elements.\n    this.toggleButton.addEventListener('click', () => {\n      this.toggle();\n    });\n\n    this.findField.addEventListener('input', () => {\n      this.dispatchEvent('');\n    });\n\n    this.bar.addEventListener('keydown', (e) => {\n      switch (e.keyCode) {\n        case 13: // Enter\n          if (e.target === this.findField) {\n            this.dispatchEvent('again', e.shiftKey);\n          }\n          break;\n        case 27: // Escape\n          this.close();\n          break;\n      }\n    });\n\n    this.findPreviousButton.addEventListener('click', () => {\n      this.dispatchEvent('again', true);\n    });\n\n    this.findNextButton.addEventListener('click', () => {\n      this.dispatchEvent('again', false);\n    });\n\n    this.highlightAll.addEventListener('click', () => {\n      this.dispatchEvent('highlightallchange');\n    });\n\n    this.caseSensitive.addEventListener('click', () => {\n      this.dispatchEvent('casesensitivitychange');\n    });\n\n    this.eventBus.on('resize', this._adjustWidth.bind(this));\n  }\n\n  reset() {\n    this.updateUIState();\n  }\n\n  dispatchEvent(type, findPrev) {\n    this.eventBus.dispatch('find', {\n      source: this,\n      type,\n      query: this.findField.value,\n      caseSensitive: this.caseSensitive.checked,\n      phraseSearch: true,\n      highlightAll: this.highlightAll.checked,\n      findPrevious: findPrev,\n    });\n  }\n\n  updateUIState(state, previous, matchCount) {\n    var notFound = false;\n    var findMsg = '';\n    var status = '';\n\n    switch (state) {\n      case FindStates.FIND_FOUND:\n        break;\n\n      case FindStates.FIND_PENDING:\n        status = 'pending';\n        break;\n\n      case FindStates.FIND_NOTFOUND:\n        findMsg = mozL10n.get('find_not_found', null, 'Phrase not found');\n        notFound = true;\n        break;\n\n      case FindStates.FIND_WRAPPED:\n        if (previous) {\n          findMsg = mozL10n.get('find_reached_top', null,\n            'Reached top of document, continued from bottom');\n        } else {\n          findMsg = mozL10n.get('find_reached_bottom', null,\n            'Reached end of document, continued from top');\n        }\n        break;\n    }\n\n    if (notFound) {\n      this.findField.classList.add('notFound');\n    } else {\n      this.findField.classList.remove('notFound');\n    }\n\n    this.findField.setAttribute('data-status', status);\n    this.findMsg.textContent = findMsg;\n\n    this.updateResultsCount(matchCount);\n    this._adjustWidth();\n  }\n\n  updateResultsCount(matchCount) {\n    if (!this.findResultsCount) {\n      return; // No UI control is provided.\n    }\n\n    // If there are no matches, hide the counter.\n    if (!matchCount) {\n      this.findResultsCount.classList.add('hidden');\n      return;\n    }\n\n    // Create and show the match counter.\n    this.findResultsCount.textContent = matchCount.toLocaleString();\n    this.findResultsCount.classList.remove('hidden');\n  }\n\n  open() {\n    if (!this.opened) {\n      this.opened = true;\n      this.toggleButton.classList.add('toggled');\n      this.bar.classList.remove('hidden');\n    }\n    this.findField.select();\n    this.findField.focus();\n\n    this._adjustWidth();\n  }\n\n  close() {\n    if (!this.opened) {\n      return;\n    }\n    this.opened = false;\n    this.toggleButton.classList.remove('toggled');\n    this.bar.classList.add('hidden');\n    this.findController.active = false;\n  }\n\n  toggle() {\n    if (this.opened) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  /**\n   * @private\n   */\n  _adjustWidth() {\n    if (!this.opened) {\n      return;\n    }\n\n    // The find bar has an absolute position and thus the browser extends\n    // its width to the maximum possible width once the find bar does not fit\n    // entirely within the window anymore (and its elements are automatically\n    // wrapped). Here we detect and fix that.\n    this.bar.classList.remove('wrapContainers');\n\n    var findbarHeight = this.bar.clientHeight;\n    var inputContainerHeight = this.bar.firstElementChild.clientHeight;\n\n    if (findbarHeight > inputContainerHeight) {\n      // The findbar is taller than the input container, which means that\n      // the browser wrapped some of the elements. For a consistent look,\n      // wrap all of them to adjust the width of the find bar.\n      this.bar.classList.add('wrapContainers');\n    }\n  }\n}\n\nexport {\n  PDFFindBar,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/pdf_find_bar.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals chrome */\n\nimport { getGlobalEventBus } from './dom_events';\n\nfunction PDFHistory(options) {\n  this.linkService = options.linkService;\n  this.eventBus = options.eventBus || getGlobalEventBus();\n\n  this.initialized = false;\n  this.initialDestination = null;\n  this.initialBookmark = null;\n}\n\nPDFHistory.prototype = {\n  /**\n   * @param {string} fingerprint\n   */\n  initialize: function pdfHistoryInitialize(fingerprint) {\n    this.initialized = true;\n    this.reInitialized = false;\n    this.allowHashChange = true;\n    this.historyUnlocked = true;\n    this.isViewerInPresentationMode = false;\n\n    this.previousHash = window.location.hash.substring(1);\n    this.currentBookmark = '';\n    this.currentPage = 0;\n    this.updatePreviousBookmark = false;\n    this.previousBookmark = '';\n    this.previousPage = 0;\n    this.nextHashParam = '';\n\n    this.fingerprint = fingerprint;\n    this.currentUid = this.uid = 0;\n    this.current = {};\n\n    var state = window.history.state;\n    if (this._isStateObjectDefined(state)) {\n      // This corresponds to navigating back to the document\n      // from another page in the browser history.\n      if (state.target.dest) {\n        this.initialDestination = state.target.dest;\n      } else {\n        this.initialBookmark = state.target.hash;\n      }\n      this.currentUid = state.uid;\n      this.uid = state.uid + 1;\n      this.current = state.target;\n    } else {\n      // This corresponds to the loading of a new document.\n      if (state && state.fingerprint &&\n        this.fingerprint !== state.fingerprint) {\n        // Reinitialize the browsing history when a new document\n        // is opened in the web viewer.\n        this.reInitialized = true;\n      }\n      this._pushOrReplaceState({fingerprint: this.fingerprint}, true);\n    }\n\n    var self = this;\n    window.addEventListener('popstate', function pdfHistoryPopstate(evt) {\n      if (!self.historyUnlocked) {\n        return;\n      }\n      if (evt.state) {\n        // Move back/forward in the history.\n        self._goTo(evt.state);\n        return;\n      }\n\n      // If the state is not set, then the user tried to navigate to a\n      // different hash by manually editing the URL and pressing Enter, or by\n      // clicking on an in-page link (e.g. the \"current view\" link).\n      // Save the current view state to the browser history.\n\n      // Note: In Firefox, history.null could also be null after an in-page\n      // navigation to the same URL, and without dispatching the popstate\n      // event: https://bugzilla.mozilla.org/show_bug.cgi?id=1183881\n\n      if (self.uid === 0) {\n        // Replace the previous state if it was not explicitly set.\n        var previousParams = (self.previousHash && self.currentBookmark &&\n          self.previousHash !== self.currentBookmark) ?\n          {hash: self.currentBookmark, page: self.currentPage} :\n          {page: 1};\n        replacePreviousHistoryState(previousParams, function() {\n          updateHistoryWithCurrentHash();\n        });\n      } else {\n        updateHistoryWithCurrentHash();\n      }\n    });\n\n\n    function updateHistoryWithCurrentHash() {\n      self.previousHash = window.location.hash.slice(1);\n      self._pushToHistory({hash: self.previousHash}, false, true);\n      self._updatePreviousBookmark();\n    }\n\n    function replacePreviousHistoryState(params, callback) {\n      // To modify the previous history entry, the following happens:\n      // 1. history.back()\n      // 2. _pushToHistory, which calls history.replaceState( ... )\n      // 3. history.forward()\n      // Because a navigation via the history API does not immediately update\n      // the history state, the popstate event is used for synchronization.\n      self.historyUnlocked = false;\n\n      // Suppress the hashchange event to avoid side effects caused by\n      // navigating back and forward.\n      self.allowHashChange = false;\n      window.addEventListener('popstate', rewriteHistoryAfterBack);\n      history.back();\n\n      function rewriteHistoryAfterBack() {\n        window.removeEventListener('popstate', rewriteHistoryAfterBack);\n        window.addEventListener('popstate', rewriteHistoryAfterForward);\n        self._pushToHistory(params, false, true);\n        history.forward();\n      }\n      function rewriteHistoryAfterForward() {\n        window.removeEventListener('popstate', rewriteHistoryAfterForward);\n        self.allowHashChange = true;\n        self.historyUnlocked = true;\n        callback();\n      }\n    }\n\n    function pdfHistoryBeforeUnload() {\n      var previousParams = self._getPreviousParams(null, true);\n      if (previousParams) {\n        var replacePrevious = (!self.current.dest &&\n        self.current.hash !== self.previousHash);\n        self._pushToHistory(previousParams, false, replacePrevious);\n        self._updatePreviousBookmark();\n      }\n      // Remove the event listener when navigating away from the document,\n      // since 'beforeunload' prevents Firefox from caching the document.\n      window.removeEventListener('beforeunload', pdfHistoryBeforeUnload);\n    }\n\n    window.addEventListener('beforeunload', pdfHistoryBeforeUnload);\n\n    window.addEventListener('pageshow', function pdfHistoryPageShow(evt) {\n      // If the entire viewer (including the PDF file) is cached in\n      // the browser, we need to reattach the 'beforeunload' event listener\n      // since the 'DOMContentLoaded' event is not fired on 'pageshow'.\n      window.addEventListener('beforeunload', pdfHistoryBeforeUnload);\n    });\n\n    self.eventBus.on('presentationmodechanged', function(e) {\n      self.isViewerInPresentationMode = e.active;\n    });\n  },\n\n  clearHistoryState: function pdfHistory_clearHistoryState() {\n    this._pushOrReplaceState(null, true);\n  },\n\n  _isStateObjectDefined: function pdfHistory_isStateObjectDefined(state) {\n    return (state && state.uid >= 0 &&\n    state.fingerprint && this.fingerprint === state.fingerprint &&\n    state.target && state.target.hash) ? true : false;\n  },\n\n  _pushOrReplaceState: function pdfHistory_pushOrReplaceState(stateObj,\n                                                              replace) {\n    if (replace) {\n      window.history.replaceState(stateObj, '', document.URL);\n    } else {\n      window.history.pushState(stateObj, '', document.URL);\n    }\n  },\n\n  get isHashChangeUnlocked() {\n    if (!this.initialized) {\n      return true;\n    }\n    return this.allowHashChange;\n  },\n\n  _updatePreviousBookmark: function pdfHistory_updatePreviousBookmark() {\n    if (this.updatePreviousBookmark &&\n      this.currentBookmark && this.currentPage) {\n      this.previousBookmark = this.currentBookmark;\n      this.previousPage = this.currentPage;\n      this.updatePreviousBookmark = false;\n    }\n  },\n\n  updateCurrentBookmark: function pdfHistoryUpdateCurrentBookmark(bookmark,\n                                                                  pageNum) {\n    if (this.initialized) {\n      this.currentBookmark = bookmark.substring(1);\n      this.currentPage = pageNum | 0;\n      this._updatePreviousBookmark();\n    }\n  },\n\n  updateNextHashParam: function pdfHistoryUpdateNextHashParam(param) {\n    if (this.initialized) {\n      this.nextHashParam = param;\n    }\n  },\n\n  push: function pdfHistoryPush(params, isInitialBookmark) {\n    if (!(this.initialized && this.historyUnlocked)) {\n      return;\n    }\n    if (params.dest && !params.hash) {\n      params.hash = (this.current.hash && this.current.dest &&\n      this.current.dest === params.dest) ?\n        this.current.hash :\n        this.linkService.getDestinationHash(params.dest).split('#')[1];\n    }\n    if (params.page) {\n      params.page |= 0;\n    }\n    if (isInitialBookmark) {\n      var target = window.history.state.target;\n      if (!target) {\n        // Invoked when the user specifies an initial bookmark,\n        // thus setting initialBookmark, when the document is loaded.\n        this._pushToHistory(params, false);\n        this.previousHash = window.location.hash.substring(1);\n      }\n      this.updatePreviousBookmark = this.nextHashParam ? false : true;\n      if (target) {\n        // If the current document is reloaded,\n        // avoid creating duplicate entries in the history.\n        this._updatePreviousBookmark();\n      }\n      return;\n    }\n    if (this.nextHashParam) {\n      if (this.nextHashParam === params.hash) {\n        this.nextHashParam = null;\n        this.updatePreviousBookmark = true;\n        return;\n      }\n      this.nextHashParam = null;\n    }\n\n    if (params.hash) {\n      if (this.current.hash) {\n        if (this.current.hash !== params.hash) {\n          this._pushToHistory(params, true);\n        } else {\n          if (!this.current.page && params.page) {\n            this._pushToHistory(params, false, true);\n          }\n          this.updatePreviousBookmark = true;\n        }\n      } else {\n        this._pushToHistory(params, true);\n      }\n    } else if (this.current.page && params.page &&\n      this.current.page !== params.page) {\n      this._pushToHistory(params, true);\n    }\n  },\n\n  _getPreviousParams: function pdfHistory_getPreviousParams(onlyCheckPage,\n                                                            beforeUnload) {\n    if (!(this.currentBookmark && this.currentPage)) {\n      return null;\n    } else if (this.updatePreviousBookmark) {\n      this.updatePreviousBookmark = false;\n    }\n    if (this.uid > 0 && !(this.previousBookmark && this.previousPage)) {\n      // Prevent the history from getting stuck in the current state,\n      // effectively preventing the user from going back/forward in\n      // the history.\n      //\n      // This happens if the current position in the document didn't change\n      // when the history was previously updated. The reasons for this are\n      // either:\n      // 1. The current zoom value is such that the document does not need to,\n      //    or cannot, be scrolled to display the destination.\n      // 2. The previous destination is broken, and doesn't actally point to a\n      //    position within the document.\n      //    (This is either due to a bad PDF generator, or the user making a\n      //     mistake when entering a destination in the hash parameters.)\n      return null;\n    }\n    if ((!this.current.dest && !onlyCheckPage) || beforeUnload) {\n      if (this.previousBookmark === this.currentBookmark) {\n        return null;\n      }\n    } else if (this.current.page || onlyCheckPage) {\n      if (this.previousPage === this.currentPage) {\n        return null;\n      }\n    } else {\n      return null;\n    }\n    var params = {hash: this.currentBookmark, page: this.currentPage};\n    if (this.isViewerInPresentationMode) {\n      params.hash = null;\n    }\n    return params;\n  },\n\n  _stateObj: function pdfHistory_stateObj(params) {\n    return {fingerprint: this.fingerprint, uid: this.uid, target: params};\n  },\n\n  _pushToHistory: function pdfHistory_pushToHistory(params,\n                                                    addPrevious, overwrite) {\n    if (!this.initialized) {\n      return;\n    }\n    if (!params.hash && params.page) {\n      params.hash = ('page=' + params.page);\n    }\n    if (addPrevious && !overwrite) {\n      var previousParams = this._getPreviousParams();\n      if (previousParams) {\n        var replacePrevious = (!this.current.dest &&\n        this.current.hash !== this.previousHash);\n        this._pushToHistory(previousParams, false, replacePrevious);\n      }\n    }\n    this._pushOrReplaceState(this._stateObj(params),\n      (overwrite || this.uid === 0));\n    this.currentUid = this.uid++;\n    this.current = params;\n    this.updatePreviousBookmark = true;\n  },\n\n  _goTo: function pdfHistory_goTo(state) {\n    if (!(this.initialized && this.historyUnlocked &&\n      this._isStateObjectDefined(state))) {\n      return;\n    }\n    if (!this.reInitialized && state.uid < this.currentUid) {\n      var previousParams = this._getPreviousParams(true);\n      if (previousParams) {\n        this._pushToHistory(this.current, false);\n        this._pushToHistory(previousParams, false);\n        this.currentUid = state.uid;\n        window.history.back();\n        return;\n      }\n    }\n    this.historyUnlocked = false;\n\n    if (state.target.dest) {\n      this.linkService.navigateTo(state.target.dest);\n    } else {\n      this.linkService.setHash(state.target.hash);\n    }\n    this.currentUid = state.uid;\n    if (state.uid > this.uid) {\n      this.uid = state.uid;\n    }\n    this.current = state.target;\n    this.updatePreviousBookmark = true;\n\n    var currentHash = window.location.hash.substring(1);\n    if (this.previousHash !== currentHash) {\n      this.allowHashChange = false;\n    }\n    this.previousHash = currentHash;\n\n    this.historyUnlocked = true;\n  },\n\n  back: function pdfHistoryBack() {\n    this.go(-1);\n  },\n\n  forward: function pdfHistoryForward() {\n    this.go(1);\n  },\n\n  go: function pdfHistoryGo(direction) {\n    if (this.initialized && this.historyUnlocked) {\n      var state = window.history.state;\n      if (direction === -1 && state && state.uid > 0) {\n        window.history.back();\n      } else if (direction === 1 && state && state.uid < (this.uid - 1)) {\n        window.history.forward();\n      }\n    }\n  }\n};\n\nexport {\n  PDFHistory,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/pdf_history.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  addLinkAttributes, PDFJS, removeNullCharacters\n} from './pdfjs';\n\nconst DEFAULT_TITLE = '\\u2013';\n\n/**\n * @typedef {Object} PDFOutlineViewerOptions\n * @property {HTMLDivElement} container - The viewer element.\n * @property {IPDFLinkService} linkService - The navigation/linking service.\n * @property {EventBus} eventBus - The application event bus.\n */\n\n/**\n * @typedef {Object} PDFOutlineViewerRenderParameters\n * @property {Array|null} outline - An array of outline objects.\n */\n\nclass PDFOutlineViewer {\n  /**\n   * @param {PDFOutlineViewerOptions} options\n   */\n  constructor(options) {\n    this.outline = null;\n    this.lastToggleIsShow = true;\n\n    this.container = options.container;\n    this.linkService = options.linkService;\n    this.eventBus = options.eventBus;\n  }\n\n  reset() {\n    this.outline = null;\n    this.lastToggleIsShow = true;\n\n    // Remove the outline from the DOM.\n    this.container.textContent = '';\n\n    // Ensure that the left (right in RTL locales) margin is always reset,\n    // to prevent incorrect outline alignment if a new document is opened.\n    this.container.classList.remove('outlineWithDeepNesting');\n  }\n\n  /**\n   * @private\n   */\n  _dispatchEvent(outlineCount) {\n    this.eventBus.dispatch('outlineloaded', {\n      source: this,\n      outlineCount,\n    });\n  }\n\n  /**\n   * @private\n   */\n  _bindLink(element, item) {\n    if (item.url) {\n      addLinkAttributes(element, {\n        url: item.url,\n        target: (item.newWindow ? PDFJS.LinkTarget.BLANK : undefined),\n      });\n      return;\n    }\n    var destination = item.dest;\n\n    element.href = this.linkService.getDestinationHash(destination);\n    element.onclick = () => {\n      if (destination) {\n        this.linkService.navigateTo(destination);\n      }\n      return false;\n    };\n  }\n\n  /**\n   * @private\n   */\n  _setStyles(element, item) {\n    var styleStr = '';\n    if (item.bold) {\n      styleStr += 'font-weight: bold;';\n    }\n    if (item.italic) {\n      styleStr += 'font-style: italic;';\n    }\n\n    if (styleStr) {\n      element.setAttribute('style', styleStr);\n    }\n  }\n\n  /**\n   * Prepend a button before an outline item which allows the user to toggle\n   * the visibility of all outline items at that level.\n   *\n   * @private\n   */\n  _addToggleButton(div) {\n    var toggler = document.createElement('div');\n    toggler.className = 'outlineItemToggler';\n    toggler.onclick = (evt) => {\n      evt.stopPropagation();\n      toggler.classList.toggle('outlineItemsHidden');\n\n      if (evt.shiftKey) {\n        var shouldShowAll = !toggler.classList.contains('outlineItemsHidden');\n        this._toggleOutlineItem(div, shouldShowAll);\n      }\n    };\n    div.insertBefore(toggler, div.firstChild);\n  }\n\n  /**\n   * Toggle the visibility of the subtree of an outline item.\n   *\n   * @param {Element} root - the root of the outline (sub)tree.\n   * @param {boolean} show - whether to show the outline (sub)tree. If false,\n   *   the outline subtree rooted at |root| will be collapsed.\n   *\n   * @private\n   */\n  _toggleOutlineItem(root, show) {\n    this.lastToggleIsShow = show;\n    var togglers = root.querySelectorAll('.outlineItemToggler');\n    for (var i = 0, ii = togglers.length; i < ii; ++i) {\n      togglers[i].classList[show ? 'remove' : 'add']('outlineItemsHidden');\n    }\n  }\n\n  /**\n   * Collapse or expand all subtrees of the outline.\n   */\n  toggleOutlineTree() {\n    if (!this.outline) {\n      return;\n    }\n    this._toggleOutlineItem(this.container, !this.lastToggleIsShow);\n  }\n\n  /**\n   * @param {PDFOutlineViewerRenderParameters} params\n   */\n  render(params = {}) {\n    var outline = params.outline || null;\n    var outlineCount = 0;\n\n    if (this.outline) {\n      this.reset();\n    }\n    this.outline = outline;\n\n    if (!outline) {\n      this._dispatchEvent(outlineCount);\n      return;\n    }\n\n    var fragment = document.createDocumentFragment();\n    var queue = [{ parent: fragment, items: this.outline }];\n    var hasAnyNesting = false;\n    while (queue.length > 0) {\n      var levelData = queue.shift();\n      for (var i = 0, len = levelData.items.length; i < len; i++) {\n        var item = levelData.items[i];\n\n        var div = document.createElement('div');\n        div.className = 'outlineItem';\n\n        var element = document.createElement('a');\n        this._bindLink(element, item);\n        this._setStyles(element, item);\n        element.textContent =\n          removeNullCharacters(item.title) || DEFAULT_TITLE;\n\n        div.appendChild(element);\n\n        if (item.items.length > 0) {\n          hasAnyNesting = true;\n          this._addToggleButton(div);\n\n          var itemsDiv = document.createElement('div');\n          itemsDiv.className = 'outlineItems';\n          div.appendChild(itemsDiv);\n          queue.push({ parent: itemsDiv, items: item.items });\n        }\n\n        levelData.parent.appendChild(div);\n        outlineCount++;\n      }\n    }\n    if (hasAnyNesting) {\n      this.container.classList.add('outlineWithDeepNesting');\n    }\n\n    this.container.appendChild(fragment);\n\n    this._dispatchEvent(outlineCount);\n  }\n}\n\nexport {\n  PDFOutlineViewer,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/pdf_outline_viewer.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  approximateFraction, CSS_UNITS, DEFAULT_SCALE, getOutputScale, RendererType,\n  roundToDivide\n} from './ui_utils';\nimport {\n  createPromiseCapability, CustomStyle, PDFJS, RenderingCancelledException,\n  SVGGraphics\n} from './pdfjs';\nimport { getGlobalEventBus } from './dom_events';\nimport { RenderingStates } from './pdf_rendering_queue';\n\nvar TEXT_LAYER_RENDER_DELAY = 200; // ms\n\n/**\n * @typedef {Object} PDFPageViewOptions\n * @property {HTMLDivElement} container - The viewer element.\n * @property {EventBus} eventBus - The application event bus.\n * @property {number} id - The page unique ID (normally its number).\n * @property {number} scale - The page scale display.\n * @property {PageViewport} defaultViewport - The page viewport.\n * @property {PDFRenderingQueue} renderingQueue - The rendering queue object.\n * @property {IPDFTextLayerFactory} textLayerFactory\n * @property {IPDFAnnotationLayerFactory} annotationLayerFactory\n * @property {INoteLayerFactory} noteLayerFactory\n * @property {boolean} enhanceTextSelection - Turns on the text selection\n *   enhancement. The default is `false`.\n * @property {boolean} renderInteractiveForms - Turns on rendering of\n *   interactive form elements. The default is `false`.\n * @property {string} renderer - 'canvas' or 'svg'. The default is 'canvas'.\n */\n\n/**\n * @class\n * @implements {IRenderableView}\n */\nvar PDFPageView = (function PDFPageViewClosure() {\n  /**\n   * @constructs PDFPageView\n   * @param {PDFPageViewOptions} options\n   */\n  function PDFPageView(options) {\n    var container = options.container;\n    var id = options.id;\n    var scale = options.scale;\n    var defaultViewport = options.defaultViewport;\n    var renderingQueue = options.renderingQueue;\n    var textLayerFactory = options.textLayerFactory;\n    var annotationLayerFactory = options.annotationLayerFactory;\n    var noteLayerFactory = options.noteLayerFactory;\n    var enhanceTextSelection = options.enhanceTextSelection || false;\n    var renderInteractiveForms = options.renderInteractiveForms || false;\n\n    this.id = id;\n    this.renderingId = 'page' + id;\n    this.pageLabel = null;\n\n    this.rotation = 0;\n    this.scale = scale || DEFAULT_SCALE;\n    this.viewport = defaultViewport;\n    this.pdfPageRotate = defaultViewport.rotation;\n    this.hasRestrictedScaling = false;\n    this.enhanceTextSelection = enhanceTextSelection;\n    this.renderInteractiveForms = renderInteractiveForms;\n\n    this.eventBus = options.eventBus || getGlobalEventBus();\n    this.renderingQueue = renderingQueue;\n    this.textLayerFactory = textLayerFactory;\n    this.annotationLayerFactory = annotationLayerFactory;\n    this.noteLayerFactory = noteLayerFactory;\n    this.renderer = options.renderer || RendererType.CANVAS;\n\n    this.paintTask = null;\n    this.paintedViewportMap = new WeakMap();\n    this.renderingState = RenderingStates.INITIAL;\n    this.resume = null;\n    this.error = null;\n\n    this.onBeforeDraw = null;\n    this.onAfterDraw = null;\n\n    this.textLayer = null;\n\n    this.zoomLayer = null;\n\n    this.annotationLayer = null;\n    this.noteLayer = null;\n\n    var div = document.createElement('div');\n    div.className = 'page';\n    div.style.width = Math.floor(this.viewport.width) + 'px';\n    div.style.height = Math.floor(this.viewport.height) + 'px';\n    div.setAttribute('data-page-number', this.id);\n    this.div = div;\n\n    container.appendChild(div);\n  }\n\n  PDFPageView.prototype = {\n    setPdfPage: function PDFPageView_setPdfPage(pdfPage) {\n      this.pdfPage = pdfPage;\n      this.pdfPageRotate = pdfPage.rotate;\n      var totalRotation = (this.rotation + this.pdfPageRotate) % 360;\n      this.viewport = pdfPage.getViewport(this.scale * CSS_UNITS,\n                                          totalRotation);\n      this.stats = pdfPage.stats;\n      this.reset();\n    },\n\n    destroy: function PDFPageView_destroy() {\n      this.reset();\n      if (this.pdfPage) {\n        this.pdfPage.cleanup();\n      }\n    },\n\n    /**\n     * @private\n     */\n    _resetZoomLayer(removeFromDOM = false) {\n      if (!this.zoomLayer) {\n        return;\n      }\n      var zoomLayerCanvas = this.zoomLayer.firstChild;\n      this.paintedViewportMap.delete(zoomLayerCanvas);\n      // Zeroing the width and height causes Firefox to release graphics\n      // resources immediately, which can greatly reduce memory consumption.\n      zoomLayerCanvas.width = 0;\n      zoomLayerCanvas.height = 0;\n\n      if (removeFromDOM) {\n        // Note: ChildNode.remove doesn't throw if the parentNode is undefined.\n        this.zoomLayer.remove();\n      }\n      this.zoomLayer = null;\n    },\n\n    reset: function PDFPageView_reset(keepZoomLayer, keepAnnotations) {\n      this.cancelRendering();\n\n      var div = this.div;\n      div.style.width = Math.floor(this.viewport.width) + 'px';\n      div.style.height = Math.floor(this.viewport.height) + 'px';\n\n      var childNodes = div.childNodes;\n      var currentZoomLayerNode = (keepZoomLayer && this.zoomLayer) || null;\n      var currentAnnotationNode = (keepAnnotations && this.annotationLayer &&\n                                   this.annotationLayer.div) || null;\n      var currentNoteNode = (keepAnnotations && this.noteLayer &&\n                             this.noteLayer.div) || null;\n      for (var i = childNodes.length - 1; i >= 0; i--) {\n        var node = childNodes[i];\n        if (currentZoomLayerNode === node || currentAnnotationNode === node ||\n            currentNoteNode === node) {\n          continue;\n        }\n        div.removeChild(node);\n      }\n      div.removeAttribute('data-loaded');\n\n      if (currentAnnotationNode) {\n        // Hide annotationLayer until all elements are resized\n        // so they are not displayed on the already-resized page\n        this.annotationLayer.hide();\n      } else {\n        this.annotationLayer = null;\n      }\n\n      if (currentNoteNode) {\n        this.noteLayer.hide();\n      } else {\n        this.noteLayer = null;\n      }\n\n      if (!currentZoomLayerNode) {\n        if (this.canvas) {\n          this.paintedViewportMap.delete(this.canvas);\n          // Zeroing the width and height causes Firefox to release graphics\n          // resources immediately, which can greatly reduce memory consumption.\n          this.canvas.width = 0;\n          this.canvas.height = 0;\n          delete this.canvas;\n        }\n        this._resetZoomLayer();\n      }\n      if (this.svg) {\n        this.paintedViewportMap.delete(this.svg);\n        delete this.svg;\n      }\n\n      this.loadingIconDiv = document.createElement('div');\n      this.loadingIconDiv.className = 'loadingIcon';\n      div.appendChild(this.loadingIconDiv);\n    },\n\n    update: function PDFPageView_update(scale, rotation) {\n      this.scale = scale || this.scale;\n\n      if (typeof rotation !== 'undefined') {\n        this.rotation = rotation;\n      }\n\n      var totalRotation = (this.rotation + this.pdfPageRotate) % 360;\n      this.viewport = this.viewport.clone({\n        scale: this.scale * CSS_UNITS,\n        rotation: totalRotation\n      });\n\n      if (this.svg) {\n        this.cssTransform(this.svg, true);\n\n        this.eventBus.dispatch('pagerendered', {\n          source: this,\n          pageNumber: this.id,\n          cssTransform: true,\n        });\n        return;\n      }\n\n      var isScalingRestricted = false;\n      if (this.canvas && PDFJS.maxCanvasPixels > 0) {\n        var outputScale = this.outputScale;\n        if (((Math.floor(this.viewport.width) * outputScale.sx) | 0) *\n            ((Math.floor(this.viewport.height) * outputScale.sy) | 0) >\n            PDFJS.maxCanvasPixels) {\n          isScalingRestricted = true;\n        }\n      }\n\n      if (this.canvas) {\n        if (PDFJS.useOnlyCssZoom ||\n            (this.hasRestrictedScaling && isScalingRestricted)) {\n          this.cssTransform(this.canvas, true);\n\n          this.eventBus.dispatch('pagerendered', {\n            source: this,\n            pageNumber: this.id,\n            cssTransform: true,\n          });\n          return;\n        }\n        if (!this.zoomLayer) {\n          this.zoomLayer = this.canvas.parentNode;\n          this.zoomLayer.style.position = 'absolute';\n        }\n      }\n      if (this.zoomLayer) {\n        this.cssTransform(this.zoomLayer.firstChild);\n      }\n      this.reset(/* keepZoomLayer = */ true, /* keepAnnotations = */ true);\n    },\n\n    cancelRendering: function PDFPageView_cancelRendering() {\n      if (this.paintTask) {\n        this.paintTask.cancel();\n        this.paintTask = null;\n      }\n      this.renderingState = RenderingStates.INITIAL;\n      this.resume = null;\n\n      if (this.textLayer) {\n        this.textLayer.cancel();\n        this.textLayer = null;\n      }\n    },\n\n    /**\n     * Called when moved in the parent's container.\n     */\n    updatePosition: function PDFPageView_updatePosition() {\n      if (this.textLayer) {\n        this.textLayer.render(TEXT_LAYER_RENDER_DELAY);\n      }\n    },\n\n    cssTransform: function PDFPageView_transform(target, redrawAnnotations) {\n      // Scale target (canvas or svg), its wrapper, and page container.\n      var width = this.viewport.width;\n      var height = this.viewport.height;\n      var div = this.div;\n      target.style.width = target.parentNode.style.width = div.style.width =\n        Math.floor(width) + 'px';\n      target.style.height = target.parentNode.style.height = div.style.height =\n        Math.floor(height) + 'px';\n      // The canvas may have been originally rotated, rotate relative to that.\n      var relativeRotation = this.viewport.rotation -\n                             this.paintedViewportMap.get(target).rotation;\n      var absRotation = Math.abs(relativeRotation);\n      var scaleX = 1, scaleY = 1;\n      if (absRotation === 90 || absRotation === 270) {\n        // Scale x and y because of the rotation.\n        scaleX = height / width;\n        scaleY = width / height;\n      }\n      var cssTransform = 'rotate(' + relativeRotation + 'deg) ' +\n        'scale(' + scaleX + ',' + scaleY + ')';\n      CustomStyle.setProp('transform', target, cssTransform);\n\n      if (this.textLayer) {\n        // Rotating the text layer is more complicated since the divs inside the\n        // the text layer are rotated.\n        // TODO: This could probably be simplified by drawing the text layer in\n        // one orientation then rotating overall.\n        var textLayerViewport = this.textLayer.viewport;\n        var textRelativeRotation = this.viewport.rotation -\n          textLayerViewport.rotation;\n        var textAbsRotation = Math.abs(textRelativeRotation);\n        var scale = width / textLayerViewport.width;\n        if (textAbsRotation === 90 || textAbsRotation === 270) {\n          scale = width / textLayerViewport.height;\n        }\n        var textLayerDiv = this.textLayer.textLayerDiv;\n        var transX, transY;\n        switch (textAbsRotation) {\n          case 0:\n            transX = transY = 0;\n            break;\n          case 90:\n            transX = 0;\n            transY = '-' + textLayerDiv.style.height;\n            break;\n          case 180:\n            transX = '-' + textLayerDiv.style.width;\n            transY = '-' + textLayerDiv.style.height;\n            break;\n          case 270:\n            transX = '-' + textLayerDiv.style.width;\n            transY = 0;\n            break;\n          default:\n            console.error('Bad rotation value.');\n            break;\n        }\n        CustomStyle.setProp('transform', textLayerDiv,\n            'rotate(' + textAbsRotation + 'deg) ' +\n            'scale(' + scale + ', ' + scale + ') ' +\n            'translate(' + transX + ', ' + transY + ')');\n        CustomStyle.setProp('transformOrigin', textLayerDiv, '0% 0%');\n      }\n\n      if (redrawAnnotations && this.annotationLayer) {\n        this.annotationLayer.render(this.viewport, 'display');\n      }\n\n      if (this.noteLayer) {\n        this.noteLayer.render(this.viewport);\n      }\n    },\n\n    get width() {\n      return this.viewport.width;\n    },\n\n    get height() {\n      return this.viewport.height;\n    },\n\n    getPagePoint: function PDFPageView_getPagePoint(x, y) {\n      return this.viewport.convertToPdfPoint(x, y);\n    },\n\n    draw: function PDFPageView_draw() {\n      if (this.renderingState !== RenderingStates.INITIAL) {\n        console.error('Must be in new state before drawing');\n        this.reset(); // Ensure that we reset all state to prevent issues.\n      }\n\n      this.renderingState = RenderingStates.RUNNING;\n\n      var self = this;\n      var pdfPage = this.pdfPage;\n      var div = this.div;\n      // Wrap the canvas so if it has a css transform for highdpi the overflow\n      // will be hidden in FF.\n      var canvasWrapper = document.createElement('div');\n      canvasWrapper.style.width = div.style.width;\n      canvasWrapper.style.height = div.style.height;\n      canvasWrapper.classList.add('canvasWrapper');\n\n      // need ordering: canvas, text, annotations, notes\n      if (this.annotationLayer && this.annotationLayer.div) {\n        div.insertBefore(canvasWrapper, this.annotationLayer.div);\n      } else if (this.noteLayer && this.noteLayer.div) {\n        div.insertBefore(canvasWrapper, this.noteLayer.div);\n      } else {\n        div.appendChild(canvasWrapper);\n      }\n\n      var textLayerDiv = null;\n      var textLayer = null;\n      if (this.textLayerFactory) {\n        textLayerDiv = document.createElement('div');\n        textLayerDiv.className = 'textLayer';\n        textLayerDiv.style.width = canvasWrapper.style.width;\n        textLayerDiv.style.height = canvasWrapper.style.height;\n\n        // need ordering: canvas, text, annotations, div\n        if (this.annotationLayer && this.annotationLayer.div) {\n          div.insertBefore(textLayerDiv, this.annotationLayer.div);\n        } else if (this.noteLayer && this.noteLayer.div) {\n          div.insertBefore(textLayerDiv, this.noteLayer.div);\n        } else {\n          div.appendChild(textLayerDiv);\n        }\n\n        textLayer = this.textLayerFactory.\n          createTextLayerBuilder(textLayerDiv, this.id - 1, this.viewport,\n                                 this.enhanceTextSelection);\n      }\n      this.textLayer = textLayer;\n\n      var renderContinueCallback = null;\n      if (this.renderingQueue) {\n        renderContinueCallback = function renderContinueCallback(cont) {\n          if (!self.renderingQueue.isHighestPriority(self)) {\n            self.renderingState = RenderingStates.PAUSED;\n            self.resume = function resumeCallback() {\n              self.renderingState = RenderingStates.RUNNING;\n              cont();\n            };\n            return;\n          }\n          cont();\n        };\n      }\n\n      var finishPaintTask = function finishPaintTask(error) {\n        // The paintTask may have been replaced by a new one, so only remove\n        // the reference to the paintTask if it matches the one that is\n        // triggering this callback.\n        if (paintTask === self.paintTask) {\n          self.paintTask = null;\n        }\n\n        if (((typeof PDFJSDev === 'undefined' ||\n              !PDFJSDev.test('PDFJS_NEXT')) && error === 'cancelled') ||\n            error instanceof RenderingCancelledException) {\n          self.error = null;\n          return Promise.resolve(undefined);\n        }\n\n        self.renderingState = RenderingStates.FINISHED;\n\n        if (self.loadingIconDiv) {\n          div.removeChild(self.loadingIconDiv);\n          delete self.loadingIconDiv;\n        }\n        self._resetZoomLayer(/* removeFromDOM = */ true);\n\n        self.error = error;\n        self.stats = pdfPage.stats;\n        if (self.onAfterDraw) {\n          self.onAfterDraw();\n        }\n        self.eventBus.dispatch('pagerendered', {\n          source: self,\n          pageNumber: self.id,\n          cssTransform: false,\n        });\n\n        if (error) {\n          return Promise.reject(error);\n        }\n        return Promise.resolve(undefined);\n      };\n\n      var paintTask = this.renderer === RendererType.SVG ?\n        this.paintOnSvg(canvasWrapper) :\n        this.paintOnCanvas(canvasWrapper);\n      paintTask.onRenderContinue = renderContinueCallback;\n      this.paintTask = paintTask;\n\n      var resultPromise = paintTask.promise.then(function () {\n        return finishPaintTask(null).then(function () {\n          if (textLayer) {\n            pdfPage.getTextContent({\n              normalizeWhitespace: true,\n            }).then(function textContentResolved(textContent) {\n              textLayer.setTextContent(textContent);\n              textLayer.render(TEXT_LAYER_RENDER_DELAY);\n            });\n          }\n        });\n      }, function (reason) {\n        return finishPaintTask(reason);\n      });\n\n      if (this.annotationLayerFactory) {\n        if (!this.annotationLayer) {\n          this.annotationLayer = this.annotationLayerFactory.\n            createAnnotationLayerBuilder(div, pdfPage,\n                                         this.renderInteractiveForms);\n        }\n        this.annotationLayer.render(this.viewport, 'display');\n      }\n\n      if (this.noteLayerFactory) {\n        if (!this.noteLayer) {\n          this.noteLayer = this.noteLayerFactory.\n            createNoteLayerBuilder(div, pdfPage);\n        }\n        this.noteLayer.render(this.viewport);\n      }\n\n      div.setAttribute('data-loaded', true);\n\n      if (this.onBeforeDraw) {\n        this.onBeforeDraw();\n      }\n      return resultPromise;\n    },\n\n    paintOnCanvas(canvasWrapper) {\n      var renderCapability = createPromiseCapability();\n\n      var result = {\n        promise: renderCapability.promise,\n        onRenderContinue(cont) {\n          cont();\n        },\n        cancel() {\n          renderTask.cancel();\n        }\n      };\n\n      var viewport = this.viewport;\n      var canvas = document.createElement('canvas');\n      canvas.id = 'page' + this.id;\n      // Keep the canvas hidden until the first draw callback, or until drawing\n      // is complete when `!this.renderingQueue`, to prevent black flickering.\n      canvas.setAttribute('hidden', 'hidden');\n      var isCanvasHidden = true;\n      var showCanvas = function () {\n        if (isCanvasHidden) {\n          canvas.removeAttribute('hidden');\n          isCanvasHidden = false;\n        }\n      };\n\n      canvasWrapper.appendChild(canvas);\n      this.canvas = canvas;\n\n      canvas.mozOpaque = true;\n\n      var ctx = canvas.getContext('2d', {alpha: false});\n      var outputScale = getOutputScale(ctx);\n      this.outputScale = outputScale;\n\n      if (PDFJS.useOnlyCssZoom) {\n        var actualSizeViewport = viewport.clone({scale: CSS_UNITS});\n        // Use a scale that will make the canvas be the original intended size\n        // of the page.\n        outputScale.sx *= actualSizeViewport.width / viewport.width;\n        outputScale.sy *= actualSizeViewport.height / viewport.height;\n        outputScale.scaled = true;\n      }\n\n      if (PDFJS.maxCanvasPixels > 0) {\n        var pixelsInViewport = viewport.width * viewport.height;\n        var maxScale = Math.sqrt(PDFJS.maxCanvasPixels / pixelsInViewport);\n        if (outputScale.sx > maxScale || outputScale.sy > maxScale) {\n          outputScale.sx = maxScale;\n          outputScale.sy = maxScale;\n          outputScale.scaled = true;\n          this.hasRestrictedScaling = true;\n        } else {\n          this.hasRestrictedScaling = false;\n        }\n      }\n\n      var sfx = approximateFraction(outputScale.sx);\n      var sfy = approximateFraction(outputScale.sy);\n      canvas.width = roundToDivide(viewport.width * outputScale.sx, sfx[0]);\n      canvas.height = roundToDivide(viewport.height * outputScale.sy, sfy[0]);\n      canvas.style.width = roundToDivide(viewport.width, sfx[1]) + 'px';\n      canvas.style.height = roundToDivide(viewport.height, sfy[1]) + 'px';\n      // Add the viewport so it's known what it was originally drawn with.\n      this.paintedViewportMap.set(canvas, viewport);\n\n      // Rendering area\n      var transform = !outputScale.scaled ? null :\n        [outputScale.sx, 0, 0, outputScale.sy, 0, 0];\n      var renderContext = {\n        canvasContext: ctx,\n        transform,\n        viewport: this.viewport,\n        renderInteractiveForms: this.renderInteractiveForms,\n        // intent: 'default', // === 'display'\n      };\n      var renderTask = this.pdfPage.render(renderContext);\n      renderTask.onContinue = function (cont) {\n        showCanvas();\n        if (result.onRenderContinue) {\n          result.onRenderContinue(cont);\n        } else {\n          cont();\n        }\n      };\n\n      renderTask.promise.then(\n        function pdfPageRenderCallback() {\n          showCanvas();\n          renderCapability.resolve(undefined);\n        },\n        function pdfPageRenderError(error) {\n          showCanvas();\n          renderCapability.reject(error);\n        }\n      );\n\n      return result;\n    },\n\n    paintOnSvg: function PDFPageView_paintOnSvg(wrapper) {\n      var cancelled = false;\n      var ensureNotCancelled = function () {\n        if (cancelled) {\n          if ((typeof PDFJSDev !== 'undefined' &&\n               PDFJSDev.test('PDFJS_NEXT')) || PDFJS.pdfjsNext) {\n            throw new RenderingCancelledException(\n              'Rendering cancelled, page ' + self.id, 'svg');\n          } else {\n            throw 'cancelled'; // eslint-disable-line no-throw-literal\n          }\n        }\n      };\n\n      var self = this;\n      var pdfPage = this.pdfPage;\n      var actualSizeViewport = this.viewport.clone({scale: CSS_UNITS});\n      var promise = pdfPage.getOperatorList().then(function (opList) {\n        ensureNotCancelled();\n        var svgGfx = new SVGGraphics(pdfPage.commonObjs, pdfPage.objs);\n        return svgGfx.getSVG(opList, actualSizeViewport).then(function (svg) {\n          ensureNotCancelled();\n          self.svg = svg;\n          self.paintedViewportMap.set(svg, actualSizeViewport);\n\n          svg.style.width = wrapper.style.width;\n          svg.style.height = wrapper.style.height;\n          self.renderingState = RenderingStates.FINISHED;\n          wrapper.appendChild(svg);\n        });\n      });\n\n      return {\n        promise,\n        onRenderContinue(cont) {\n          cont();\n        },\n        cancel() {\n          cancelled = true;\n        }\n      };\n    },\n\n    updateNotes: function PDFView_updateNotes() {\n      if (this.noteLayer) {\n        this.noteLayer.render(this.viewport);\n      }\n    },\n\n    /**\n     * @param {string|null} label\n     */\n    setPageLabel: function PDFView_setPageLabel(label) {\n      this.pageLabel = (typeof label === 'string' ? label : null);\n\n      if (this.pageLabel !== null) {\n        this.div.setAttribute('data-page-label', this.pageLabel);\n      } else {\n        this.div.removeAttribute('data-page-label');\n      }\n    },\n  };\n\n  return PDFPageView;\n})();\n\nexport {\n  PDFPageView,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/pdf_page_view.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { normalizeWheelEventDelta } from './ui_utils';\n\nconst DELAY_BEFORE_RESETTING_SWITCH_IN_PROGRESS = 1500; // in ms\nconst DELAY_BEFORE_HIDING_CONTROLS = 3000; // in ms\nconst ACTIVE_SELECTOR = 'pdfPresentationMode';\nconst CONTROLS_SELECTOR = 'pdfPresentationModeControls';\nconst MOUSE_SCROLL_COOLDOWN_TIME = 50; // in ms\nconst PAGE_SWITCH_THRESHOLD = 0.1;\n\n// Number of CSS pixels for a movement to count as a swipe.\nconst SWIPE_MIN_DISTANCE_THRESHOLD = 50;\n\n// Swipe angle deviation from the x or y axis before it is not\n// considered a swipe in that direction any more.\nconst SWIPE_ANGLE_THRESHOLD = Math.PI / 6;\n\n/**\n * @typedef {Object} PDFPresentationModeOptions\n * @property {HTMLDivElement} container - The container for the viewer element.\n * @property {HTMLDivElement} viewer - (optional) The viewer element.\n * @property {PDFViewer} pdfViewer - The document viewer.\n * @property {EventBus} eventBus - The application event bus.\n * @property {Array} contextMenuItems - (optional) The menuitems that are added\n *   to the context menu in Presentation Mode.\n */\n\nclass PDFPresentationMode {\n  /**\n   * @param {PDFPresentationModeOptions} options\n   */\n  constructor(options) {\n    this.container = options.container;\n    this.viewer = options.viewer || options.container.firstElementChild;\n    this.pdfViewer = options.pdfViewer;\n    this.eventBus = options.eventBus;\n    var contextMenuItems = options.contextMenuItems || null;\n\n    this.active = false;\n    this.args = null;\n    this.contextMenuOpen = false;\n    this.mouseScrollTimeStamp = 0;\n    this.mouseScrollDelta = 0;\n    this.touchSwipeState = null;\n\n    if (contextMenuItems) {\n      contextMenuItems.contextFirstPage.addEventListener('click', () => {\n        this.contextMenuOpen = false;\n        this.eventBus.dispatch('firstpage');\n      });\n      contextMenuItems.contextLastPage.addEventListener('click', () => {\n        this.contextMenuOpen = false;\n        this.eventBus.dispatch('lastpage');\n      });\n      contextMenuItems.contextPageRotateCw.addEventListener('click', () => {\n        this.contextMenuOpen = false;\n        this.eventBus.dispatch('rotatecw');\n      });\n      contextMenuItems.contextPageRotateCcw.addEventListener('click', () => {\n        this.contextMenuOpen = false;\n        this.eventBus.dispatch('rotateccw');\n      });\n    }\n  }\n\n  /**\n   * Request the browser to enter fullscreen mode.\n   * @returns {boolean} Indicating if the request was successful.\n   */\n  request() {\n    if (this.switchInProgress || this.active || !this.viewer.hasChildNodes()) {\n      return false;\n    }\n    this._addFullscreenChangeListeners();\n    this._setSwitchInProgress();\n    this._notifyStateChange();\n\n    if (this.container.requestFullscreen) {\n      this.container.requestFullscreen();\n    } else if (this.container.mozRequestFullScreen) {\n      this.container.mozRequestFullScreen();\n    } else if (this.container.webkitRequestFullscreen) {\n      this.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n    } else if (this.container.msRequestFullscreen) {\n      this.container.msRequestFullscreen();\n    } else {\n      return false;\n    }\n\n    this.args = {\n      page: this.pdfViewer.currentPageNumber,\n      previousScale: this.pdfViewer.currentScaleValue,\n    };\n\n    return true;\n  }\n\n  /**\n   * @private\n   */\n  _mouseWheel(evt) {\n    if (!this.active) {\n      return;\n    }\n\n    evt.preventDefault();\n\n    var delta = normalizeWheelEventDelta(evt);\n    var currentTime = (new Date()).getTime();\n    var storedTime = this.mouseScrollTimeStamp;\n\n    // If we've already switched page, avoid accidentally switching again.\n    if (currentTime > storedTime &&\n        currentTime - storedTime < MOUSE_SCROLL_COOLDOWN_TIME) {\n      return;\n    }\n    // If the scroll direction changed, reset the accumulated scroll delta.\n    if ((this.mouseScrollDelta > 0 && delta < 0) ||\n        (this.mouseScrollDelta < 0 && delta > 0)) {\n      this._resetMouseScrollState();\n    }\n    this.mouseScrollDelta += delta;\n\n    if (Math.abs(this.mouseScrollDelta) >= PAGE_SWITCH_THRESHOLD) {\n      var totalDelta = this.mouseScrollDelta;\n      this._resetMouseScrollState();\n      var success = totalDelta > 0 ? this._goToPreviousPage()\n                                   : this._goToNextPage();\n      if (success) {\n        this.mouseScrollTimeStamp = currentTime;\n      }\n    }\n  }\n\n  get isFullscreen() {\n    return !!(document.fullscreenElement || document.mozFullScreen ||\n              document.webkitIsFullScreen || document.msFullscreenElement);\n  }\n\n  /**\n   * @private\n   */\n  _goToPreviousPage() {\n    var page = this.pdfViewer.currentPageNumber;\n    // If we're at the first page, we don't need to do anything.\n    if (page <= 1) {\n      return false;\n    }\n    this.pdfViewer.currentPageNumber = (page - 1);\n    return true;\n  }\n\n  /**\n   * @private\n   */\n  _goToNextPage() {\n    var page = this.pdfViewer.currentPageNumber;\n    // If we're at the last page, we don't need to do anything.\n    if (page >= this.pdfViewer.pagesCount) {\n      return false;\n    }\n    this.pdfViewer.currentPageNumber = (page + 1);\n    return true;\n  }\n\n  /**\n   * @private\n   */\n  _notifyStateChange() {\n    this.eventBus.dispatch('presentationmodechanged', {\n      source: this,\n      active: this.active,\n      switchInProgress: !!this.switchInProgress,\n    });\n  }\n\n  /**\n   * Used to initialize a timeout when requesting Presentation Mode,\n   * i.e. when the browser is requested to enter fullscreen mode.\n   * This timeout is used to prevent the current page from being scrolled\n   * partially, or completely, out of view when entering Presentation Mode.\n   * NOTE: This issue seems limited to certain zoom levels (e.g. page-width).\n   *\n   * @private\n   */\n  _setSwitchInProgress() {\n    if (this.switchInProgress) {\n      clearTimeout(this.switchInProgress);\n    }\n    this.switchInProgress = setTimeout(() => {\n      this._removeFullscreenChangeListeners();\n      delete this.switchInProgress;\n      this._notifyStateChange();\n    }, DELAY_BEFORE_RESETTING_SWITCH_IN_PROGRESS);\n  }\n\n  /**\n   * @private\n   */\n  _resetSwitchInProgress() {\n    if (this.switchInProgress) {\n      clearTimeout(this.switchInProgress);\n      delete this.switchInProgress;\n    }\n  }\n\n  /**\n   * @private\n   */\n  _enter() {\n    this.active = true;\n    this._resetSwitchInProgress();\n    this._notifyStateChange();\n    this.container.classList.add(ACTIVE_SELECTOR);\n\n    // Ensure that the correct page is scrolled into view when entering\n    // Presentation Mode, by waiting until fullscreen mode in enabled.\n    setTimeout(() => {\n      this.pdfViewer.currentPageNumber = this.args.page;\n      this.pdfViewer.currentScaleValue = 'page-fit';\n    }, 0);\n\n    this._addWindowListeners();\n    this._showControls();\n    this.contextMenuOpen = false;\n    this.container.setAttribute('contextmenu', 'viewerContextMenu');\n\n    // Text selection is disabled in Presentation Mode, thus it's not possible\n    // for the user to deselect text that is selected (e.g. with \"Select all\")\n    // when entering Presentation Mode, hence we remove any active selection.\n    window.getSelection().removeAllRanges();\n  }\n\n  /**\n   * @private\n   */\n  _exit() {\n    var page = this.pdfViewer.currentPageNumber;\n    this.container.classList.remove(ACTIVE_SELECTOR);\n\n    // Ensure that the correct page is scrolled into view when exiting\n    // Presentation Mode, by waiting until fullscreen mode is disabled.\n    setTimeout(() => {\n      this.active = false;\n      this._removeFullscreenChangeListeners();\n      this._notifyStateChange();\n\n      this.pdfViewer.currentScaleValue = this.args.previousScale;\n      this.pdfViewer.currentPageNumber = page;\n      this.args = null;\n    }, 0);\n\n    this._removeWindowListeners();\n    this._hideControls();\n    this._resetMouseScrollState();\n    this.container.removeAttribute('contextmenu');\n    this.contextMenuOpen = false;\n  }\n\n  /**\n   * @private\n   */\n  _mouseDown(evt) {\n    if (this.contextMenuOpen) {\n      this.contextMenuOpen = false;\n      evt.preventDefault();\n      return;\n    }\n    if (evt.button === 0) {\n      // Enable clicking of links in presentation mode. Note: only links\n      // pointing to destinations in the current PDF document work.\n      var isInternalLink = (evt.target.href &&\n                            evt.target.classList.contains('internalLink'));\n      if (!isInternalLink) {\n        // Unless an internal link was clicked, advance one page.\n        evt.preventDefault();\n        this.pdfViewer.currentPageNumber += (evt.shiftKey ? -1 : 1);\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  _contextMenu() {\n    this.contextMenuOpen = true;\n  }\n\n  /**\n   * @private\n   */\n  _showControls() {\n    if (this.controlsTimeout) {\n      clearTimeout(this.controlsTimeout);\n    } else {\n      this.container.classList.add(CONTROLS_SELECTOR);\n    }\n    this.controlsTimeout = setTimeout(() => {\n      this.container.classList.remove(CONTROLS_SELECTOR);\n      delete this.controlsTimeout;\n    }, DELAY_BEFORE_HIDING_CONTROLS);\n  }\n\n  /**\n   * @private\n   */\n  _hideControls() {\n    if (!this.controlsTimeout) {\n      return;\n    }\n    clearTimeout(this.controlsTimeout);\n    this.container.classList.remove(CONTROLS_SELECTOR);\n    delete this.controlsTimeout;\n  }\n\n  /**\n   * Resets the properties used for tracking mouse scrolling events.\n   *\n   * @private\n   */\n  _resetMouseScrollState() {\n    this.mouseScrollTimeStamp = 0;\n    this.mouseScrollDelta = 0;\n  }\n\n  /**\n   * @private\n   */\n  _touchSwipe(evt) {\n    if (!this.active) {\n      return;\n    }\n    if (evt.touches.length > 1) {\n      // Multiple touch points detected; cancel the swipe.\n      this.touchSwipeState = null;\n      return;\n    }\n\n    switch (evt.type) {\n      case 'touchstart':\n        this.touchSwipeState = {\n          startX: evt.touches[0].pageX,\n          startY: evt.touches[0].pageY,\n          endX: evt.touches[0].pageX,\n          endY: evt.touches[0].pageY,\n        };\n        break;\n      case 'touchmove':\n        if (this.touchSwipeState === null) {\n          return;\n        }\n        this.touchSwipeState.endX = evt.touches[0].pageX;\n        this.touchSwipeState.endY = evt.touches[0].pageY;\n        // Avoid the swipe from triggering browser gestures (Chrome in\n        // particular has some sort of swipe gesture in fullscreen mode).\n        evt.preventDefault();\n        break;\n      case 'touchend':\n        if (this.touchSwipeState === null) {\n          return;\n        }\n        var delta = 0;\n        var dx = this.touchSwipeState.endX - this.touchSwipeState.startX;\n        var dy = this.touchSwipeState.endY - this.touchSwipeState.startY;\n        var absAngle = Math.abs(Math.atan2(dy, dx));\n        if (Math.abs(dx) > SWIPE_MIN_DISTANCE_THRESHOLD &&\n            (absAngle <= SWIPE_ANGLE_THRESHOLD ||\n             absAngle >= (Math.PI - SWIPE_ANGLE_THRESHOLD))) {\n          // Horizontal swipe.\n          delta = dx;\n        } else if (Math.abs(dy) > SWIPE_MIN_DISTANCE_THRESHOLD &&\n            Math.abs(absAngle - (Math.PI / 2)) <= SWIPE_ANGLE_THRESHOLD) {\n          // Vertical swipe.\n          delta = dy;\n        }\n        if (delta > 0) {\n          this._goToPreviousPage();\n        } else if (delta < 0) {\n          this._goToNextPage();\n        }\n        break;\n    }\n  }\n\n  /**\n   * @private\n   */\n  _addWindowListeners() {\n    this.showControlsBind = this._showControls.bind(this);\n    this.mouseDownBind = this._mouseDown.bind(this);\n    this.mouseWheelBind = this._mouseWheel.bind(this);\n    this.resetMouseScrollStateBind = this._resetMouseScrollState.bind(this);\n    this.contextMenuBind = this._contextMenu.bind(this);\n    this.touchSwipeBind = this._touchSwipe.bind(this);\n\n    window.addEventListener('mousemove', this.showControlsBind);\n    window.addEventListener('mousedown', this.mouseDownBind);\n    window.addEventListener('wheel', this.mouseWheelBind);\n    window.addEventListener('keydown', this.resetMouseScrollStateBind);\n    window.addEventListener('contextmenu', this.contextMenuBind);\n    window.addEventListener('touchstart', this.touchSwipeBind);\n    window.addEventListener('touchmove', this.touchSwipeBind);\n    window.addEventListener('touchend', this.touchSwipeBind);\n  }\n\n  /**\n   * @private\n   */\n  _removeWindowListeners() {\n    window.removeEventListener('mousemove', this.showControlsBind);\n    window.removeEventListener('mousedown', this.mouseDownBind);\n    window.removeEventListener('wheel', this.mouseWheelBind);\n    window.removeEventListener('keydown', this.resetMouseScrollStateBind);\n    window.removeEventListener('contextmenu', this.contextMenuBind);\n    window.removeEventListener('touchstart', this.touchSwipeBind);\n    window.removeEventListener('touchmove', this.touchSwipeBind);\n    window.removeEventListener('touchend', this.touchSwipeBind);\n\n    delete this.showControlsBind;\n    delete this.mouseDownBind;\n    delete this.mouseWheelBind;\n    delete this.resetMouseScrollStateBind;\n    delete this.contextMenuBind;\n    delete this.touchSwipeBind;\n  }\n\n  /**\n   * @private\n   */\n  _fullscreenChange() {\n    if (this.isFullscreen) {\n      this._enter();\n    } else {\n      this._exit();\n    }\n  }\n\n  /**\n   * @private\n   */\n  _addFullscreenChangeListeners() {\n    this.fullscreenChangeBind = this._fullscreenChange.bind(this);\n\n    window.addEventListener('fullscreenchange', this.fullscreenChangeBind);\n    window.addEventListener('mozfullscreenchange', this.fullscreenChangeBind);\n    window.addEventListener('webkitfullscreenchange',\n                            this.fullscreenChangeBind);\n    window.addEventListener('MSFullscreenChange',\n                            this.fullscreenChangeBind);\n  }\n\n  /**\n   * @private\n   */\n  _removeFullscreenChangeListeners() {\n    window.removeEventListener('fullscreenchange', this.fullscreenChangeBind);\n    window.removeEventListener('mozfullscreenchange',\n                               this.fullscreenChangeBind);\n    window.removeEventListener('webkitfullscreenchange',\n                               this.fullscreenChangeBind);\n    window.removeEventListener('MSFullscreenChange',\n                               this.fullscreenChangeBind);\n\n    delete this.fullscreenChangeBind;\n  }\n}\n\nexport {\n  PDFPresentationMode,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/pdf_presentation_mode.js","/* Copyright 2016 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { mozL10n } from './ui_utils';\nimport { RenderingStates } from './pdf_rendering_queue';\n\nconst UI_NOTIFICATION_CLASS = 'pdfSidebarNotification';\n\nconst SidebarView = {\n  NONE: 0,\n  THUMBS: 1,\n  OUTLINE: 2\n};\n\n/**\n * @typedef {Object} PDFSidebarOptions\n * @property {PDFViewer} pdfViewer - The document viewer.\n * @property {PDFThumbnailViewer} pdfThumbnailViewer - The thumbnail viewer.\n * @property {PDFOutlineViewer} pdfOutlineViewer - The outline viewer.\n * @property {HTMLDivElement} mainContainer - The main container\n *   (in which the viewer element is placed).\n * @property {HTMLDivElement} outerContainer - The outer container\n *   (encasing both the viewer and sidebar elements).\n * @property {EventBus} eventBus - The application event bus.\n * @property {HTMLButtonElement} toggleButton - The button used for\n *   opening/closing the sidebar.\n * @property {HTMLButtonElement} thumbnailButton - The button used to show\n *   the thumbnail view.\n * @property {HTMLButtonElement} outlineButton - The button used to show\n *   the outline view.\n * @property {HTMLDivElement} thumbnailView - The container in which\n *   the thumbnails are placed.\n * @property {HTMLDivElement} outlineView - The container in which\n *   the outline is placed.\n * @property {boolean} disableNotification - (optional) Disable the notification\n *   for documents containing outline. The default value is `false`.\n */\n\nclass PDFSidebar {\n  /**\n   * @param {PDFSidebarOptions} options\n   */\n  constructor(options) {\n    this.isOpen = false;\n    this.active = SidebarView.THUMBS;\n    this.isInitialViewSet = false;\n\n    /**\n     * Callback used when the sidebar has been opened/closed, to ensure that\n     * the viewers (PDFViewer/PDFThumbnailViewer) are updated correctly.\n     */\n    this.onToggled = null;\n\n    this.pdfViewer = options.pdfViewer;\n    this.pdfThumbnailViewer = options.pdfThumbnailViewer;\n    this.pdfOutlineViewer = options.pdfOutlineViewer;\n\n    this.mainContainer = options.mainContainer;\n    this.outerContainer = options.outerContainer;\n    this.eventBus = options.eventBus;\n    this.toggleButton = options.toggleButton;\n\n    this.thumbnailButton = options.thumbnailButton;\n    this.outlineButton = options.outlineButton;\n\n    this.thumbnailView = options.thumbnailView;\n    this.outlineView = options.outlineView;\n\n    this.disableNotification = options.disableNotification || false;\n\n    this._addEventListeners();\n  }\n\n  reset() {\n    this.isInitialViewSet = false;\n\n    this._hideUINotification(null);\n    this.switchView(SidebarView.THUMBS);\n\n    this.outlineButton.disabled = false;\n  }\n\n  /**\n   * @returns {number} One of the values in {SidebarView}.\n   */\n  get visibleView() {\n    return (this.isOpen ? this.active : SidebarView.NONE);\n  }\n\n  get isThumbnailViewVisible() {\n    return (this.isOpen && this.active === SidebarView.THUMBS);\n  }\n\n  get isOutlineViewVisible() {\n    return (this.isOpen && this.active === SidebarView.OUTLINE);\n  }\n\n  /**\n   * @param {number} view - The sidebar view that should become visible,\n   *                        must be one of the values in {SidebarView}.\n   */\n  setInitialView(view) {\n    if (this.isInitialViewSet) {\n      return;\n    }\n    this.isInitialViewSet = true;\n\n    if (this.isOpen && view === SidebarView.NONE) {\n      this._dispatchEvent();\n      // If the user has already manually opened the sidebar,\n      // immediately closing it would be bad UX.\n      return;\n    }\n    var isViewPreserved = (view === this.visibleView);\n    this.switchView(view, /* forceOpen */ true);\n\n    if (isViewPreserved) {\n      // Prevent dispatching two back-to-back `sidebarviewchanged` events,\n      // since `this.switchView` dispatched the event if the view changed.\n      this._dispatchEvent();\n    }\n  }\n\n  /**\n   * @param {number} view - The sidebar view that should be switched to,\n   *                        must be one of the values in {SidebarView}.\n   * @param {boolean} forceOpen - (optional) Ensure that the sidebar is open.\n   *                              The default value is `false`.\n   */\n  switchView(view, forceOpen = false) {\n    if (view === SidebarView.NONE) {\n      this.close();\n      return;\n    }\n    var isViewChanged = (view !== this.active);\n    var shouldForceRendering = false;\n\n    switch (view) {\n      case SidebarView.THUMBS:\n        this.thumbnailButton.classList.add('toggled');\n        this.outlineButton.classList.remove('toggled');\n\n        this.thumbnailView.classList.remove('hidden');\n        this.outlineView.classList.add('hidden');\n\n        if (this.isOpen && isViewChanged) {\n          this._updateThumbnailViewer();\n          shouldForceRendering = true;\n        }\n        break;\n      case SidebarView.OUTLINE:\n        if (this.outlineButton.disabled) {\n          return;\n        }\n        this.thumbnailButton.classList.remove('toggled');\n        this.outlineButton.classList.add('toggled');\n\n        this.thumbnailView.classList.add('hidden');\n        this.outlineView.classList.remove('hidden');\n        break;\n      default:\n        console.error('PDFSidebar_switchView: \"' + view +\n                      '\" is an unsupported value.');\n        return;\n    }\n    // Update the active view *after* it has been validated above,\n    // in order to prevent setting it to an invalid state.\n    this.active = view | 0;\n\n    if (forceOpen && !this.isOpen) {\n      this.open();\n      return; // NOTE: Opening will trigger rendering, and dispatch the event.\n    }\n    if (shouldForceRendering) {\n      this._forceRendering();\n    }\n    if (isViewChanged) {\n      this._dispatchEvent();\n    }\n    this._hideUINotification(this.active);\n  }\n\n  open() {\n    if (this.isOpen) {\n      return;\n    }\n    this.isOpen = true;\n    this.toggleButton.classList.add('toggled');\n\n    this.outerContainer.classList.add('sidebarMoving');\n    this.outerContainer.classList.add('sidebarOpen');\n\n    if (this.active === SidebarView.THUMBS) {\n      this._updateThumbnailViewer();\n    }\n    this._forceRendering();\n    this._dispatchEvent();\n\n    this._hideUINotification(this.active);\n  }\n\n  close() {\n    if (!this.isOpen) {\n      return;\n    }\n    this.isOpen = false;\n    this.toggleButton.classList.remove('toggled');\n\n    this.outerContainer.classList.add('sidebarMoving');\n    this.outerContainer.classList.remove('sidebarOpen');\n\n    this._forceRendering();\n    this._dispatchEvent();\n  }\n\n  toggle() {\n    if (this.isOpen) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  /**\n   * @private\n   */\n  _dispatchEvent() {\n    this.eventBus.dispatch('sidebarviewchanged', {\n      source: this,\n      view: this.visibleView,\n    });\n  }\n\n  /**\n   * @private\n   */\n  _forceRendering() {\n    if (this.onToggled) {\n      this.onToggled();\n    } else { // Fallback\n      this.pdfViewer.forceRendering();\n      this.pdfThumbnailViewer.forceRendering();\n    }\n  }\n\n  /**\n   * @private\n   */\n  _updateThumbnailViewer() {\n    var pdfViewer = this.pdfViewer;\n    var thumbnailViewer = this.pdfThumbnailViewer;\n\n    // Use the rendered pages to set the corresponding thumbnail images.\n    var pagesCount = pdfViewer.pagesCount;\n    for (var pageIndex = 0; pageIndex < pagesCount; pageIndex++) {\n      var pageView = pdfViewer.getPageView(pageIndex);\n      if (pageView && pageView.renderingState === RenderingStates.FINISHED) {\n        var thumbnailView = thumbnailViewer.getThumbnail(pageIndex);\n        thumbnailView.setImage(pageView);\n      }\n    }\n    thumbnailViewer.scrollThumbnailIntoView(pdfViewer.currentPageNumber);\n  }\n\n  /**\n   * @private\n   */\n  _showUINotification(view) {\n    if (this.disableNotification) {\n      return;\n    }\n\n    this.toggleButton.title = mozL10n.get('toggle_sidebar_notification.title',\n      null, 'Toggle Sidebar (document contains outline)');\n\n    if (!this.isOpen) {\n      // Only show the notification on the `toggleButton` if the sidebar is\n      // currently closed, to avoid unnecessarily bothering the user.\n      this.toggleButton.classList.add(UI_NOTIFICATION_CLASS);\n    } else if (view === this.active) {\n      // If the sidebar is currently open *and* the `view` is visible, do not\n      // bother the user with a notification on the corresponding button.\n      return;\n    }\n\n    switch (view) {\n      case SidebarView.OUTLINE:\n        this.outlineButton.classList.add(UI_NOTIFICATION_CLASS);\n        break;\n    }\n  }\n\n  /**\n   * @private\n   */\n  _hideUINotification(view) {\n    if (this.disableNotification) {\n      return;\n    }\n\n    var removeNotification = (view) => {\n      switch (view) {\n        case SidebarView.OUTLINE:\n          this.outlineButton.classList.remove(UI_NOTIFICATION_CLASS);\n          break;\n      }\n    };\n\n    if (!this.isOpen && view !== null) {\n      // Only hide the notifications when the sidebar is currently open,\n      // or when it is being reset (i.e. `view === null`).\n      return;\n    }\n    this.toggleButton.classList.remove(UI_NOTIFICATION_CLASS);\n\n    if (view !== null) {\n      removeNotification(view);\n      return;\n    }\n    for (view in SidebarView) { // Remove all sidebar notifications on reset.\n      removeNotification(SidebarView[view]);\n    }\n\n    this.toggleButton.title = mozL10n.get('toggle_sidebar.title', null,\n                                          'Toggle Sidebar');\n  }\n\n  /**\n   * @private\n   */\n  _addEventListeners() {\n    this.mainContainer.addEventListener('transitionend', (evt) => {\n      if (evt.target === this.mainContainer) {\n        this.outerContainer.classList.remove('sidebarMoving');\n      }\n    });\n\n    // Buttons for switching views.\n    this.thumbnailButton.addEventListener('click', () => {\n      this.switchView(SidebarView.THUMBS);\n    });\n\n    this.outlineButton.addEventListener('click', () => {\n      this.switchView(SidebarView.OUTLINE);\n    });\n    this.outlineButton.addEventListener('dblclick', () => {\n      this.pdfOutlineViewer.toggleOutlineTree();\n    });\n\n    // Disable/enable views.\n    this.eventBus.on('outlineloaded', (evt) => {\n      var outlineCount = evt.outlineCount;\n\n      this.outlineButton.disabled = !outlineCount;\n\n      if (outlineCount) {\n        this._showUINotification(SidebarView.OUTLINE);\n      } else if (this.active === SidebarView.OUTLINE) {\n        // If the outline view was opened during document load, switch away\n        // from it if it turns out that the document has no outline.\n        this.switchView(SidebarView.THUMBS);\n      }\n    });\n\n    // Update the thumbnailViewer, if visible, when exiting presentation mode.\n    this.eventBus.on('presentationmodechanged', (evt) => {\n      if (!evt.active && !evt.switchInProgress && this.isThumbnailViewVisible) {\n        this._updateThumbnailViewer();\n      }\n    });\n  }\n}\n\nexport {\n  SidebarView,\n  PDFSidebar,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/pdf_sidebar.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createPromiseCapability, RenderingCancelledException } from './pdfjs';\nimport { getOutputScale, mozL10n } from './ui_utils';\nimport { RenderingStates } from './pdf_rendering_queue';\n\nvar THUMBNAIL_WIDTH = 98; // px\nvar THUMBNAIL_CANVAS_BORDER_WIDTH = 1; // px\n\n/**\n * @typedef {Object} PDFThumbnailViewOptions\n * @property {HTMLDivElement} container - The viewer element.\n * @property {number} id - The thumbnail's unique ID (normally its number).\n * @property {PageViewport} defaultViewport - The page viewport.\n * @property {IPDFLinkService} linkService - The navigation/linking service.\n * @property {PDFRenderingQueue} renderingQueue - The rendering queue object.\n * @property {boolean} disableCanvasToImageConversion - (optional) Don't convert\n *   the canvas thumbnails to images. This prevents `toDataURL` calls,\n *   but increases the overall memory usage. The default value is false.\n */\n\n/**\n * @class\n * @implements {IRenderableView}\n */\nvar PDFThumbnailView = (function PDFThumbnailViewClosure() {\n  function getTempCanvas(width, height) {\n    var tempCanvas = PDFThumbnailView.tempImageCache;\n    if (!tempCanvas) {\n      tempCanvas = document.createElement('canvas');\n      PDFThumbnailView.tempImageCache = tempCanvas;\n    }\n    tempCanvas.width = width;\n    tempCanvas.height = height;\n\n    // Since this is a temporary canvas, we need to fill the canvas with a white\n    // background ourselves. `_getPageDrawContext` uses CSS rules for this.\n    tempCanvas.mozOpaque = true;\n\n    var ctx = tempCanvas.getContext('2d', {alpha: false});\n    ctx.save();\n    ctx.fillStyle = 'rgb(255, 255, 255)';\n    ctx.fillRect(0, 0, width, height);\n    ctx.restore();\n    return tempCanvas;\n  }\n\n  /**\n   * @constructs PDFThumbnailView\n   * @param {PDFThumbnailViewOptions} options\n   */\n  function PDFThumbnailView(options) {\n    var container = options.container;\n    var id = options.id;\n    var defaultViewport = options.defaultViewport;\n    var linkService = options.linkService;\n    var renderingQueue = options.renderingQueue;\n    var disableCanvasToImageConversion =\n      options.disableCanvasToImageConversion || false;\n\n    this.id = id;\n    this.renderingId = 'thumbnail' + id;\n    this.pageLabel = null;\n\n    this.pdfPage = null;\n    this.rotation = 0;\n    this.viewport = defaultViewport;\n    this.pdfPageRotate = defaultViewport.rotation;\n\n    this.linkService = linkService;\n    this.renderingQueue = renderingQueue;\n\n    this.renderTask = null;\n    this.renderingState = RenderingStates.INITIAL;\n    this.resume = null;\n    this.disableCanvasToImageConversion = disableCanvasToImageConversion;\n\n    this.pageWidth = this.viewport.width;\n    this.pageHeight = this.viewport.height;\n    this.pageRatio = this.pageWidth / this.pageHeight;\n\n    this.canvasWidth = THUMBNAIL_WIDTH;\n    this.canvasHeight = (this.canvasWidth / this.pageRatio) | 0;\n    this.scale = this.canvasWidth / this.pageWidth;\n\n    var anchor = document.createElement('a');\n    anchor.href = linkService.getAnchorUrl('#page=' + id);\n    anchor.title = mozL10n.get('thumb_page_title', {page: id}, 'Page {{page}}');\n    anchor.onclick = function stopNavigation() {\n      linkService.page = id;\n      return false;\n    };\n    this.anchor = anchor;\n\n    var div = document.createElement('div');\n    div.className = 'thumbnail';\n    div.setAttribute('data-page-number', this.id);\n    this.div = div;\n\n    if (id === 1) {\n      // Highlight the thumbnail of the first page when no page number is\n      // specified (or exists in cache) when the document is loaded.\n      div.classList.add('selected');\n    }\n\n    var ring = document.createElement('div');\n    ring.className = 'thumbnailSelectionRing';\n    var borderAdjustment = 2 * THUMBNAIL_CANVAS_BORDER_WIDTH;\n    ring.style.width = this.canvasWidth + borderAdjustment + 'px';\n    ring.style.height = this.canvasHeight + borderAdjustment + 'px';\n    this.ring = ring;\n\n    div.appendChild(ring);\n    anchor.appendChild(div);\n    container.appendChild(anchor);\n  }\n\n  PDFThumbnailView.prototype = {\n    setPdfPage: function PDFThumbnailView_setPdfPage(pdfPage) {\n      this.pdfPage = pdfPage;\n      this.pdfPageRotate = pdfPage.rotate;\n      var totalRotation = (this.rotation + this.pdfPageRotate) % 360;\n      this.viewport = pdfPage.getViewport(1, totalRotation);\n      this.reset();\n    },\n\n    reset: function PDFThumbnailView_reset() {\n      this.cancelRendering();\n\n      this.pageWidth = this.viewport.width;\n      this.pageHeight = this.viewport.height;\n      this.pageRatio = this.pageWidth / this.pageHeight;\n\n      this.canvasHeight = (this.canvasWidth / this.pageRatio) | 0;\n      this.scale = (this.canvasWidth / this.pageWidth);\n\n      this.div.removeAttribute('data-loaded');\n      var ring = this.ring;\n      var childNodes = ring.childNodes;\n      for (var i = childNodes.length - 1; i >= 0; i--) {\n        ring.removeChild(childNodes[i]);\n      }\n      var borderAdjustment = 2 * THUMBNAIL_CANVAS_BORDER_WIDTH;\n      ring.style.width = this.canvasWidth + borderAdjustment + 'px';\n      ring.style.height = this.canvasHeight + borderAdjustment + 'px';\n\n      if (this.canvas) {\n        // Zeroing the width and height causes Firefox to release graphics\n        // resources immediately, which can greatly reduce memory consumption.\n        this.canvas.width = 0;\n        this.canvas.height = 0;\n        delete this.canvas;\n      }\n      if (this.image) {\n        this.image.removeAttribute('src');\n        delete this.image;\n      }\n    },\n\n    update: function PDFThumbnailView_update(rotation) {\n      if (typeof rotation !== 'undefined') {\n        this.rotation = rotation;\n      }\n      var totalRotation = (this.rotation + this.pdfPageRotate) % 360;\n      this.viewport = this.viewport.clone({\n        scale: 1,\n        rotation: totalRotation\n      });\n      this.reset();\n    },\n\n    cancelRendering: function PDFThumbnailView_cancelRendering() {\n      if (this.renderTask) {\n        this.renderTask.cancel();\n        this.renderTask = null;\n      }\n      this.renderingState = RenderingStates.INITIAL;\n      this.resume = null;\n    },\n\n    /**\n     * @private\n     */\n    _getPageDrawContext:\n        function PDFThumbnailView_getPageDrawContext(noCtxScale) {\n      var canvas = document.createElement('canvas');\n      // Keep the no-thumbnail outline visible, i.e. `data-loaded === false`,\n      // until rendering/image conversion is complete, to avoid display issues.\n      this.canvas = canvas;\n\n      canvas.mozOpaque = true;\n      var ctx = canvas.getContext('2d', {alpha: false});\n      var outputScale = getOutputScale(ctx);\n\n      canvas.width = (this.canvasWidth * outputScale.sx) | 0;\n      canvas.height = (this.canvasHeight * outputScale.sy) | 0;\n      canvas.style.width = this.canvasWidth + 'px';\n      canvas.style.height = this.canvasHeight + 'px';\n\n      if (!noCtxScale && outputScale.scaled) {\n        ctx.scale(outputScale.sx, outputScale.sy);\n      }\n      return ctx;\n    },\n\n    /**\n     * @private\n     */\n    _convertCanvasToImage: function PDFThumbnailView_convertCanvasToImage() {\n      if (!this.canvas) {\n        return;\n      }\n      if (this.renderingState !== RenderingStates.FINISHED) {\n        return;\n      }\n      var id = this.renderingId;\n      var className = 'thumbnailImage';\n      var ariaLabel = mozL10n.get('thumb_page_canvas', { page: this.pageId },\n                                  'Thumbnail of Page {{page}}');\n\n      if (this.disableCanvasToImageConversion) {\n        this.canvas.id = id;\n        this.canvas.className = className;\n        this.canvas.setAttribute('aria-label', ariaLabel);\n\n        this.div.setAttribute('data-loaded', true);\n        this.ring.appendChild(this.canvas);\n        return;\n      }\n      var image = document.createElement('img');\n      image.id = id;\n      image.className = className;\n      image.setAttribute('aria-label', ariaLabel);\n\n      image.style.width = this.canvasWidth + 'px';\n      image.style.height = this.canvasHeight + 'px';\n\n      image.src = this.canvas.toDataURL();\n      this.image = image;\n\n      this.div.setAttribute('data-loaded', true);\n      this.ring.appendChild(image);\n\n      // Zeroing the width and height causes Firefox to release graphics\n      // resources immediately, which can greatly reduce memory consumption.\n      this.canvas.width = 0;\n      this.canvas.height = 0;\n      delete this.canvas;\n    },\n\n    draw: function PDFThumbnailView_draw() {\n      if (this.renderingState !== RenderingStates.INITIAL) {\n        console.error('Must be in new state before drawing');\n        return Promise.resolve(undefined);\n      }\n\n      this.renderingState = RenderingStates.RUNNING;\n\n      var renderCapability = createPromiseCapability();\n\n      var self = this;\n      function thumbnailDrawCallback(error) {\n        // The renderTask may have been replaced by a new one, so only remove\n        // the reference to the renderTask if it matches the one that is\n        // triggering this callback.\n        if (renderTask === self.renderTask) {\n          self.renderTask = null;\n        }\n\n        if (((typeof PDFJSDev === 'undefined' ||\n              !PDFJSDev.test('PDFJS_NEXT')) && error === 'cancelled') ||\n            error instanceof RenderingCancelledException) {\n          renderCapability.resolve(undefined);\n          return;\n        }\n\n        self.renderingState = RenderingStates.FINISHED;\n        self._convertCanvasToImage();\n\n        if (!error) {\n          renderCapability.resolve(undefined);\n        } else {\n          renderCapability.reject(error);\n        }\n      }\n\n      var ctx = this._getPageDrawContext();\n      var drawViewport = this.viewport.clone({ scale: this.scale });\n      var renderContinueCallback = function renderContinueCallback(cont) {\n        if (!self.renderingQueue.isHighestPriority(self)) {\n          self.renderingState = RenderingStates.PAUSED;\n          self.resume = function resumeCallback() {\n            self.renderingState = RenderingStates.RUNNING;\n            cont();\n          };\n          return;\n        }\n        cont();\n      };\n\n      var renderContext = {\n        canvasContext: ctx,\n        viewport: drawViewport\n      };\n      var renderTask = this.renderTask = this.pdfPage.render(renderContext);\n      renderTask.onContinue = renderContinueCallback;\n\n      renderTask.promise.then(\n        function pdfPageRenderCallback() {\n          thumbnailDrawCallback(null);\n        },\n        function pdfPageRenderError(error) {\n          thumbnailDrawCallback(error);\n        }\n      );\n      return renderCapability.promise;\n    },\n\n    setImage: function PDFThumbnailView_setImage(pageView) {\n      if (this.renderingState !== RenderingStates.INITIAL) {\n        return;\n      }\n      var img = pageView.canvas;\n      if (!img) {\n        return;\n      }\n      if (!this.pdfPage) {\n        this.setPdfPage(pageView.pdfPage);\n      }\n\n      this.renderingState = RenderingStates.FINISHED;\n\n      var ctx = this._getPageDrawContext(true);\n      var canvas = ctx.canvas;\n\n      if (img.width <= 2 * canvas.width) {\n        ctx.drawImage(img, 0, 0, img.width, img.height,\n                      0, 0, canvas.width, canvas.height);\n        this._convertCanvasToImage();\n        return;\n      }\n      // drawImage does an awful job of rescaling the image, doing it gradually.\n      var MAX_NUM_SCALING_STEPS = 3;\n      var reducedWidth = canvas.width << MAX_NUM_SCALING_STEPS;\n      var reducedHeight = canvas.height << MAX_NUM_SCALING_STEPS;\n      var reducedImage = getTempCanvas(reducedWidth, reducedHeight);\n      var reducedImageCtx = reducedImage.getContext('2d');\n\n      while (reducedWidth > img.width || reducedHeight > img.height) {\n        reducedWidth >>= 1;\n        reducedHeight >>= 1;\n      }\n      reducedImageCtx.drawImage(img, 0, 0, img.width, img.height,\n                                0, 0, reducedWidth, reducedHeight);\n      while (reducedWidth > 2 * canvas.width) {\n        reducedImageCtx.drawImage(reducedImage,\n                                  0, 0, reducedWidth, reducedHeight,\n                                  0, 0, reducedWidth >> 1, reducedHeight >> 1);\n        reducedWidth >>= 1;\n        reducedHeight >>= 1;\n      }\n      ctx.drawImage(reducedImage, 0, 0, reducedWidth, reducedHeight,\n                    0, 0, canvas.width, canvas.height);\n      this._convertCanvasToImage();\n    },\n\n    get pageId() {\n      return (this.pageLabel !== null ? this.pageLabel : this.id);\n    },\n\n    /**\n     * @param {string|null} label\n     */\n    setPageLabel: function PDFThumbnailView_setPageLabel(label) {\n      this.pageLabel = (typeof label === 'string' ? label : null);\n\n      this.anchor.title = mozL10n.get('thumb_page_title', { page: this.pageId },\n                                      'Page {{page}}');\n\n      if (this.renderingState !== RenderingStates.FINISHED) {\n        return;\n      }\n      var ariaLabel = mozL10n.get('thumb_page_canvas', { page: this.pageId },\n                                  'Thumbnail of Page {{page}}');\n      if (this.image) {\n        this.image.setAttribute('aria-label', ariaLabel);\n      } else if (this.disableCanvasToImageConversion && this.canvas) {\n        this.canvas.setAttribute('aria-label', ariaLabel);\n      }\n    },\n  };\n\n  return PDFThumbnailView;\n})();\n\nPDFThumbnailView.tempImageCache = null;\n\nexport {\n  PDFThumbnailView,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/pdf_thumbnail_view.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  getVisibleElements, scrollIntoView, watchScroll\n} from './ui_utils';\nimport { PDFThumbnailView } from './pdf_thumbnail_view';\n\nvar THUMBNAIL_SCROLL_MARGIN = -19;\n\n/**\n * @typedef {Object} PDFThumbnailViewerOptions\n * @property {HTMLDivElement} container - The container for the thumbnail\n *   elements.\n * @property {IPDFLinkService} linkService - The navigation/linking service.\n * @property {PDFRenderingQueue} renderingQueue - The rendering queue object.\n */\n\n/**\n * Simple viewer control to display thumbnails for pages.\n * @class\n * @implements {IRenderableView}\n */\nvar PDFThumbnailViewer = (function PDFThumbnailViewerClosure() {\n  /**\n   * @constructs PDFThumbnailViewer\n   * @param {PDFThumbnailViewerOptions} options\n   */\n  function PDFThumbnailViewer(options) {\n    this.container = options.container;\n    this.renderingQueue = options.renderingQueue;\n    this.linkService = options.linkService;\n\n    this.scroll = watchScroll(this.container, this._scrollUpdated.bind(this));\n    this._resetView();\n  }\n\n  PDFThumbnailViewer.prototype = {\n    /**\n     * @private\n     */\n    _scrollUpdated: function PDFThumbnailViewer_scrollUpdated() {\n      this.renderingQueue.renderHighestPriority();\n    },\n\n    getThumbnail: function PDFThumbnailViewer_getThumbnail(index) {\n      return this.thumbnails[index];\n    },\n\n    /**\n     * @private\n     */\n    _getVisibleThumbs: function PDFThumbnailViewer_getVisibleThumbs() {\n      return getVisibleElements(this.container, this.thumbnails);\n    },\n\n    scrollThumbnailIntoView:\n        function PDFThumbnailViewer_scrollThumbnailIntoView(page) {\n      var selected = document.querySelector('.thumbnail.selected');\n      if (selected) {\n        selected.classList.remove('selected');\n      }\n      var thumbnail = document.querySelector(\n        'div.thumbnail[data-page-number=\"' + page + '\"]');\n      if (thumbnail) {\n        thumbnail.classList.add('selected');\n      }\n      var visibleThumbs = this._getVisibleThumbs();\n      var numVisibleThumbs = visibleThumbs.views.length;\n\n      // If the thumbnail isn't currently visible, scroll it into view.\n      if (numVisibleThumbs > 0) {\n        var first = visibleThumbs.first.id;\n        // Account for only one thumbnail being visible.\n        var last = (numVisibleThumbs > 1 ? visibleThumbs.last.id : first);\n        if (page <= first || page >= last) {\n          scrollIntoView(thumbnail, { top: THUMBNAIL_SCROLL_MARGIN });\n        }\n      }\n    },\n\n    get pagesRotation() {\n      return this._pagesRotation;\n    },\n\n    set pagesRotation(rotation) {\n      this._pagesRotation = rotation;\n      for (var i = 0, l = this.thumbnails.length; i < l; i++) {\n        var thumb = this.thumbnails[i];\n        thumb.update(rotation);\n      }\n    },\n\n    cleanup: function PDFThumbnailViewer_cleanup() {\n      var tempCanvas = PDFThumbnailView.tempImageCache;\n      if (tempCanvas) {\n        // Zeroing the width and height causes Firefox to release graphics\n        // resources immediately, which can greatly reduce memory consumption.\n        tempCanvas.width = 0;\n        tempCanvas.height = 0;\n      }\n      PDFThumbnailView.tempImageCache = null;\n    },\n\n    /**\n     * @private\n     */\n    _resetView: function PDFThumbnailViewer_resetView() {\n      this.thumbnails = [];\n      this._pageLabels = null;\n      this._pagesRotation = 0;\n      this._pagesRequests = [];\n\n      // Remove the thumbnails from the DOM.\n      this.container.textContent = '';\n    },\n\n    setDocument: function PDFThumbnailViewer_setDocument(pdfDocument) {\n      if (this.pdfDocument) {\n        this._cancelRendering();\n        this._resetView();\n      }\n\n      this.pdfDocument = pdfDocument;\n      if (!pdfDocument) {\n        return Promise.resolve();\n      }\n\n      return pdfDocument.getPage(1).then((firstPage) => {\n        var pagesCount = pdfDocument.numPages;\n        var viewport = firstPage.getViewport(1.0);\n        for (let pageNum = 1; pageNum <= pagesCount; ++pageNum) {\n          var thumbnail = new PDFThumbnailView({\n            container: this.container,\n            id: pageNum,\n            defaultViewport: viewport.clone(),\n            linkService: this.linkService,\n            renderingQueue: this.renderingQueue,\n            disableCanvasToImageConversion: false,\n          });\n          this.thumbnails.push(thumbnail);\n        }\n      });\n    },\n\n    /**\n     * @private\n     */\n    _cancelRendering: function PDFThumbnailViewer_cancelRendering() {\n      for (var i = 0, ii = this.thumbnails.length; i < ii; i++) {\n        if (this.thumbnails[i]) {\n          this.thumbnails[i].cancelRendering();\n        }\n      }\n    },\n\n    /**\n     * @param {Array|null} labels\n     */\n    setPageLabels: function PDFThumbnailViewer_setPageLabels(labels) {\n      if (!this.pdfDocument) {\n        return;\n      }\n      if (!labels) {\n        this._pageLabels = null;\n      } else if (!(labels instanceof Array &&\n                   this.pdfDocument.numPages === labels.length)) {\n        this._pageLabels = null;\n        console.error('PDFThumbnailViewer_setPageLabels: Invalid page labels.');\n      } else {\n        this._pageLabels = labels;\n      }\n      // Update all the `PDFThumbnailView` instances.\n      for (var i = 0, ii = this.thumbnails.length; i < ii; i++) {\n        var thumbnailView = this.thumbnails[i];\n        var label = this._pageLabels && this._pageLabels[i];\n        thumbnailView.setPageLabel(label);\n      }\n    },\n\n    /**\n     * @param {PDFThumbnailView} thumbView\n     * @returns {PDFPage}\n     * @private\n     */\n    _ensurePdfPageLoaded(thumbView) {\n      if (thumbView.pdfPage) {\n        return Promise.resolve(thumbView.pdfPage);\n      }\n      var pageNumber = thumbView.id;\n      if (this._pagesRequests[pageNumber]) {\n        return this._pagesRequests[pageNumber];\n      }\n      var promise = this.pdfDocument.getPage(pageNumber).then((pdfPage) => {\n        thumbView.setPdfPage(pdfPage);\n        this._pagesRequests[pageNumber] = null;\n        return pdfPage;\n      });\n      this._pagesRequests[pageNumber] = promise;\n      return promise;\n    },\n\n    forceRendering() {\n      var visibleThumbs = this._getVisibleThumbs();\n      var thumbView = this.renderingQueue.getHighestPriority(visibleThumbs,\n                                                             this.thumbnails,\n                                                             this.scroll.down);\n      if (thumbView) {\n        this._ensurePdfPageLoaded(thumbView).then(() => {\n          this.renderingQueue.renderView(thumbView);\n        });\n        return true;\n      }\n      return false;\n    }\n  };\n\n  return PDFThumbnailViewer;\n})();\n\nexport {\n  PDFThumbnailViewer,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/pdf_thumbnail_viewer.js","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createPromiseCapability, PDFJS } from './pdfjs';\nimport {\n  CSS_UNITS, DEFAULT_SCALE, DEFAULT_SCALE_VALUE, getVisibleElements,\n  MAX_AUTO_SCALE, RendererType, SCROLLBAR_PADDING, scrollIntoView,\n  UNKNOWN_SCALE, VERTICAL_PADDING, watchScroll\n} from './ui_utils';\nimport { PDFRenderingQueue, RenderingStates } from './pdf_rendering_queue';\nimport { AnnotationLayerBuilder } from './annotation_layer_builder';\nimport { NoteLayerBuilder } from './note_layer_builder';\nimport { getGlobalEventBus } from './dom_events';\nimport { PDFPageView } from './pdf_page_view';\nimport { SimpleLinkService } from './pdf_link_service';\nimport { TextLayerBuilder } from './text_layer_builder';\n\nvar PresentationModeState = {\n  UNKNOWN: 0,\n  NORMAL: 1,\n  CHANGING: 2,\n  FULLSCREEN: 3,\n};\n\nvar DEFAULT_CACHE_SIZE = 10;\n\n/**\n * @typedef {Object} PDFViewerOptions\n * @property {HTMLDivElement} container - The container for the viewer element.\n * @property {HTMLDivElement} viewer - (optional) The viewer element.\n * @property {EventBus} eventBus - The application event bus.\n * @property {IPDFLinkService} linkService - The navigation/linking service.\n * @property {DownloadManager} downloadManager - (optional) The download\n *   manager component.\n * @property {PDFRenderingQueue} renderingQueue - (optional) The rendering\n *   queue object.\n * @property {boolean} removePageBorders - (optional) Removes the border shadow\n *   around the pages. The default is false.\n * @property {boolean} enhanceTextSelection - (optional) Enables the improved\n *   text selection behaviour. The default is `false`.\n * @property {boolean} renderInteractiveForms - (optional) Enables rendering of\n *   interactive form elements. The default is `false`.\n * @property {string} renderer - 'canvas' or 'svg'. The default is 'canvas'.\n */\n\n/**\n * Simple viewer control to display PDF content/pages.\n * @class\n * @implements {IRenderableView}\n */\nvar PDFViewer = (function pdfViewer() {\n  function PDFPageViewBuffer(size) {\n    var data = [];\n    this.push = function cachePush(view) {\n      var i = data.indexOf(view);\n      if (i >= 0) {\n        data.splice(i, 1);\n      }\n      data.push(view);\n      if (data.length > size) {\n        data.shift().destroy();\n      }\n    };\n    this.resize = function (newSize) {\n      size = newSize;\n      while (data.length > size) {\n        data.shift().destroy();\n      }\n    };\n  }\n\n  function isSameScale(oldScale, newScale) {\n    if (newScale === oldScale) {\n      return true;\n    }\n    if (Math.abs(newScale - oldScale) < 1e-15) {\n      // Prevent unnecessary re-rendering of all pages when the scale\n      // changes only because of limited numerical precision.\n      return true;\n    }\n    return false;\n  }\n\n  function isPortraitOrientation(size) {\n    return size.width <= size.height;\n  }\n\n  /**\n   * @constructs PDFViewer\n   * @param {PDFViewerOptions} options\n   */\n  function PDFViewer(options) {\n    this.container = options.container;\n    this.viewer = options.viewer || options.container.firstElementChild;\n    this.eventBus = options.eventBus || getGlobalEventBus();\n    this.linkService = options.linkService || new SimpleLinkService();\n    this.downloadManager = options.downloadManager || null;\n    this.noteStore = options.noteStore || null;\n    this.removePageBorders = options.removePageBorders || false;\n    this.enhanceTextSelection = options.enhanceTextSelection || false;\n    this.renderInteractiveForms = options.renderInteractiveForms || false;\n    this.renderer = options.renderer || RendererType.CANVAS;\n\n    this.defaultRenderingQueue = !options.renderingQueue;\n    if (this.defaultRenderingQueue) {\n      // Custom rendering queue is not specified, using default one\n      this.renderingQueue = new PDFRenderingQueue();\n      this.renderingQueue.setViewer(this);\n    } else {\n      this.renderingQueue = options.renderingQueue;\n    }\n\n    this.scroll = watchScroll(this.container, this._scrollUpdate.bind(this));\n    this.presentationModeState = PresentationModeState.UNKNOWN;\n    this._resetView();\n\n    if (this.removePageBorders) {\n      this.viewer.classList.add('removePageBorders');\n    }\n  }\n\n  PDFViewer.prototype = /** @lends PDFViewer.prototype */{\n    get pagesCount() {\n      return this._pages.length;\n    },\n\n    getPageView(index) {\n      return this._pages[index];\n    },\n\n    /**\n     * @returns {boolean} true if all {PDFPageView} objects are initialized.\n     */\n    get pageViewsReady() {\n      return this._pageViewsReady;\n    },\n\n    /**\n     * @returns {number}\n     */\n    get currentPageNumber() {\n      return this._currentPageNumber;\n    },\n\n    /**\n     * @param {number} val - The page number.\n     */\n    set currentPageNumber(val) {\n      if ((val | 0) !== val) { // Ensure that `val` is an integer.\n        throw new Error('Invalid page number.');\n      }\n      if (!this.pdfDocument) {\n        this._currentPageNumber = val;\n        return;\n      }\n      // The intent can be to just reset a scroll position and/or scale.\n      this._setCurrentPageNumber(val, /* resetCurrentPageView = */ true);\n    },\n\n    /**\n     * @private\n     */\n    _setCurrentPageNumber:\n        function PDFViewer_setCurrentPageNumber(val, resetCurrentPageView) {\n      if (this._currentPageNumber === val) {\n        if (resetCurrentPageView) {\n          this._resetCurrentPageView();\n        }\n        return;\n      }\n\n      if (!(0 < val && val <= this.pagesCount)) {\n        console.error('PDFViewer_setCurrentPageNumber: \"' + val +\n                      '\" is out of bounds.');\n        return;\n      }\n\n      var arg = {\n        source: this,\n        pageNumber: val,\n        pageLabel: this._pageLabels && this._pageLabels[val - 1],\n      };\n      this._currentPageNumber = val;\n      this.eventBus.dispatch('pagechanging', arg);\n      this.eventBus.dispatch('pagechange', arg);\n\n      if (resetCurrentPageView) {\n        this._resetCurrentPageView();\n      }\n    },\n\n    /**\n     * @returns {string|null} Returns the current page label,\n     *                        or `null` if no page labels exist.\n     */\n    get currentPageLabel() {\n      return this._pageLabels && this._pageLabels[this._currentPageNumber - 1];\n    },\n\n    /**\n     * @param {string} val - The page label.\n     */\n    set currentPageLabel(val) {\n      var pageNumber = val | 0; // Fallback page number.\n      if (this._pageLabels) {\n        var i = this._pageLabels.indexOf(val);\n        if (i >= 0) {\n          pageNumber = i + 1;\n        }\n      }\n      this.currentPageNumber = pageNumber;\n    },\n\n    /**\n     * @returns {number}\n     */\n    get currentScale() {\n      return this._currentScale !== UNKNOWN_SCALE ? this._currentScale :\n                                                    DEFAULT_SCALE;\n    },\n\n    /**\n     * @param {number} val - Scale of the pages in percents.\n     */\n    set currentScale(val) {\n      if (isNaN(val)) {\n        throw new Error('Invalid numeric scale');\n      }\n      if (!this.pdfDocument) {\n        this._currentScale = val;\n        this._currentScaleValue = val !== UNKNOWN_SCALE ? val.toString() : null;\n        return;\n      }\n      this._setScale(val, false);\n    },\n\n    /**\n     * @returns {string}\n     */\n    get currentScaleValue() {\n      return this._currentScaleValue;\n    },\n\n    /**\n     * @param val - The scale of the pages (in percent or predefined value).\n     */\n    set currentScaleValue(val) {\n      if (!this.pdfDocument) {\n        this._currentScale = isNaN(val) ? UNKNOWN_SCALE : val;\n        this._currentScaleValue = val.toString();\n        return;\n      }\n      this._setScale(val, false);\n    },\n\n    /**\n     * @returns {number}\n     */\n    get pagesRotation() {\n      return this._pagesRotation;\n    },\n\n    /**\n     * @param {number} rotation - The rotation of the pages (0, 90, 180, 270).\n     */\n    set pagesRotation(rotation) {\n      if (!(typeof rotation === 'number' && rotation % 90 === 0)) {\n        throw new Error('Invalid pages rotation angle.');\n      }\n      this._pagesRotation = rotation;\n\n      if (!this.pdfDocument) {\n        return;\n      }\n      for (var i = 0, l = this._pages.length; i < l; i++) {\n        var pageView = this._pages[i];\n        pageView.update(pageView.scale, rotation);\n      }\n\n      this._setScale(this._currentScaleValue, true);\n\n      if (this.defaultRenderingQueue) {\n        this.update();\n      }\n    },\n\n    updateNotes() {\n      for (var i = 0, ii = this._pages.length; i < ii; i++) {\n        var pageView = this._pages[i];\n        pageView.updateNotes();\n      }\n    },\n\n    /**\n     * @param pdfDocument {PDFDocument}\n     */\n    setDocument(pdfDocument) {\n      if (this.pdfDocument) {\n        this._cancelRendering();\n        this._resetView();\n      }\n\n      this.pdfDocument = pdfDocument;\n      if (!pdfDocument) {\n        return;\n      }\n      var pagesCount = pdfDocument.numPages;\n\n      var pagesCapability = createPromiseCapability();\n      this.pagesPromise = pagesCapability.promise;\n\n      pagesCapability.promise.then(() => {\n        this._pageViewsReady = true;\n        this.eventBus.dispatch('pagesloaded', {\n          source: this,\n          pagesCount,\n        });\n      });\n\n      var isOnePageRenderedResolved = false;\n      var onePageRenderedCapability = createPromiseCapability();\n      this.onePageRendered = onePageRenderedCapability.promise;\n\n      var bindOnAfterAndBeforeDraw = (pageView) => {\n        pageView.onBeforeDraw = () => {\n          // Add the page to the buffer at the start of drawing. That way it can\n          // be evicted from the buffer and destroyed even if we pause its\n          // rendering.\n          this._buffer.push(pageView);\n        };\n        pageView.onAfterDraw = () => {\n          if (!isOnePageRenderedResolved) {\n            isOnePageRenderedResolved = true;\n            onePageRenderedCapability.resolve();\n          }\n        };\n      };\n\n      var firstPagePromise = pdfDocument.getPage(1);\n      this.firstPagePromise = firstPagePromise;\n\n      // Fetch a single page so we can get a viewport that will be the default\n      // viewport for all pages\n      return firstPagePromise.then((pdfPage) => {\n        var scale = this.currentScale;\n        var viewport = pdfPage.getViewport(scale * CSS_UNITS);\n        for (var pageNum = 1; pageNum <= pagesCount; ++pageNum) {\n          var textLayerFactory = null;\n          if (!PDFJS.disableTextLayer) {\n            textLayerFactory = this;\n          }\n          var pageView = new PDFPageView({\n            container: this.viewer,\n            eventBus: this.eventBus,\n            id: pageNum,\n            scale,\n            defaultViewport: viewport.clone(),\n            renderingQueue: this.renderingQueue,\n            textLayerFactory,\n            annotationLayerFactory: this,\n            noteLayerFactory: this,\n            enhanceTextSelection: this.enhanceTextSelection,\n            renderInteractiveForms: this.renderInteractiveForms,\n            renderer: this.renderer,\n          });\n          bindOnAfterAndBeforeDraw(pageView);\n          this._pages.push(pageView);\n        }\n\n        // Fetch all the pages since the viewport is needed before printing\n        // starts to create the correct size canvas. Wait until one page is\n        // rendered so we don't tie up too many resources early on.\n        onePageRenderedCapability.promise.then(() => {\n          if (PDFJS.disableAutoFetch) {\n            // XXX: Printing is semi-broken with auto fetch disabled.\n            pagesCapability.resolve();\n            return;\n          }\n          var getPagesLeft = pagesCount;\n          for (let pageNum = 1; pageNum <= pagesCount; ++pageNum) {\n            pdfDocument.getPage(pageNum).then((pdfPage) => {\n              var pageView = this._pages[pageNum - 1];\n              if (!pageView.pdfPage) {\n                pageView.setPdfPage(pdfPage);\n              }\n              this.linkService.cachePageRef(pageNum, pdfPage.ref);\n              if (--getPagesLeft === 0) {\n                pagesCapability.resolve();\n              }\n            });\n          }\n        });\n\n        this.eventBus.dispatch('pagesinit', { source: this });\n\n        if (this.defaultRenderingQueue) {\n          this.update();\n        }\n\n        if (this.findController) {\n          this.findController.resolveFirstPage();\n        }\n      });\n    },\n\n    /**\n     * @param {Array|null} labels\n     */\n    setPageLabels: function PDFViewer_setPageLabels(labels) {\n      if (!this.pdfDocument) {\n        return;\n      }\n      if (!labels) {\n        this._pageLabels = null;\n      } else if (!(labels instanceof Array &&\n                   this.pdfDocument.numPages === labels.length)) {\n        this._pageLabels = null;\n        console.error('PDFViewer_setPageLabels: Invalid page labels.');\n      } else {\n        this._pageLabels = labels;\n      }\n      // Update all the `PDFPageView` instances.\n      for (var i = 0, ii = this._pages.length; i < ii; i++) {\n        var pageView = this._pages[i];\n        var label = this._pageLabels && this._pageLabels[i];\n        pageView.setPageLabel(label);\n      }\n    },\n\n    _resetView() {\n      this._pages = [];\n      this._currentPageNumber = 1;\n      this._currentScale = UNKNOWN_SCALE;\n      this._currentScaleValue = null;\n      this._pageLabels = null;\n      this._buffer = new PDFPageViewBuffer(DEFAULT_CACHE_SIZE);\n      this._location = null;\n      this._pagesRotation = 0;\n      this._pagesRequests = [];\n      this._pageViewsReady = false;\n\n      // Remove the pages from the DOM.\n      this.viewer.textContent = '';\n    },\n\n    _scrollUpdate: function PDFViewer_scrollUpdate() {\n      if (this.pagesCount === 0) {\n        return;\n      }\n      this.update();\n      for (var i = 0, ii = this._pages.length; i < ii; i++) {\n        this._pages[i].updatePosition();\n      }\n    },\n\n    _setScaleDispatchEvent: function pdfViewer_setScaleDispatchEvent(\n        newScale, newValue, preset) {\n      var arg = {\n        source: this,\n        scale: newScale,\n        presetValue: preset ? newValue : undefined\n      };\n      this.eventBus.dispatch('scalechanging', arg);\n      this.eventBus.dispatch('scalechange', arg);\n    },\n\n    _setScaleUpdatePages: function pdfViewer_setScaleUpdatePages(\n        newScale, newValue, noScroll, preset) {\n      this._currentScaleValue = newValue.toString();\n\n      if (isSameScale(this._currentScale, newScale)) {\n        if (preset) {\n          this._setScaleDispatchEvent(newScale, newValue, true);\n        }\n        return;\n      }\n\n      for (var i = 0, ii = this._pages.length; i < ii; i++) {\n        this._pages[i].update(newScale);\n      }\n      this._currentScale = newScale;\n\n      if (!noScroll) {\n        var page = this._currentPageNumber, dest;\n        if (this._location && !PDFJS.ignoreCurrentPositionOnZoom &&\n            !(this.isInPresentationMode || this.isChangingPresentationMode)) {\n          page = this._location.pageNumber;\n          dest = [null, { name: 'XYZ' }, this._location.left,\n                  this._location.top, null];\n        }\n        this.scrollPageIntoView({\n          pageNumber: page,\n          destArray: dest,\n          allowNegativeOffset: true,\n        });\n      }\n\n      this._setScaleDispatchEvent(newScale, newValue, preset);\n\n      if (this.defaultRenderingQueue) {\n        this.update();\n      }\n    },\n\n    _setScale: function PDFViewer_setScale(value, noScroll) {\n      var scale = parseFloat(value);\n\n      if (scale > 0) {\n        this._setScaleUpdatePages(scale, value, noScroll, false);\n      } else {\n        var currentPage = this._pages[this._currentPageNumber - 1];\n        if (!currentPage) {\n          return;\n        }\n        var hPadding = (this.isInPresentationMode || this.removePageBorders) ?\n          0 : SCROLLBAR_PADDING;\n        var vPadding = (this.isInPresentationMode || this.removePageBorders) ?\n          0 : VERTICAL_PADDING;\n        var pageWidthScale = (this.container.clientWidth - hPadding) /\n                             currentPage.width * currentPage.scale;\n        var pageHeightScale = (this.container.clientHeight - vPadding) /\n                              currentPage.height * currentPage.scale;\n        switch (value) {\n          case 'page-actual':\n            scale = 1;\n            break;\n          case 'page-width':\n            scale = pageWidthScale;\n            break;\n          case 'page-height':\n            scale = pageHeightScale;\n            break;\n          case 'page-fit':\n            scale = Math.min(pageWidthScale, pageHeightScale);\n            break;\n          case 'auto':\n            var isLandscape = (currentPage.width > currentPage.height);\n            // For pages in landscape mode, fit the page height to the viewer\n            // *unless* the page would thus become too wide to fit horizontally.\n            var horizontalScale = isLandscape ?\n              Math.min(pageHeightScale, pageWidthScale) : pageWidthScale;\n            scale = Math.min(MAX_AUTO_SCALE, horizontalScale);\n            break;\n          default:\n            console.error('PDFViewer_setScale: \"' + value +\n                          '\" is an unknown zoom value.');\n            return;\n        }\n        this._setScaleUpdatePages(scale, value, noScroll, true);\n      }\n    },\n\n    /**\n     * Refreshes page view: scrolls to the current page and updates the scale.\n     * @private\n     */\n    _resetCurrentPageView() {\n      if (this.isInPresentationMode) {\n        // Fixes the case when PDF has different page sizes.\n        this._setScale(this._currentScaleValue, true);\n      }\n\n      var pageView = this._pages[this._currentPageNumber - 1];\n      scrollIntoView(pageView.div);\n    },\n\n    /**\n     * @typedef ScrollPageIntoViewParameters\n     * @property {number} pageNumber - The page number.\n     * @property {Array} destArray - (optional) The original PDF destination\n     *   array, in the format: <page-ref> </XYZ|/FitXXX> <args..>\n     * @property {boolean} allowNegativeOffset - (optional) Allow negative page\n     *   offsets. The default value is `false`.\n     */\n\n    /**\n     * Scrolls page into view.\n     * @param {ScrollPageIntoViewParameters} params\n     */\n    scrollPageIntoView: function PDFViewer_scrollPageIntoView(params) {\n      if (!this.pdfDocument) {\n        return;\n      }\n      if ((typeof PDFJSDev === 'undefined' || PDFJSDev.test('GENERIC')) &&\n          (arguments.length > 1 || typeof params === 'number')) {\n        console.warn('Call of scrollPageIntoView() with obsolete signature.');\n        var paramObj = {};\n        if (typeof params === 'number') {\n          paramObj.pageNumber = params; // pageNumber argument was found.\n        }\n        if (arguments[1] instanceof Array) {\n          paramObj.destArray = arguments[1]; // destArray argument was found.\n        }\n        params = paramObj;\n      }\n      var pageNumber = params.pageNumber || 0;\n      var dest = params.destArray || null;\n      var allowNegativeOffset = params.allowNegativeOffset || false;\n\n      if (this.isInPresentationMode || !dest) {\n        this._setCurrentPageNumber(pageNumber, /* resetCurrentPageView */ true);\n        return;\n      }\n\n      var pageView = this._pages[pageNumber - 1];\n      if (!pageView) {\n        console.error('PDFViewer_scrollPageIntoView: ' +\n                      'Invalid \"pageNumber\" parameter.');\n        return;\n      }\n      var x = 0, y = 0;\n      var width = 0, height = 0, widthScale, heightScale;\n      var changeOrientation = (pageView.rotation % 180 === 0 ? false : true);\n      var pageWidth = (changeOrientation ? pageView.height : pageView.width) /\n        pageView.scale / CSS_UNITS;\n      var pageHeight = (changeOrientation ? pageView.width : pageView.height) /\n        pageView.scale / CSS_UNITS;\n      var scale = 0;\n      switch (dest[1].name) {\n        case 'XYZ':\n          x = dest[2];\n          y = dest[3];\n          scale = dest[4];\n          // If x and/or y coordinates are not supplied, default to\n          // _top_ left of the page (not the obvious bottom left,\n          // since aligning the bottom of the intended page with the\n          // top of the window is rarely helpful).\n          x = x !== null ? x : 0;\n          y = y !== null ? y : pageHeight;\n          break;\n        case 'Fit':\n        case 'FitB':\n          scale = 'page-fit';\n          break;\n        case 'FitH':\n        case 'FitBH':\n          y = dest[2];\n          scale = 'page-width';\n          // According to the PDF spec, section 12.3.2.2, a `null` value in the\n          // parameter should maintain the position relative to the new page.\n          if (y === null && this._location) {\n            x = this._location.left;\n            y = this._location.top;\n          }\n          break;\n        case 'FitV':\n        case 'FitBV':\n          x = dest[2];\n          width = pageWidth;\n          height = pageHeight;\n          scale = 'page-height';\n          break;\n        case 'FitR':\n          x = dest[2];\n          y = dest[3];\n          width = dest[4] - x;\n          height = dest[5] - y;\n          var hPadding = this.removePageBorders ? 0 : SCROLLBAR_PADDING;\n          var vPadding = this.removePageBorders ? 0 : VERTICAL_PADDING;\n\n          widthScale = (this.container.clientWidth - hPadding) /\n            width / CSS_UNITS;\n          heightScale = (this.container.clientHeight - vPadding) /\n            height / CSS_UNITS;\n          scale = Math.min(Math.abs(widthScale), Math.abs(heightScale));\n          break;\n        default:\n          console.error('PDFViewer_scrollPageIntoView: \\'' + dest[1].name +\n                        '\\' is not a valid destination type.');\n          return;\n      }\n\n      if (scale && scale !== this._currentScale) {\n        this.currentScaleValue = scale;\n      } else if (this._currentScale === UNKNOWN_SCALE) {\n        this.currentScaleValue = DEFAULT_SCALE_VALUE;\n      }\n\n      if (scale === 'page-fit' && !dest[4]) {\n        scrollIntoView(pageView.div);\n        return;\n      }\n\n      var boundingRect = [\n        pageView.viewport.convertToViewportPoint(x, y),\n        pageView.viewport.convertToViewportPoint(x + width, y + height)\n      ];\n      var left = Math.min(boundingRect[0][0], boundingRect[1][0]);\n      var top = Math.min(boundingRect[0][1], boundingRect[1][1]);\n\n      if (!allowNegativeOffset) {\n        // Some bad PDF generators will create destinations with e.g. top values\n        // that exceeds the page height. Ensure that offsets are not negative,\n        // to prevent a previous page from becoming visible (fixes bug 874482).\n        left = Math.max(left, 0);\n        top = Math.max(top, 0);\n      }\n      scrollIntoView(pageView.div, { left, top, });\n    },\n\n    _updateLocation(firstPage) {\n      var currentScale = this._currentScale;\n      var currentScaleValue = this._currentScaleValue;\n      var normalizedScaleValue =\n        parseFloat(currentScaleValue) === currentScale ?\n        Math.round(currentScale * 10000) / 100 : currentScaleValue;\n\n      var pageNumber = firstPage.id;\n      var pdfOpenParams = '#page=' + pageNumber;\n      pdfOpenParams += '&zoom=' + normalizedScaleValue;\n      var currentPageView = this._pages[pageNumber - 1];\n      var container = this.container;\n      var topLeft = currentPageView.getPagePoint(\n        (container.scrollLeft - firstPage.x),\n        (container.scrollTop - firstPage.y));\n      var intLeft = Math.round(topLeft[0]);\n      var intTop = Math.round(topLeft[1]);\n      pdfOpenParams += ',' + intLeft + ',' + intTop;\n\n      this._location = {\n        pageNumber,\n        scale: normalizedScaleValue,\n        top: intTop,\n        left: intLeft,\n        pdfOpenParams,\n      };\n    },\n\n    update: function PDFViewer_update() {\n      var visible = this._getVisiblePages();\n      var visiblePages = visible.views;\n      if (visiblePages.length === 0) {\n        return;\n      }\n\n      var suggestedCacheSize = Math.max(DEFAULT_CACHE_SIZE,\n          2 * visiblePages.length + 1);\n      this._buffer.resize(suggestedCacheSize);\n\n      this.renderingQueue.renderHighestPriority(visible);\n\n      var currentId = this._currentPageNumber;\n      var firstPage = visible.first;\n\n      for (var i = 0, ii = visiblePages.length, stillFullyVisible = false;\n           i < ii; ++i) {\n        var page = visiblePages[i];\n\n        if (page.percent < 100) {\n          break;\n        }\n        if (page.id === currentId) {\n          stillFullyVisible = true;\n          break;\n        }\n      }\n\n      if (!stillFullyVisible) {\n        currentId = visiblePages[0].id;\n      }\n\n      if (!this.isInPresentationMode) {\n        this._setCurrentPageNumber(currentId);\n      }\n\n      this._updateLocation(firstPage);\n\n      this.eventBus.dispatch('updateviewarea', {\n        source: this,\n        location: this._location\n      });\n    },\n\n    containsElement(element) {\n      return this.container.contains(element);\n    },\n\n    focus() {\n      this.container.focus();\n    },\n\n    get isInPresentationMode() {\n      return this.presentationModeState === PresentationModeState.FULLSCREEN;\n    },\n\n    get isChangingPresentationMode() {\n      return this.presentationModeState === PresentationModeState.CHANGING;\n    },\n\n    get isHorizontalScrollbarEnabled() {\n      return (this.isInPresentationMode ?\n        false : (this.container.scrollWidth > this.container.clientWidth));\n    },\n\n    _getVisiblePages() {\n      if (!this.isInPresentationMode) {\n        return getVisibleElements(this.container, this._pages, true);\n      }\n      // The algorithm in getVisibleElements doesn't work in all browsers and\n      // configurations when presentation mode is active.\n      var visible = [];\n      var currentPage = this._pages[this._currentPageNumber - 1];\n      visible.push({ id: currentPage.id, view: currentPage });\n      return { first: currentPage, last: currentPage, views: visible };\n    },\n\n    cleanup() {\n      for (var i = 0, ii = this._pages.length; i < ii; i++) {\n        if (this._pages[i] &&\n            this._pages[i].renderingState !== RenderingStates.FINISHED) {\n          this._pages[i].reset();\n        }\n      }\n    },\n\n    /**\n     * @private\n     */\n    _cancelRendering: function PDFViewer_cancelRendering() {\n      for (var i = 0, ii = this._pages.length; i < ii; i++) {\n        if (this._pages[i]) {\n          this._pages[i].cancelRendering();\n        }\n      }\n    },\n\n    /**\n     * @param {PDFPageView} pageView\n     * @returns {PDFPage}\n     * @private\n     */\n    _ensurePdfPageLoaded(pageView) {\n      if (pageView.pdfPage) {\n        return Promise.resolve(pageView.pdfPage);\n      }\n      var pageNumber = pageView.id;\n      if (this._pagesRequests[pageNumber]) {\n        return this._pagesRequests[pageNumber];\n      }\n      var promise = this.pdfDocument.getPage(pageNumber).then((pdfPage) => {\n        if (!pageView.pdfPage) {\n          pageView.setPdfPage(pdfPage);\n        }\n        this._pagesRequests[pageNumber] = null;\n        return pdfPage;\n      });\n      this._pagesRequests[pageNumber] = promise;\n      return promise;\n    },\n\n    forceRendering(currentlyVisiblePages) {\n      var visiblePages = currentlyVisiblePages || this._getVisiblePages();\n      var pageView = this.renderingQueue.getHighestPriority(visiblePages,\n                                                            this._pages,\n                                                            this.scroll.down);\n      if (pageView) {\n        this._ensurePdfPageLoaded(pageView).then(() => {\n          this.renderingQueue.renderView(pageView);\n        });\n        return true;\n      }\n      return false;\n    },\n\n    getPageTextContent(pageIndex) {\n      return this.pdfDocument.getPage(pageIndex + 1).then(function (page) {\n        return page.getTextContent({\n          normalizeWhitespace: true,\n        });\n      });\n    },\n\n    /**\n     * @param {HTMLDivElement} textLayerDiv\n     * @param {number} pageIndex\n     * @param {PageViewport} viewport\n     * @returns {TextLayerBuilder}\n     */\n    createTextLayerBuilder(textLayerDiv, pageIndex, viewport,\n                           enhanceTextSelection = false) {\n      return new TextLayerBuilder({\n        textLayerDiv,\n        eventBus: this.eventBus,\n        pageIndex,\n        viewport,\n        findController: this.isInPresentationMode ? null : this.findController,\n        enhanceTextSelection: this.isInPresentationMode ? false :\n                                                          enhanceTextSelection,\n      });\n    },\n\n    /**\n     * @param {HTMLDivElement} pageDiv\n     * @param {PDFPage} pdfPage\n     * @param {boolean} renderInteractiveForms\n     * @returns {AnnotationLayerBuilder}\n     */\n    createAnnotationLayerBuilder(pageDiv, pdfPage,\n                                 renderInteractiveForms = false) {\n      return new AnnotationLayerBuilder({\n        pageDiv,\n        pdfPage,\n        renderInteractiveForms,\n        linkService: this.linkService,\n        downloadManager: this.downloadManager\n      });\n    },\n\n    /**\n     * @param {HTMLDivElement} pageDiv\n     * @param {PDFPage} pdfPage\n     * @returns {NoteLayerBuilder}\n     */\n    createNoteLayerBuilder(pageDiv, pdfPage) {\n      return new NoteLayerBuilder({\n        pageDiv,\n        pdfPage,\n        noteStore: this.noteStore,\n        eventBus: this.eventBus,\n      });\n    },\n\n    setFindController(findController) {\n      this.findController = findController;\n    },\n\n    /**\n     * Returns sizes of the pages.\n     * @returns {Array} Array of objects with width/height/rotation fields.\n     */\n    getPagesOverview() {\n      var pagesOverview = this._pages.map(function (pageView) {\n        var viewport = pageView.pdfPage.getViewport(1);\n        return {\n          width: viewport.width,\n          height: viewport.height,\n          rotation: viewport.rotation,\n        };\n      });\n      return pagesOverview;\n    },\n  };\n\n  return PDFViewer;\n})();\n\nexport {\n  PresentationModeState,\n  PDFViewer,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/pdf_viewer.js","/* Copyright 2013 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar defaultPreferences = null;\nfunction getDefaultPreferences() {\n  if (!defaultPreferences) {\n    if (typeof PDFJSDev !== 'undefined' && PDFJSDev.test('PRODUCTION')) {\n      defaultPreferences = Promise.resolve(\n        PDFJSDev.json('$ROOT/web/default_preferences.json'));\n    } else {\n      defaultPreferences = new Promise(function (resolve) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', 'default_preferences.json');\n        xhr.onload = xhr.onerror = function loaded() {\n          try {\n            resolve(JSON.parse(xhr.responseText));\n          } catch (e) {\n            console.error(`Unable to load default preferences: ${e}`);\n            resolve({});\n          }\n        };\n        xhr.send();\n      });\n    }\n  }\n  return defaultPreferences;\n}\n\nfunction cloneObj(obj) {\n  var result = {};\n  for (var i in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, i)) {\n      result[i] = obj[i];\n    }\n  }\n  return result;\n}\n\n/**\n * BasePreferences - Abstract base class for storing persistent settings.\n *   Used for settings that should be applied to all opened documents,\n *   or every time the viewer is loaded.\n */\nclass BasePreferences {\n  constructor() {\n    if (this.constructor === BasePreferences) {\n      throw new Error('Cannot initialize BasePreferences.');\n    }\n    this.prefs = null;\n\n    this._initializedPromise = getDefaultPreferences().then((defaults) => {\n      Object.defineProperty(this, 'defaults', {\n        value: Object.freeze(defaults),\n        writable: false,\n        enumerable: true,\n        configurable: false\n      });\n\n      this.prefs = cloneObj(defaults);\n      return this._readFromStorage(defaults);\n    }).then((prefObj) => {\n      if (prefObj) {\n        this.prefs = prefObj;\n      }\n    });\n  }\n\n  /**\n   * Stub function for writing preferences to storage.\n   * @param {Object} prefObj The preferences that should be written to storage.\n   * @return {Promise} A promise that is resolved when the preference values\n   *                   have been written.\n   */\n  _writeToStorage(prefObj) {\n    return Promise.reject(new Error('Not implemented: _writeToStorage'));\n  }\n\n  /**\n   * Stub function for reading preferences from storage.\n   * @param {Object} prefObj The preferences that should be read from storage.\n   * @return {Promise} A promise that is resolved with an {Object} containing\n   *                   the preferences that have been read.\n   */\n  _readFromStorage(prefObj) {\n    return Promise.reject(new Error('Not implemented: _readFromStorage'));\n  }\n\n  /**\n   * Reset the preferences to their default values and update storage.\n   * @return {Promise} A promise that is resolved when the preference values\n   *                   have been reset.\n   */\n  reset() {\n    return this._initializedPromise.then(() => {\n      this.prefs = cloneObj(this.defaults);\n      return this._writeToStorage(this.defaults);\n    });\n  }\n\n  /**\n   * Replace the current preference values with the ones from storage.\n   * @return {Promise} A promise that is resolved when the preference values\n   *                   have been updated.\n   */\n  reload() {\n    return this._initializedPromise.then(() => {\n      return this._readFromStorage(this.defaults);\n    }).then((prefObj) => {\n      if (prefObj) {\n        this.prefs = prefObj;\n      }\n    });\n  }\n\n  /**\n   * Set the value of a preference.\n   * @param {string} name The name of the preference that should be changed.\n   * @param {boolean|number|string} value The new value of the preference.\n   * @return {Promise} A promise that is resolved when the value has been set,\n   *                   provided that the preference exists and the types match.\n   */\n  set(name, value) {\n    return this._initializedPromise.then(() => {\n      if (this.defaults[name] === undefined) {\n        throw new Error(`Set preference: \"${name}\" is undefined.`);\n      } else if (value === undefined) {\n        throw new Error('Set preference: no value is specified.');\n      }\n      var valueType = typeof value;\n      var defaultType = typeof this.defaults[name];\n\n      if (valueType !== defaultType) {\n        if (valueType === 'number' && defaultType === 'string') {\n          value = value.toString();\n        } else {\n          throw new Error(`Set preference: \"${value}\" is a ${valueType}, ` +\n                          `expected a ${defaultType}.`);\n        }\n      } else {\n        if (valueType === 'number' && (value | 0) !== value) {\n          throw new Error(`Set preference: \"${value}\" must be an integer.`);\n        }\n      }\n      this.prefs[name] = value;\n      return this._writeToStorage(this.prefs);\n    });\n  }\n\n  /**\n   * Get the value of a preference.\n   * @param {string} name The name of the preference whose value is requested.\n   * @return {Promise} A promise that is resolved with a {boolean|number|string}\n   *                   containing the value of the preference.\n   */\n  get(name) {\n    return this._initializedPromise.then(() => {\n      var defaultValue = this.defaults[name];\n\n      if (defaultValue === undefined) {\n        throw new Error(`Get preference: \"${name}\" is undefined.`);\n      } else {\n        var prefValue = this.prefs[name];\n\n        if (prefValue !== undefined) {\n          return prefValue;\n        }\n      }\n      return defaultValue;\n    });\n  }\n}\n\nexport {\n  BasePreferences,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/preferences.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { mozL10n, SCROLLBAR_PADDING } from './ui_utils';\n\n/**\n * @typedef {Object} SecondaryToolbarOptions\n * @property {HTMLDivElement} toolbar - Container for the secondary toolbar.\n * @property {HTMLButtonElement} toggleButton - Button to toggle the visibility\n *   of the secondary toolbar.\n * @property {HTMLDivElement} toolbarButtonContainer - Container where all the\n *   toolbar buttons are placed. The maximum height of the toolbar is controlled\n *   dynamically by adjusting the 'max-height' CSS property of this DOM element.\n * @property {HTMLButtonElement} downloadButton - Button to download the\n *   document.\n * @property {HTMLButtonElement} firstPageButton - Button to go to the first\n *   page in the document.\n * @property {HTMLButtonElement} lastPageButton - Button to go to the last page\n *   in the document.\n * @property {HTMLButtonElement} pageRotateCwButton - Button to rotate the pages\n *   clockwise.\n * @property {HTMLButtonElement} pageRotateCcwButton - Button to rotate the\n *   pages counterclockwise.\n * @property {HTMLButtonElement} toggleHandToolButton - Button to toggle the\n *   hand tool.\n * @property {HTMLButtonElement} documentPropertiesButton - Button for opening\n *   the document properties dialog.\n */\n\n/**\n * @class\n */\nvar SecondaryToolbar = (function SecondaryToolbarClosure() {\n  /**\n   * @constructs SecondaryToolbar\n   * @param {SecondaryToolbarOptions} options\n   * @param {HTMLDivElement} mainContainer\n   * @param {EventBus} eventBus\n   */\n  function SecondaryToolbar(options, mainContainer, eventBus) {\n    this.toolbar = options.toolbar;\n    this.toggleButton = options.toggleButton;\n    this.toolbarButtonContainer = options.toolbarButtonContainer;\n    this.buttons = [\n      { element: options.downloadButton, eventName: 'download', close: true },\n      { element: options.firstPageButton, eventName: 'firstpage', close: true },\n      { element: options.lastPageButton, eventName: 'lastpage', close: true },\n      { element: options.pageRotateCwButton, eventName: 'rotatecw',\n        close: false },\n      { element: options.pageRotateCcwButton, eventName: 'rotateccw',\n        close: false },\n      { element: options.toggleHandToolButton, eventName: 'togglehandtool',\n        close: true },\n      { element: options.documentPropertiesButton,\n        eventName: 'documentproperties', close: true }\n    ];\n    this.items = {\n      firstPage: options.firstPageButton,\n      lastPage: options.lastPageButton,\n      pageRotateCw: options.pageRotateCwButton,\n      pageRotateCcw: options.pageRotateCcwButton,\n    };\n\n    this.mainContainer = mainContainer;\n    this.eventBus = eventBus;\n\n    this.opened = false;\n    this.containerHeight = null;\n    this.previousContainerHeight = null;\n\n    this.reset();\n\n    // Bind the event listeners for click and hand tool actions.\n    this._bindClickListeners();\n    this._bindHandToolListener(options.toggleHandToolButton);\n\n    // Bind the event listener for adjusting the 'max-height' of the toolbar.\n    this.eventBus.on('resize', this._setMaxHeight.bind(this));\n  }\n\n  SecondaryToolbar.prototype = {\n    /**\n     * @return {boolean}\n     */\n    get isOpen() {\n      return this.opened;\n    },\n\n    setPageNumber: function SecondaryToolbar_setPageNumber(pageNumber) {\n      this.pageNumber = pageNumber;\n      this._updateUIState();\n    },\n\n    setPagesCount: function SecondaryToolbar_setPagesCount(pagesCount) {\n      this.pagesCount = pagesCount;\n      this._updateUIState();\n    },\n\n    reset: function SecondaryToolbar_reset() {\n      this.pageNumber = 0;\n      this.pagesCount = 0;\n      this._updateUIState();\n    },\n\n    _updateUIState: function SecondaryToolbar_updateUIState() {\n      var items = this.items;\n\n      items.firstPage.disabled = (this.pageNumber <= 1);\n      items.lastPage.disabled = (this.pageNumber >= this.pagesCount);\n      items.pageRotateCw.disabled = this.pagesCount === 0;\n      items.pageRotateCcw.disabled = this.pagesCount === 0;\n    },\n\n    _bindClickListeners: function SecondaryToolbar_bindClickListeners() {\n      // Button to toggle the visibility of the secondary toolbar.\n      this.toggleButton.addEventListener('click', this.toggle.bind(this));\n\n      // All items within the secondary toolbar.\n      for (let button in this.buttons) {\n        let { element, eventName, close, } = this.buttons[button];\n\n        element.addEventListener('click', (evt) => {\n          if (eventName !== null) {\n            this.eventBus.dispatch(eventName, { source: this, });\n          }\n          if (close) {\n            this.close();\n          }\n        });\n      }\n    },\n\n    _bindHandToolListener:\n        function SecondaryToolbar_bindHandToolListener(toggleHandToolButton) {\n      var isHandToolActive = false;\n      this.eventBus.on('handtoolchanged', function (e) {\n        if (isHandToolActive === e.isActive) {\n          return;\n        }\n        isHandToolActive = e.isActive;\n        if (isHandToolActive) {\n          toggleHandToolButton.title =\n            mozL10n.get('hand_tool_disable.title', null, 'Disable hand tool');\n          toggleHandToolButton.firstElementChild.textContent =\n            mozL10n.get('hand_tool_disable_label', null, 'Disable hand tool');\n        } else {\n          toggleHandToolButton.title =\n            mozL10n.get('hand_tool_enable.title', null, 'Enable hand tool');\n          toggleHandToolButton.firstElementChild.textContent =\n            mozL10n.get('hand_tool_enable_label', null, 'Enable hand tool');\n        }\n      });\n    },\n\n    open: function SecondaryToolbar_open() {\n      if (this.opened) {\n        return;\n      }\n      this.opened = true;\n      this._setMaxHeight();\n\n      this.toggleButton.classList.add('toggled');\n      this.toolbar.classList.remove('hidden');\n    },\n\n    close: function SecondaryToolbar_close() {\n      if (!this.opened) {\n        return;\n      }\n      this.opened = false;\n      this.toolbar.classList.add('hidden');\n      this.toggleButton.classList.remove('toggled');\n    },\n\n    toggle: function SecondaryToolbar_toggle() {\n      if (this.opened) {\n        this.close();\n      } else {\n        this.open();\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setMaxHeight: function SecondaryToolbar_setMaxHeight() {\n      if (!this.opened) {\n        return; // Only adjust the 'max-height' if the toolbar is visible.\n      }\n      this.containerHeight = this.mainContainer.clientHeight;\n\n      if (this.containerHeight === this.previousContainerHeight) {\n        return;\n      }\n      this.toolbarButtonContainer.setAttribute('style',\n        'max-height: ' + (this.containerHeight - SCROLLBAR_PADDING) + 'px;');\n\n      this.previousContainerHeight = this.containerHeight;\n    }\n  };\n\n  return SecondaryToolbar;\n})();\n\nexport {\n  SecondaryToolbar,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/secondary_toolbar.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getGlobalEventBus } from './dom_events';\nimport { renderTextLayer } from './pdfjs';\n\nvar EXPAND_DIVS_TIMEOUT = 300; // ms\n\n/**\n * @typedef {Object} TextLayerBuilderOptions\n * @property {HTMLDivElement} textLayerDiv - The text layer container.\n * @property {EventBus} eventBus - The application event bus.\n * @property {number} pageIndex - The page index.\n * @property {PageViewport} viewport - The viewport of the text layer.\n * @property {PDFFindController} findController\n * @property {boolean} enhanceTextSelection - Option to turn on improved\n *   text selection.\n */\n\n/**\n * TextLayerBuilder provides text-selection functionality for the PDF.\n * It does this by creating overlay divs over the PDF text. These divs\n * contain text that matches the PDF text they are overlaying. This object\n * also provides a way to highlight text that is being searched for.\n * @class\n */\nvar TextLayerBuilder = (function TextLayerBuilderClosure() {\n  function TextLayerBuilder(options) {\n    this.textLayerDiv = options.textLayerDiv;\n    this.eventBus = options.eventBus || getGlobalEventBus();\n    this.textContent = null;\n    this.renderingDone = false;\n    this.pageIdx = options.pageIndex;\n    this.pageNumber = this.pageIdx + 1;\n    this.matches = [];\n    this.viewport = options.viewport;\n    this.textDivs = [];\n    this.findController = options.findController || null;\n    this.textLayerRenderTask = null;\n    this.enhanceTextSelection = options.enhanceTextSelection;\n    this._bindMouse();\n  }\n\n  TextLayerBuilder.prototype = {\n    /**\n     * @private\n     */\n    _finishRendering: function TextLayerBuilder_finishRendering() {\n      this.renderingDone = true;\n\n      if (!this.enhanceTextSelection) {\n        var endOfContent = document.createElement('div');\n        endOfContent.className = 'endOfContent';\n        this.textLayerDiv.appendChild(endOfContent);\n      }\n\n      this.eventBus.dispatch('textlayerrendered', {\n        source: this,\n        pageNumber: this.pageNumber,\n        numTextDivs: this.textDivs.length,\n      });\n    },\n\n    /**\n     * Renders the text layer.\n     * @param {number} timeout (optional) if specified, the rendering waits\n     *   for specified amount of ms.\n     */\n    render: function TextLayerBuilder_render(timeout) {\n      if (!this.textContent || this.renderingDone) {\n        return;\n      }\n      this.cancel();\n\n      this.textDivs = [];\n      var textLayerFrag = document.createDocumentFragment();\n      this.textLayerRenderTask = renderTextLayer({\n        textContent: this.textContent,\n        container: textLayerFrag,\n        viewport: this.viewport,\n        textDivs: this.textDivs,\n        timeout,\n        enhanceTextSelection: this.enhanceTextSelection,\n      });\n      this.textLayerRenderTask.promise.then(() => {\n        this.textLayerDiv.appendChild(textLayerFrag);\n        this._finishRendering();\n        this.updateMatches();\n      }, function (reason) {\n        // cancelled or failed to render text layer -- skipping errors\n      });\n    },\n\n    /**\n     * Cancels rendering of the text layer.\n     */\n    cancel: function TextLayerBuilder_cancel() {\n      if (this.textLayerRenderTask) {\n        this.textLayerRenderTask.cancel();\n        this.textLayerRenderTask = null;\n      }\n    },\n\n    setTextContent: function TextLayerBuilder_setTextContent(textContent) {\n      this.cancel();\n      this.textContent = textContent;\n    },\n\n    convertMatches: function TextLayerBuilder_convertMatches(matches,\n                                                             matchesLength) {\n      var i = 0;\n      var iIndex = 0;\n      var bidiTexts = this.textContent.items;\n      var end = bidiTexts.length - 1;\n      var queryLen = (this.findController === null ?\n                      0 : this.findController.state.query.length);\n      var ret = [];\n      if (!matches) {\n        return ret;\n      }\n      for (var m = 0, len = matches.length; m < len; m++) {\n        // Calculate the start position.\n        var matchIdx = matches[m];\n\n        // Loop over the divIdxs.\n        while (i !== end && matchIdx >= (iIndex + bidiTexts[i].str.length)) {\n          iIndex += bidiTexts[i].str.length;\n          i++;\n        }\n\n        if (i === bidiTexts.length) {\n          console.error('Could not find a matching mapping');\n        }\n\n        var match = {\n          begin: {\n            divIdx: i,\n            offset: matchIdx - iIndex\n          }\n        };\n\n        // Calculate the end position.\n        if (matchesLength) { // multiterm search\n          matchIdx += matchesLength[m];\n        } else { // phrase search\n          matchIdx += queryLen;\n        }\n\n        // Somewhat the same array as above, but use > instead of >= to get\n        // the end position right.\n        while (i !== end && matchIdx > (iIndex + bidiTexts[i].str.length)) {\n          iIndex += bidiTexts[i].str.length;\n          i++;\n        }\n\n        match.end = {\n          divIdx: i,\n          offset: matchIdx - iIndex\n        };\n        ret.push(match);\n      }\n\n      return ret;\n    },\n\n    renderMatches: function TextLayerBuilder_renderMatches(matches) {\n      // Early exit if there is nothing to render.\n      if (matches.length === 0) {\n        return;\n      }\n\n      var bidiTexts = this.textContent.items;\n      var textDivs = this.textDivs;\n      var prevEnd = null;\n      var pageIdx = this.pageIdx;\n      var isSelectedPage = (this.findController === null ?\n        false : (pageIdx === this.findController.selected.pageIdx));\n      var selectedMatchIdx = (this.findController === null ?\n                              -1 : this.findController.selected.matchIdx);\n      var highlightAll = (this.findController === null ?\n                          false : this.findController.state.highlightAll);\n      var infinity = {\n        divIdx: -1,\n        offset: undefined\n      };\n\n      function beginText(begin, className) {\n        var divIdx = begin.divIdx;\n        textDivs[divIdx].textContent = '';\n        appendTextToDiv(divIdx, 0, begin.offset, className);\n      }\n\n      function appendTextToDiv(divIdx, fromOffset, toOffset, className) {\n        var div = textDivs[divIdx];\n        var content = bidiTexts[divIdx].str.substring(fromOffset, toOffset);\n        var node = document.createTextNode(content);\n        if (className) {\n          var span = document.createElement('span');\n          span.className = className;\n          span.appendChild(node);\n          div.appendChild(span);\n          return;\n        }\n        div.appendChild(node);\n      }\n\n      var i0 = selectedMatchIdx, i1 = i0 + 1;\n      if (highlightAll) {\n        i0 = 0;\n        i1 = matches.length;\n      } else if (!isSelectedPage) {\n        // Not highlighting all and this isn't the selected page, so do nothing.\n        return;\n      }\n\n      for (var i = i0; i < i1; i++) {\n        var match = matches[i];\n        var begin = match.begin;\n        var end = match.end;\n        var isSelected = (isSelectedPage && i === selectedMatchIdx);\n        var highlightSuffix = (isSelected ? ' selected' : '');\n\n        if (this.findController) {\n          this.findController.updateMatchPosition(pageIdx, i, textDivs,\n                                                  begin.divIdx);\n        }\n\n        // Match inside new div.\n        if (!prevEnd || begin.divIdx !== prevEnd.divIdx) {\n          // If there was a previous div, then add the text at the end.\n          if (prevEnd !== null) {\n            appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\n          }\n          // Clear the divs and set the content until the starting point.\n          beginText(begin);\n        } else {\n          appendTextToDiv(prevEnd.divIdx, prevEnd.offset, begin.offset);\n        }\n\n        if (begin.divIdx === end.divIdx) {\n          appendTextToDiv(begin.divIdx, begin.offset, end.offset,\n                          'highlight' + highlightSuffix);\n        } else {\n          appendTextToDiv(begin.divIdx, begin.offset, infinity.offset,\n                          'highlight begin' + highlightSuffix);\n          for (var n0 = begin.divIdx + 1, n1 = end.divIdx; n0 < n1; n0++) {\n            textDivs[n0].className = 'highlight middle' + highlightSuffix;\n          }\n          beginText(end, 'highlight end' + highlightSuffix);\n        }\n        prevEnd = end;\n      }\n\n      if (prevEnd) {\n        appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\n      }\n    },\n\n    updateMatches: function TextLayerBuilder_updateMatches() {\n      // Only show matches when all rendering is done.\n      if (!this.renderingDone) {\n        return;\n      }\n\n      // Clear all matches.\n      var matches = this.matches;\n      var textDivs = this.textDivs;\n      var bidiTexts = this.textContent.items;\n      var clearedUntilDivIdx = -1;\n\n      // Clear all current matches.\n      for (var i = 0, len = matches.length; i < len; i++) {\n        var match = matches[i];\n        var begin = Math.max(clearedUntilDivIdx, match.begin.divIdx);\n        for (var n = begin, end = match.end.divIdx; n <= end; n++) {\n          var div = textDivs[n];\n          div.textContent = bidiTexts[n].str;\n          div.className = '';\n        }\n        clearedUntilDivIdx = match.end.divIdx + 1;\n      }\n\n      if (this.findController === null || !this.findController.active) {\n        return;\n      }\n\n      // Convert the matches on the page controller into the match format\n      // used for the textLayer.\n      var pageMatches, pageMatchesLength;\n      if (this.findController !== null) {\n        pageMatches = this.findController.pageMatches[this.pageIdx] || null;\n        pageMatchesLength = (this.findController.pageMatchesLength) ?\n          this.findController.pageMatchesLength[this.pageIdx] || null : null;\n      }\n\n      this.matches = this.convertMatches(pageMatches, pageMatchesLength);\n      this.renderMatches(this.matches);\n    },\n\n    /**\n     * Fixes text selection: adds additional div where mouse was clicked.\n     * This reduces flickering of the content if mouse slowly dragged down/up.\n     * @private\n     */\n    _bindMouse: function TextLayerBuilder_bindMouse() {\n      var div = this.textLayerDiv;\n      var self = this;\n      var expandDivsTimer = null;\n\n      div.addEventListener('mousedown', function (e) {\n        if (self.enhanceTextSelection && self.textLayerRenderTask) {\n          self.textLayerRenderTask.expandTextDivs(true);\n          if (expandDivsTimer) {\n            clearTimeout(expandDivsTimer);\n            expandDivsTimer = null;\n          }\n          return;\n        }\n        var end = div.querySelector('.endOfContent');\n        if (!end) {\n          return;\n        }\n        // On non-Firefox browsers, the selection will feel better if the height\n        // of the endOfContent div will be adjusted to start at mouse click\n        // location -- this will avoid flickering when selections moves up.\n        // However it does not work when selection started on empty space.\n        var adjustTop = e.target !== div;\n        if (typeof PDFJSDev === 'undefined' || PDFJSDev.test('GENERIC')) {\n          adjustTop = adjustTop && window.getComputedStyle(end).\n            getPropertyValue('-moz-user-select') !== 'none';\n        }\n        if (adjustTop) {\n          var divBounds = div.getBoundingClientRect();\n          var r = Math.max(0, (e.pageY - divBounds.top) / divBounds.height);\n          end.style.top = (r * 100).toFixed(2) + '%';\n        }\n        end.classList.add('active');\n      });\n\n      div.addEventListener('mouseup', function (e) {\n        if (self.enhanceTextSelection && self.textLayerRenderTask) {\n          expandDivsTimer = setTimeout(function() {\n            if (self.textLayerRenderTask) {\n              self.textLayerRenderTask.expandTextDivs(false);\n            }\n            expandDivsTimer = null;\n          }, EXPAND_DIVS_TIMEOUT);\n          return;\n        }\n        var end = div.querySelector('.endOfContent');\n        if (!end) {\n          return;\n        }\n        end.style.top = '';\n        end.classList.remove('active');\n      });\n    },\n  };\n  return TextLayerBuilder;\n})();\n\n/**\n * @constructor\n * @implements IPDFTextLayerFactory\n */\nfunction DefaultTextLayerFactory() {}\nDefaultTextLayerFactory.prototype = {\n  /**\n   * @param {HTMLDivElement} textLayerDiv\n   * @param {number} pageIndex\n   * @param {PageViewport} viewport\n   * @param {boolean} enhanceTextSelection\n   * @returns {TextLayerBuilder}\n   */\n  createTextLayerBuilder(textLayerDiv, pageIndex, viewport,\n                         enhanceTextSelection = false) {\n    return new TextLayerBuilder({\n      textLayerDiv,\n      pageIndex,\n      viewport,\n      enhanceTextSelection,\n    });\n  }\n};\n\nexport {\n  TextLayerBuilder,\n  DefaultTextLayerFactory,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/text_layer_builder.js","/* Copyright 2016 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  animationStarted, DEFAULT_SCALE, DEFAULT_SCALE_VALUE, localized, MAX_SCALE,\n  MIN_SCALE, mozL10n, noContextMenuHandler\n} from './ui_utils';\n\nvar PAGE_NUMBER_LOADING_INDICATOR = 'visiblePageIsLoading';\nvar SCALE_SELECT_CONTAINER_PADDING = 8;\nvar SCALE_SELECT_PADDING = 22;\n\n/**\n * @typedef {Object} ToolbarOptions\n * @property {HTMLDivElement} container - Container for the secondary toolbar.\n * @property {HTMLSpanElement} numPages - Label that contains number of pages.\n * @property {HTMLInputElement} pageNumber - Control for display and user input\n *   of the current page number.\n * @property {HTMLSpanElement} scaleSelectContainer - Container where scale\n *   controls are placed. The width is adjusted on UI initialization.\n * @property {HTMLSelectElement} scaleSelect - Scale selection control.\n * @property {HTMLOptionElement} customScaleOption - The item used to display\n *   a non-predefined scale.\n * @property {HTMLButtonElement} previous - Button to go to the previous page.\n * @property {HTMLButtonElement} next - Button to go to the next page.\n * @property {HTMLButtonElement} zoomIn - Button to zoom in the pages.\n * @property {HTMLButtonElement} zoomOut - Button to zoom out the pages.\n * @property {HTMLButtonElement} viewFind - Button to open find bar.\n * @property {HTMLButtonElement} presentationModeButton - Button to switch to\n *   presentation mode.\n * @property {HTMLButtonElement} addNote - Button to begin adding note.\n * @property {HTMLButtonElement} nextNote - Button to edit next note.\n * @property {HTMLButtonElement} previousNote - Button to edit previous note.\n */\n\n/**\n * @class\n */\nvar Toolbar = (function ToolbarClosure() {\n  /**\n   * @constructs Toolbar\n   * @param {ToolbarOptions} options\n   * @param {HTMLDivElement} mainContainer\n   * @param {EventBus} eventBus\n   */\n  function Toolbar(options, mainContainer, eventBus) {\n    this.toolbar = options.container;\n    this.mainContainer = mainContainer;\n    this.eventBus = eventBus;\n    this.items = options;\n\n    this._wasLocalized = false;\n    this.reset();\n\n    // Bind the event listeners for click and hand tool actions.\n    this._bindListeners();\n    this._bindAddNoteListener();\n  }\n\n  Toolbar.prototype = {\n    setPageNumber(pageNumber, pageLabel) {\n      this.pageNumber = pageNumber;\n      this.pageLabel = pageLabel;\n      this._updateUIState(false);\n    },\n\n    setPagesCount(pagesCount, hasPageLabels) {\n      this.pagesCount = pagesCount;\n      this.hasPageLabels = hasPageLabels;\n      this._updateUIState(true);\n    },\n\n    setPageScale(pageScaleValue, pageScale) {\n      this.pageScaleValue = pageScaleValue;\n      this.pageScale = pageScale;\n      this._updateUIState(false);\n    },\n\n    reset() {\n      this.pageNumber = 0;\n      this.pageLabel = null;\n      this.hasPageLabels = false;\n      this.pagesCount = 0;\n      this.pageScaleValue = DEFAULT_SCALE_VALUE;\n      this.pageScale = DEFAULT_SCALE;\n      this._updateUIState(true);\n    },\n\n    _bindListeners: function Toolbar_bindClickListeners() {\n      var eventBus = this.eventBus;\n      var self = this;\n      var items = this.items;\n\n      items.previous.addEventListener('click', function() {\n        eventBus.dispatch('previouspage');\n      });\n\n      items.next.addEventListener('click', function() {\n        eventBus.dispatch('nextpage');\n      });\n\n      items.zoomIn.addEventListener('click', function() {\n        eventBus.dispatch('zoomin');\n      });\n\n      items.zoomOut.addEventListener('click', function() {\n        eventBus.dispatch('zoomout');\n      });\n\n      items.pageNumber.addEventListener('click', function() {\n        this.select();\n      });\n\n      items.pageNumber.addEventListener('change', function() {\n        eventBus.dispatch('pagenumberchanged', {\n          source: self,\n          value: this.value\n        });\n      });\n\n      items.scaleSelect.addEventListener('change', function() {\n        if (this.value === 'custom') {\n          return;\n        }\n        eventBus.dispatch('scalechanged', {\n          source: self,\n          value: this.value\n        });\n      });\n\n      items.presentationModeButton.addEventListener('click',\n          function (e) {\n        eventBus.dispatch('presentationmode');\n      });\n\n      items.addNote.addEventListener('click', function(e) {\n        eventBus.dispatch('toggleaddingnote', {\n          source: self,\n        });\n      });\n\n      items.nextNote.addEventListener('click', function(e) {\n        eventBus.dispatch('movetonextnote');\n      });\n\n      items.previousNote.addEventListener('click', function(e) {\n        eventBus.dispatch('movetopreviousnote');\n      });\n\n      // Suppress context menus for some controls\n      items.scaleSelect.oncontextmenu = noContextMenuHandler;\n\n      localized.then(this._localized.bind(this));\n    },\n\n    _bindAddNoteListener: function Toolbar_bindAddNoteListener() {\n      var addingNoteButton = this.items.addNote;\n      if (!addingNoteButton) {\n        return;\n      }\n\n      var isAddingNoteActive = false;\n      this.eventBus.on('addingnotechanged', function(e) {\n        if (isAddingNoteActive === e.isActive) {\n          return;\n        }\n        isAddingNoteActive = e.isActive;\n        if (isAddingNoteActive) {\n          addingNoteButton.classList.add('toggled');\n          addingNoteButton.title = 'Click and drag on a page to add a note';\n          addingNoteButton.firstElementChild.textContent =\n            'Click and drag on a page to add a note';\n        } else {\n          addingNoteButton.classList.remove('toggled');\n          addingNoteButton.title = 'Add Note';\n          addingNoteButton.firstElementChild.textContent = 'Add Note';\n        }\n      });\n    },\n\n    _localized: function Toolbar_localized() {\n      this._wasLocalized = true;\n      this._adjustScaleWidth();\n      this._updateUIState(true);\n    },\n\n    _updateUIState: function Toolbar_updateUIState(resetNumPages) {\n      function selectScaleOption(value, scale) {\n        var options = items.scaleSelect.options;\n        var predefinedValueFound = false;\n        for (var i = 0, ii = options.length; i < ii; i++) {\n          var option = options[i];\n          if (option.value !== value) {\n            option.selected = false;\n            continue;\n          }\n          option.selected = true;\n          predefinedValueFound = true;\n        }\n        if (!predefinedValueFound) {\n          var customScale = Math.round(scale * 10000) / 100;\n          items.customScaleOption.textContent =\n            mozL10n.get('page_scale_percent', {scale: customScale},\n                        '{{scale}}%');\n          items.customScaleOption.selected = true;\n        }\n      }\n\n      if (!this._wasLocalized) {\n        // Don't update UI state until we will localize the toolbar.\n        return;\n      }\n\n      var pageNumber = this.pageNumber;\n      var scaleValue = (this.pageScaleValue || this.pageScale).toString();\n      var scale = this.pageScale;\n\n      var items = this.items;\n      var pagesCount = this.pagesCount;\n\n      if (resetNumPages) {\n        if (this.hasPageLabels) {\n          items.pageNumber.type = 'text';\n        } else {\n          items.pageNumber.type = 'number';\n          items.numPages.textContent = mozL10n.get('of_pages',\n            { pagesCount, }, 'of {{pagesCount}}');\n        }\n        items.pageNumber.max = pagesCount;\n      }\n\n      if (this.hasPageLabels) {\n        items.pageNumber.value = this.pageLabel;\n        items.numPages.textContent = mozL10n.get('page_of_pages',\n          { pageNumber, pagesCount, }, '({{pageNumber}} of {{pagesCount}})');\n      } else {\n        items.pageNumber.value = pageNumber;\n      }\n\n      items.previous.disabled = (pageNumber <= 1);\n      items.next.disabled = (pageNumber >= pagesCount);\n\n      items.zoomOut.disabled = (scale <= MIN_SCALE);\n      items.zoomIn.disabled = (scale >= MAX_SCALE);\n\n      selectScaleOption(scaleValue, scale);\n    },\n\n    updateLoadingIndicatorState:\n        function Toolbar_updateLoadingIndicatorState(loading) {\n      var pageNumberInput = this.items.pageNumber;\n\n      if (loading) {\n        pageNumberInput.classList.add(PAGE_NUMBER_LOADING_INDICATOR);\n      } else {\n        pageNumberInput.classList.remove(PAGE_NUMBER_LOADING_INDICATOR);\n      }\n    },\n\n    _adjustScaleWidth: function Toolbar_adjustScaleWidth() {\n      var container = this.items.scaleSelectContainer;\n      var select = this.items.scaleSelect;\n      animationStarted.then(function() {\n        // Adjust the width of the zoom box to fit the content.\n        // Note: If the window is narrow enough that the zoom box is not\n        //       visible, we temporarily show it to be able to adjust its width.\n        if (container.clientWidth === 0) {\n          container.setAttribute('style', 'display: inherit;');\n        }\n        if (container.clientWidth > 0) {\n          select.setAttribute('style', 'min-width: inherit;');\n          var width = select.clientWidth + SCALE_SELECT_CONTAINER_PADDING;\n          select.setAttribute('style', 'min-width: ' +\n                                      (width + SCALE_SELECT_PADDING) + 'px;');\n          container.setAttribute('style', 'min-width: ' + width + 'px; ' +\n                                          'max-width: ' + width + 'px;');\n        }\n      });\n    },\n  };\n\n  return Toolbar;\n})();\n\nexport {\n  Toolbar,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/toolbar.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst DEFAULT_VIEW_HISTORY_CACHE_SIZE = 20;\n\n/**\n * View History - This is a utility for saving various view parameters for\n *                recently opened files.\n *\n * The way that the view parameters are stored depends on how PDF.js is built,\n * for 'gulp <flag>' the following cases exist:\n *  - GENERIC or CHROME     - uses localStorage, if it is available.\n */\nclass ViewHistory {\n  constructor(fingerprint, cacheSize = DEFAULT_VIEW_HISTORY_CACHE_SIZE) {\n    this.fingerprint = fingerprint;\n    this.cacheSize = cacheSize;\n\n    this._initializedPromise = this._readFromStorage().then((databaseStr) => {\n      var database = JSON.parse(databaseStr || '{}');\n      if (!('files' in database)) {\n        database.files = [];\n      }\n      if (database.files.length >= this.cacheSize) {\n        database.files.shift();\n      }\n      var index;\n      for (var i = 0, length = database.files.length; i < length; i++) {\n        var branch = database.files[i];\n        if (branch.fingerprint === this.fingerprint) {\n          index = i;\n          break;\n        }\n      }\n      if (typeof index !== 'number') {\n        index = database.files.push({fingerprint: this.fingerprint}) - 1;\n      }\n      this.file = database.files[index];\n      this.database = database;\n    });\n  }\n\n  _writeToStorage() {\n    return new Promise((resolve) => {\n      var databaseStr = JSON.stringify(this.database);\n\n      localStorage.setItem('pdfjs.history', databaseStr);\n      resolve();\n    });\n  }\n\n  _readFromStorage() {\n    return new Promise(function(resolve) {\n      var value = localStorage.getItem('pdfjs.history');\n\n      // TODO: Remove this key-name conversion after a suitable time-frame.\n      // Note that we only remove the old 'database' entry if it looks like\n      // it was created by PDF.js, to avoid removing someone else's data.\n      if (!value) {\n        var databaseStr = localStorage.getItem('database');\n        if (databaseStr) {\n          try {\n            var database = JSON.parse(databaseStr);\n            if (typeof database.files[0].fingerprint === 'string') {\n              localStorage.setItem('pdfjs.history', databaseStr);\n              localStorage.removeItem('database');\n              value = databaseStr;\n            }\n          } catch (ex) { }\n        }\n      }\n      resolve(value);\n    });\n  }\n\n  set(name, val) {\n    return this._initializedPromise.then(() => {\n      this.file[name] = val;\n      return this._writeToStorage();\n    });\n  }\n\n  setMultiple(properties) {\n    return this._initializedPromise.then(() => {\n      for (var name in properties) {\n        this.file[name] = properties[name];\n      }\n      return this._writeToStorage();\n    });\n  }\n\n  get(name, defaultValue) {\n    return this._initializedPromise.then(() => {\n      var val = this.file[name];\n      return val !== undefined ? val : defaultValue;\n    });\n  }\n\n  getMultiple(properties) {\n    return this._initializedPromise.then(() => {\n      var values = Object.create(null);\n\n      for (var name in properties) {\n        var val = this.file[name];\n        values[name] = val !== undefined ? val : properties[name];\n      }\n      return values;\n    });\n  }\n}\n\nexport {\n  ViewHistory,\n};\n\n\n\n// WEBPACK FOOTER //\n// web/view_history.js","/* Copyright 2016 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals chrome */\n\n'use strict';\n\nvar DEFAULT_URL = 'compressed.tracemonkey-pldi-09.pdf';\n\nvar pdfjsWebApp;\nif (typeof PDFJSDev !== 'undefined' && PDFJSDev.test('PRODUCTION')) {\n  pdfjsWebApp = require('./app.js');\n}\nif (typeof PDFJSDev !== 'undefined' && PDFJSDev.test('GENERIC')) {\n  require('./genericcom.js');\n}\n\nfunction getViewerConfiguration() {\n  return {\n    appContainer: document.body,\n    mainContainer: document.getElementById('viewerContainer'),\n    viewerContainer: document.getElementById('viewer'),\n    eventBus: null, // using global event bus with DOM events\n    toolbar: {\n      container: document.getElementById('toolbarViewer'),\n      numPages: document.getElementById('numPages'),\n      pageNumber: document.getElementById('pageNumber'),\n      scaleSelectContainer: document.getElementById('scaleSelectContainer'),\n      scaleSelect: document.getElementById('scaleSelect'),\n      customScaleOption: document.getElementById('customScaleOption'),\n      previous: document.getElementById('previous'),\n      next: document.getElementById('next'),\n      zoomIn: document.getElementById('zoomIn'),\n      zoomOut: document.getElementById('zoomOut'),\n      viewFind: document.getElementById('viewFind'),\n      presentationModeButton: document.getElementById('presentationMode'),\n      addNote: document.getElementById('addNote'),\n      previousNote: document.getElementById('previousNote'),\n      nextNote: document.getElementById('nextNote'),\n    },\n    secondaryToolbar: {\n      toolbar: document.getElementById('secondaryToolbar'),\n      toggleButton: document.getElementById('secondaryToolbarToggle'),\n      toolbarButtonContainer:\n        document.getElementById('secondaryToolbarButtonContainer'),\n      downloadButton: document.getElementById('secondaryDownload'),\n      firstPageButton: document.getElementById('firstPage'),\n      lastPageButton: document.getElementById('lastPage'),\n      pageRotateCwButton: document.getElementById('pageRotateCw'),\n      pageRotateCcwButton: document.getElementById('pageRotateCcw'),\n      toggleHandToolButton: document.getElementById('toggleHandTool'),\n      documentPropertiesButton: document.getElementById('documentProperties'),\n    },\n    fullscreen: {\n      contextFirstPage: document.getElementById('contextFirstPage'),\n      contextLastPage: document.getElementById('contextLastPage'),\n      contextPageRotateCw: document.getElementById('contextPageRotateCw'),\n      contextPageRotateCcw: document.getElementById('contextPageRotateCcw'),\n    },\n    sidebar: {\n      // Divs (and sidebar button)\n      mainContainer: document.getElementById('mainContainer'),\n      outerContainer: document.getElementById('outerContainer'),\n      toggleButton: document.getElementById('sidebarToggle'),\n      // Buttons\n      thumbnailButton: document.getElementById('viewThumbnail'),\n      outlineButton: document.getElementById('viewOutline'),\n      // Views\n      thumbnailView: document.getElementById('thumbnailView'),\n      outlineView: document.getElementById('outlineView'),\n    },\n    findBar: {\n      bar: document.getElementById('findbar'),\n      toggleButton: document.getElementById('viewFind'),\n      findField: document.getElementById('findInput'),\n      highlightAllCheckbox: document.getElementById('findHighlightAll'),\n      caseSensitiveCheckbox: document.getElementById('findMatchCase'),\n      findMsg: document.getElementById('findMsg'),\n      findResultsCount: document.getElementById('findResultsCount'),\n      findStatusIcon: document.getElementById('findStatusIcon'),\n      findPreviousButton: document.getElementById('findPrevious'),\n      findNextButton: document.getElementById('findNext')\n    },\n    passwordOverlay: {\n      overlayName: 'passwordOverlay',\n      container: document.getElementById('passwordOverlay'),\n      label: document.getElementById('passwordText'),\n      input: document.getElementById('password'),\n      submitButton: document.getElementById('passwordSubmit'),\n      cancelButton: document.getElementById('passwordCancel')\n    },\n    documentProperties: {\n      overlayName: 'documentPropertiesOverlay',\n      container: document.getElementById('documentPropertiesOverlay'),\n      closeButton: document.getElementById('documentPropertiesClose'),\n      fields: {\n        'fileName': document.getElementById('fileNameField'),\n        'fileSize': document.getElementById('fileSizeField'),\n        'title': document.getElementById('titleField'),\n        'author': document.getElementById('authorField'),\n        'subject': document.getElementById('subjectField'),\n        'keywords': document.getElementById('keywordsField'),\n        'creationDate': document.getElementById('creationDateField'),\n        'modificationDate': document.getElementById('modificationDateField'),\n        'creator': document.getElementById('creatorField'),\n        'producer': document.getElementById('producerField'),\n        'version': document.getElementById('versionField'),\n        'pageCount': document.getElementById('pageCountField')\n      }\n    },\n    errorWrapper: {\n      container: document.getElementById('errorWrapper'),\n      errorMessage: document.getElementById('errorMessage'),\n      closeButton: document.getElementById('errorClose'),\n      errorMoreInfo: document.getElementById('errorMoreInfo'),\n      moreInfoButton: document.getElementById('errorShowMore'),\n      lessInfoButton: document.getElementById('errorShowLess'),\n    },\n    defaultUrl: DEFAULT_URL\n  };\n}\n\nfunction webViewerLoad() {\n  var config = getViewerConfiguration();\n  if (typeof PDFJSDev === 'undefined' || !PDFJSDev.test('PRODUCTION')) {\n    Promise.all([\n      SystemJS.import('pdfjs-web/app'),\n      SystemJS.import('pdfjs-web/genericcom'),\n    ]).then(function (modules) {\n      var app = modules[0];\n      window.PDFViewerApplication = app.PDFViewerApplication;\n      app.PDFViewerApplication.run(config);\n    });\n  } else {\n    window.PDFViewerApplication = pdfjsWebApp.PDFViewerApplication;\n    pdfjsWebApp.PDFViewerApplication.run(config);\n  }\n}\n\nif (document.readyState === 'interactive' ||\n    document.readyState === 'complete') {\n  webViewerLoad();\n} else {\n  document.addEventListener('DOMContentLoaded', webViewerLoad, true);\n}\n\n\n\n// WEBPACK FOOTER //\n// web/viewer.js"],"sourceRoot":""}